# ä¹é˜Ÿæ•°æ®åº“ç®¡ç†ç³»ç»Ÿéœ€æ±‚&è®¾è®¡æ–‡æ¡£

[TOC]

## æ•°æ®åº“

### æ•°æ®åº“åº”ç”¨åœºæ™¯

* å»ºç«‹ä¸€ä¸ªä¹é˜Ÿç›¸å…³æ•°æ®åº“ï¼Œè®°å½•ä¹é˜Ÿã€ä¹é˜Ÿæˆå‘˜ã€ä¸“è¾‘ã€æ­Œæ›²ã€æ¼”å”±ä¼šã€ä¹è¯„å’Œæ­Œè¿·ç­‰çš„ä¿¡æ¯ï¼š
* æ¯ä¸ªä¹é˜ŸåŒ…æ‹¬åç§°ã€æˆå‘˜ã€æˆç«‹æ—¶é—´ã€ä¹é˜Ÿä»‹ç»ç­‰ï¼Œæ¯ä¸ªä¹é˜Ÿæœ‰ä¸€ä¸ªé˜Ÿé•¿ï¼›
* ä¹é˜Ÿæ¯ä½æˆå‘˜åŒ…æ‹¬å§“åã€æ€§åˆ«ã€å¹´é¾„ã€ä¹é˜Ÿåˆ†å·¥ç­‰ï¼Œæ¯ä¸ªæˆå‘˜æœ‰åŠ å…¥ä¹é˜Ÿçš„æ—¶é—´ï¼Œï¼ˆå¦‚æœä¸­é€”ç¦»å¼€ï¼‰æœ‰ç¦»å¼€ä¹é˜Ÿçš„æ—¶é—´ï¼›
* ä¸“è¾‘åŒ…æ‹¬åç§°ã€å‘è¡¨æ—¶é—´ã€ä¸“è¾‘æ–‡æ¡ˆç­‰ï¼Œæ¯ä¸ªä¹é˜Ÿå¯å‘è¡¨å¤šå¼ ä¸“è¾‘ï¼›
* æ­Œæ›²åŒ…æ‹¬æ­Œæ›²åç§°ã€è¯æ›²ä½œè€…ã€æ‰€åœ¨ä¸“è¾‘ç­‰ï¼›
* æ¼”å”±ä¼šåŒ…æ‹¬æ¼”å”±ä¼šåç§°ã€ä¸¾åŠæ—¶é—´ã€åœ°ç‚¹ç­‰ï¼›
* æ­Œè¿·åŒ…æ‹¬å§“åã€æ€§åˆ«ã€å¹´é¾„ã€èŒä¸šã€å­¦å†ç­‰ã€‚

* è§„å®š
  * æ¯ä¸ªä¹é˜Ÿåªæœ‰ä¸€åé˜Ÿé•¿ï¼Œæ¯ä¸ªä¹é˜Ÿæˆå‘˜åŒä¸€æ—¶æœŸåªèƒ½åŠ å…¥ä¸€ä¸ªä¹é˜Ÿï¼›
  * ä¸€ä¸ªä¹é˜Ÿå¯ä»¥æ¼”å”±å¤šé¦–æ­Œæ›²ï¼ˆåŒ…æ‹¬åˆ«çš„ä¹é˜Ÿæ­Œæ›²ï¼‰ï¼ŒåŒä¸€é¦–æ­Œå¯ä»¥è¢«å¤šä¸ªä¹é˜Ÿæ¼”å”±ï¼›
  * ä¸€ä¸ªä¹é˜Ÿå¯ä»¥ä¸¾åŠå¤šåœºæ¼”å”±ä¼šï¼Œä¸”å‡è®¾åŒä¸€åœºæ¼”å”±ä¼šæ²¡æœ‰å¤šä¸ªä¹é˜Ÿå‚åŠ ï¼›
  * æ­Œè¿·å¯ä»¥å–œæ¬¢å¤šä¸ªä¹é˜Ÿã€ä¸“è¾‘åŠæ­Œæ›²ï¼Œæ­Œè¿·å¯ä»¥ç»™ä¸“è¾‘è¯„è®ºã€æ‰“åˆ†ï¼ˆåŒä¸€å¼ ä¸“è¾‘åªèƒ½æ‰“ä¸€æ¬¡ï¼‰ï¼Œæ­Œè¿·å¯ä»¥å‚åŠ ä»»æ„æ¼”å”±ä¼šï¼›
  * æ¯å¼ ä¸“è¾‘æœ‰è‡ªå·±çš„ä¹è¯„ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ‰€æœ‰æ­Œè¿·çš„è¯„è®ºï¼Œä»¥åŠè®¡ç®—å¹³å‡åˆ†å¾—å‡ºä¸“è¾‘çš„ä¹è¯„åˆ†æ•°ã€‚

### æ•°æ®åº“ç³»ç»Ÿè®¾è®¡

#### 1ã€éœ€æ±‚åˆ†æ

åˆ†æè¯¥åœºæ™¯ä¸­çš„æ•°æ®é¡¹ã€æ•°æ®ç»“æ„ã€æ•°æ®æµï¼Œå¯èƒ½æœ‰å®Œæ•´æ€§å’Œå®‰å…¨æ€§è¦æ±‚ï¼Œå½¢æˆéœ€æ±‚åˆ†ææŠ¥å‘Šã€‚

  - æ ¸å¿ƒå®ä½“åŠæ•°æ®é¡¹ï¼š
    - Bandï¼šåç§°ã€æˆç«‹æ—¥æœŸã€ç®€ä»‹ã€é˜Ÿé•¿ï¼ˆå”¯ä¸€æˆå‘˜å¤–é”®ï¼‰ã€æˆå‘˜äººæ•°ï¼ˆåç»­è§¦å‘å™¨ç»´æŠ¤ï¼‰ã€‚
    - Memberï¼šå§“åã€æ€§åˆ«ã€å‡ºç”Ÿæ—¥æœŸ/å¹´é¾„ã€åˆ†å·¥ã€åŠ å…¥æ—¥æœŸã€ç¦»å¼€æ—¥æœŸï¼ˆå¿…å¡«ï¼Œå¯çº¦æŸç¦»å¼€æ—¥æœŸâ‰¥åŠ å…¥æ—¥æœŸï¼‰ã€‚
    - Albumï¼šåç§°ã€å‘è¡Œæ—¥æœŸã€æ–‡æ¡ˆã€æ‰€å±ä¹é˜Ÿã€ä¹è¯„åˆ†ï¼ˆå¹³å‡åˆ†ç¼“å­˜ï¼‰ã€‚
    - Songï¼šåç§°ã€è¯ä½œè€…ã€æ›²ä½œè€…ã€æ‰€å±ä¸“è¾‘ï¼Œå¯è¢«å¤šä¹é˜Ÿæ¼”å”±ã€‚
    - Concertï¼šåç§°ã€ä¸¾åŠæ—¶é—´ã€åœ°ç‚¹ã€æ‰¿åŠä¹é˜Ÿã€‚
    - Fanï¼šå§“åã€æ€§åˆ«ã€å¹´é¾„ã€èŒä¸šã€å­¦å†ã€‚
    - AlbumReviewï¼šè¯„è®ºå†…å®¹ã€è¯„åˆ†(1â€“10 æ­¥é•¿ 0.5)ã€è¯„è®ºæ—¶é—´ã€è¯„è®ºäººã€ç›®æ ‡ä¸“è¾‘ã€‚
  - æ•°æ®æµ/ä¸šåŠ¡æ“ä½œï¼š
    - ä¹é˜Ÿç”¨æˆ·ç»´æŠ¤ä¹é˜Ÿã€æˆå‘˜ã€ä¸“è¾‘ã€æ­Œæ›²ã€æ¼”å”±ä¼šä¿¡æ¯ï¼Œå¯æŸ¥ç²‰ä¸ä¸ä¹è¯„ã€‚
    - ç²‰ä¸ç”¨æˆ·ç»´æŠ¤ä¸ªäººèµ„æ–™åŠå–œæ¬¢åˆ—è¡¨ï¼ˆä¹é˜Ÿã€ä¸“è¾‘ã€æ­Œæ›²ä¸‰ç§ï¼‰ã€å‚åŠ æ¼”å”±ä¼šè®°å½•ã€æäº¤ä¸“è¾‘ä¹è¯„ã€‚
    - Admin æ‹¥æœ‰æ‰€æœ‰è¯»å†™æƒé™ï¼Œç”¨äºå…¨å±€ç»´æŠ¤ä¸å®¡è®¡ã€‚
    - ä¹è¯„æµç¨‹ï¼šç²‰ä¸æäº¤è¯„åˆ†ä¸è¯„è®º â†’ å†™å…¥ AlbumReview â†’ æ›´æ–°ä¸“è¾‘å¹³å‡åˆ†ï¼›åŒä¸€ç²‰ä¸ä¸èƒ½é‡å¤è¯„åˆ†åŒä¸€ä¸“è¾‘ã€‚
  - å®Œæ•´æ€§/å®‰å…¨æ€§è¦æ±‚ï¼š
    - å¤–é”®çº¦æŸç¡®ä¿å¼•ç”¨å®Œæ•´æ€§ï¼ˆä¹é˜Ÿ-æˆå‘˜ã€ä¹é˜Ÿ-ä¸“è¾‘ç­‰ï¼‰ï¼›åŠ å…¥/ç¦»å¼€æ—¥æœŸå¿…é¡»å­˜åœ¨ä¸”æ»¡è¶³æ—¶é—´é¡ºåºã€‚
    - è¯„åˆ†èŒƒå›´çº¦æŸï¼ˆ1â€“10ï¼Œæ­¥é•¿ 0.5ï¼‰ï¼Œæ–‡æœ¬å­—æ®µé•¿åº¦æ§åˆ¶ï¼Œå¿…è¦å”¯ä¸€çº¦æŸï¼ˆä¹é˜Ÿåã€ä¸“è¾‘å+ä¹é˜Ÿç­‰ï¼‰ã€‚
    - éœ€è¦è§¦å‘å™¨ä¿æŒä¹é˜Ÿæˆå‘˜æ•°ã€ä¸“è¾‘æ’è¡Œæ¦œåŒæ­¥ï¼Œå¹¶è·Ÿè¸ªæˆå‘˜å†å²ï¼Œç¡®ä¿æ¯ä¸ªä¹é˜Ÿæˆå‘˜åŒä¸€æ—¶æœŸåªèƒ½åŠ å…¥ä¸€ä¸ªä¹é˜Ÿã€‚
    - æ—¥æœŸå®Œæ•´æ€§çº¦æŸï¼šæˆå‘˜åŠ å…¥æ—¥æœŸã€ä¸“è¾‘å‘è¡Œæ—¥æœŸã€æ¼”å”±ä¼šæ—¥æœŸå‡ä¸èƒ½æ—©äºä¹é˜Ÿæˆç«‹æ—¥æœŸï¼Œé€šè¿‡è§¦å‘å™¨å’Œåº”ç”¨å±‚åŒé‡éªŒè¯ã€‚
    - è§’è‰²éš”ç¦»ï¼šadminã€bandã€fanï¼›band ç”¨æˆ·åªèƒ½æ“ä½œæœ¬ä¹é˜Ÿä¸å…¶ç›¸å…³ä¿¡æ¯ï¼›fan ç”¨æˆ·ä»…èƒ½æ“ä½œè‡ªèº«ä¸ä¹è¯„ã€‚
    - è§†å›¾ä¸ç»Ÿè®¡ï¼šband ç”¨æˆ·æŸ¥çœ‹è‡ªå·±ç²‰ä¸åŠä¹è¯„ã€åŸºç¡€ç»Ÿè®¡ï¼ˆæ•°é‡/å¹´é¾„æ®µ/æ€§åˆ«/èŒä¸š/å­¦å†ã€æœ€å—æ¬¢è¿æ­Œæ›²ç­‰ï¼‰ã€‚

#### 2ã€æ¦‚å¿µæ¨¡å‹è®¾è®¡

ç”¨E-Rå›¾å®ç°ä»¥ä¸Šéœ€æ±‚åˆ†ææŠ¥å‘Šçš„å†…å®¹ã€‚

* å®ä½“ä¸ä¸»é”®

  * Band(band_id, name, founded_at, intro, leader_member_id, member_count)ï¼›leader_member_id è‡ªåæŒ‡å‘æˆå‘˜å…³ç³»ã€‚

  - Member(member_id, name, gender, birth_date/age, role, join_date, leave_date, band_id)ï¼›join_dateã€leave_date å‡å¿…å¡«ã€‚

- Album(album_id, title, release_date, copywriting, band_id, avg_score)ã€‚
  - Song(song_id, title, lyricist, composer, album_id)ã€‚
- Concert(concert_id, title, event_time, location, band_id)ã€‚
  - Fan(fan_id, name, gender, age, occupation, education)ã€‚
- AlbumReview(review_id, fan_id, album_id, rating, comment, reviewed_at)ã€‚

- å…³ç³»ä¸åŸºæ•°
  - Band 1â€”â€”N Memberï¼ˆå«â€œLeaderâ€å­ç±»å‹ï¼šBand æŒ‡å‘è‡ªèº«æˆå‘˜ï¼Œçº¦æŸå”¯ä¸€ï¼‰ã€‚
  - Band 1â€”â€”N Albumï¼›Album 1â€”â€”N Songã€‚
  - Band Mâ€”â€”N Songï¼ˆé€šè¿‡ Performanceï¼‰ï¼ŒåŒä¸€é¦–æ­Œå¯è¢«å¤šä¹é˜Ÿæ¼”å”±ã€‚
  - Band 1â€”â€”N Concertï¼›Fan Mâ€”â€”N Concertï¼ˆConcertAttendanceï¼‰ã€‚
  - Fan Mâ€”â€”N Band (FanFavoriteBand)ã€Fan Mâ€”â€”N Album (FanFavoriteAlbum)ã€Fan Mâ€”â€”N Song (FanFavoriteSong)ã€‚
  - Fan 1â€”â€”N AlbumReviewï¼ˆå¿…é¡»åœ¨ AlbumReview ä¸Šæ˜¾å¼è®¾å®šå”¯ä¸€çº¦æŸ UNIQUE(fan_id, album_id)ï¼Œè¿™æ ·æ•°æ®åº“ä¼šæ‹’ç»åŒä¸€ (fan_id, album_id) å†æ’å…¥ç¬¬äºŒè¡Œï¼Œä»è€Œä¿è¯â€œæ¯ä½ç²‰ä¸å¯¹æŸå¼ ä¸“è¾‘åªè¯„è®ºä¸€æ¬¡â€ï¼‰
  - Album 1â€”â€”N AlbumReviewï¼Œavg_score ç”±è§¦å‘å™¨/ç¨‹åºç»´æŠ¤ã€‚

![image-20251219232350085](img/image-20251219232350085.png)

#### 3ã€é€»è¾‘æ¨¡å‹è®¾è®¡

æ ¹æ®E-Rå›¾å»ºç«‹å…³ç³»æ¨¡å‹ï¼Œè½¬åŒ–ä¸ºç›¸åº”çš„å…³ç³»æ¨¡å¼ï¼›å®šä¹‰å…³ç³»æ¨¡å‹æ‰€æœ‰çš„å®Œæ•´æ€§çº¦æŸï¼›åº”ç”¨æ•°æ®åº“è§„èŒƒåŒ–ç†è®ºä¼˜åŒ–å…³ç³»æ¨¡å‹ã€‚

* æ ¸å¿ƒå®ä½“è¡¨
  - User(user_id BIGINT PK, username VARCHAR(50) NOT NULL UNIQUE, password VARCHAR(255) NOT NULL, role ENUM('ADMIN','BAND','FAN') NOT NULL, related_id BIGINT NULL, status TINYINT NOT NULL DEFAULT 1, created_at/updated_at TIMESTAMP)ï¼Œåœ¨ usernameã€roleã€related_id ä¸Šå•ç‹¬å»ºç´¢å¼•ï¼Œrelated_id åˆ†åˆ«æŒ‡å‘ Band æˆ– Fanï¼ˆç®¡ç†å‘˜ä¸ºç©ºï¼‰ã€‚
  - Band(band_id BIGINT PK, name VARCHAR(100) NOT NULL UNIQUE, founded_at DATE NOT NULL, intro TEXT, leader_member_id BIGINT FKâ†’Member.member_id, member_count INT NOT NULL DEFAULT 0, created_at/updated_at TIMESTAMPï¼Œidx_founded_at)ï¼›leader é€šè¿‡å¤–é”® RESTRICT çº¦æŸï¼Œmember_count ç”±è§¦å‘å™¨ä»…ç»Ÿè®¡ leave_date IS NULL çš„åœ¨é˜Ÿæˆå‘˜ã€‚
  - Member(member_id BIGINT PK, person_id BIGINT, band_id BIGINT NOT NULL, name VARCHAR(50) NOT NULL, gender ENUM('M','F','O') NOT NULL, birth_date DATE NOT NULL, role VARCHAR(50) NOT NULL, join_date DATE NOT NULL, leave_date DATE NULL, created_at/updated_at TIMESTAMP, FKâ†’Band(band_id))ï¼›CHECK(leave_date IS NULL OR leave_date >= join_date)ï¼Œperson_id è¿½è¸ªåŒä¸€è‡ªç„¶äººè·¨é˜¶æ®µä»»èŒã€‚
  - Album(album_id BIGINT PK, band_id BIGINT NOT NULL, title VARCHAR(200) NOT NULL, release_date DATE NOT NULL, copywriting TEXT, avg_score DECIMAL(3,1) NULL, created_at/updated_at TIMESTAMP, UNIQUE(band_id, title) ä»¥åŠ idx_band_id/idx_release_date/idx_avg_score)ã€‚
  - Song(song_id BIGINT PK, album_id BIGINT NOT NULL, title VARCHAR(200) NOT NULL, lyricist/composer VARCHAR(100), created_at/updated_at TIMESTAMP, UNIQUE(album_id, title) ä¸ idx_album_id)ã€‚
  - Concert(concert_id BIGINT PK, band_id BIGINT NOT NULL, title VARCHAR(200) NOT NULL, event_time DATETIME NOT NULL, location VARCHAR(200) NOT NULL, created_at/updated_at TIMESTAMP, UNIQUE(band_id, title, event_time) å¹¶åœ¨ band_idã€event_time ä¸Šå»ºç´¢å¼•)ã€‚
  - Fan(fan_id BIGINT PK, name VARCHAR(50) NOT NULL, gender ENUM('M','F','O') NOT NULL, age INT NOT NULL CHECK(age BETWEEN 0 AND 120), occupation/education VARCHAR(50), created_at/updated_at TIMESTAMPï¼Œidx_age/idx_occupation/idx_education)ã€‚
* ä¸šåŠ¡å…³ç³» / æ—¥å¿—è¡¨
  - Performance(perf_id BIGINT PK, band_id BIGINT NOT NULL, song_id BIGINT NOT NULL, source_band_id BIGINT NULL, note TEXT, created_at TIMESTAMP, UNIQUE(band_id, song_id))ï¼›band_idã€song_idã€source_band_id å‡æœ‰ç´¢å¼•ï¼Œsource_band_id æ”¯æŒæ ‡è¯†åŸå”±ä¹é˜Ÿã€‚
  - ConcertAttendance(attend_id BIGINT PK, fan_id BIGINT NOT NULL, concert_id BIGINT NOT NULL, created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP, UNIQUE(fan_id, concert_id))ï¼Œfan_idã€concert_id å‡ç´¢å¼•ï¼Œè®°å½•æ­Œè¿·å‚æ¼”æ—¥å¿—ã€‚
  - FanFavoriteBand(fan_id BIGINT, band_id BIGINT, created_at TIMESTAMP, PK(fan_id, band_id) + idx_band_id)ã€‚
  - FanFavoriteAlbum(fan_id BIGINT, album_id BIGINT, created_at TIMESTAMP, PK(fan_id, album_id) + idx_album_id)ã€‚
  - FanFavoriteSong(fan_id BIGINT, song_id BIGINT, created_at TIMESTAMP, PK(fan_id, song_id) + idx_song_id)ã€‚
  - AlbumReview(review_id BIGINT PK, fan_id BIGINT NOT NULL, album_id BIGINT NOT NULL, rating DECIMAL(3,1) NOT NULL, comment TEXT, reviewed_at DATETIME NOT NULL, created_at TIMESTAMP, UNIQUE(fan_id, album_id))ï¼›CHECK(rating BETWEEN 1 AND 10) ä¸ CHECK(rating * 2 = FLOOR(rating * 2)) è”åˆä¿è¯ 0.5 åˆ†çº§ï¼Œfan_id/album_id/reviewed_at å‡å»ºç´¢å¼•ã€‚
* è¡ç”Ÿç»Ÿè®¡è¡¨
  - AlbumRanking(ranking_id INT PK, album_id BIGINT NOT NULL UNIQUE, band_id BIGINT NOT NULL, album_title VARCHAR(200), band_name VARCHAR(100), avg_score DECIMAL(3,1) NOT NULL, review_count INT NOT NULL DEFAULT 0, release_date DATE NOT NULL, updated_at TIMESTAMP, idx_avg_score DESC)ï¼Œç”±å­˜å‚¨è¿‡ç¨‹ `sp_update_album_ranking` ä¸ AlbumReview ä¸‰ä¸ªè§¦å‘å™¨ç»´æŠ¤æ¦œå•ã€‚
* å®Œæ•´æ€§çº¦æŸ
  - å®ä½“å®Œæ•´æ€§ï¼šå„è¡¨ä¸»é”®ï¼ˆå« Userã€Bandã€Memberã€Albumã€Songã€Concertã€Fan ç­‰ï¼‰å‡ NOT NULL ä¸”è‡ªå¢ï¼ŒBand.nameã€User.username ç­‰å…³é”®å­—æ®µè®¾ç½® UNIQUEã€‚
  - å¼•ç”¨å®Œæ•´æ€§ï¼šå¤–é”®å®ç°ä¸ SQL ä¸€è‡´â€”â€”Band.leader_member_idã€Member.band_id ä½¿ç”¨ ON UPDATE/DELETE RESTRICTï¼›Album/Song/Concert ä¸çˆ¶è¡¨é‡‡ç”¨ ON DELETE CASCADEï¼›FanFavorite*/Performance/AlbumReview/ConcertAttendance/User ç­‰è¡¨å‡é€šè¿‡ FK æŒ‡å‘çˆ¶å®ä½“ã€‚
  - ç”¨æˆ·å®šä¹‰å®Œæ•´æ€§ï¼š
    - CHECK çº¦æŸï¼š`Fan.age BETWEEN 0 AND 120`ã€`leave_date IS NULL OR leave_date >= join_date`ã€`rating BETWEEN 1 AND 10`ã€`rating * 2 = FLOOR(rating * 2)` ç­‰ï¼›æ€§åˆ«ç»Ÿä¸€é™å®šåœ¨ ENUM('M','F','O')ã€‚
    - UNIQUE / ç»„åˆä¸»é”®ï¼šBand.nameã€Album(band_id,title)ã€Song(album_id,title)ã€Concert(band_id,title,event_time)ã€AlbumReview(fan_id,album_id)ã€ConcertAttendance(fan_id,concert_id) ä»¥åŠå„ FanFavorite è¡¨çš„è”åˆä¸»é”®ï¼Œé˜²æ­¢é‡å¤å–œå¥½/å‚æ¼”/è¯„è®ºã€‚
  - è§¦å‘å™¨ä¸è¿‡ç¨‹ï¼š
    - `trg_member_insert/update/delete` è‡ªåŠ¨ç»´æŠ¤ Band.member_countï¼Œä»…ç»Ÿè®¡ä»åœ¨é˜Ÿæˆå‘˜ã€‚
    - `trg_band_check_leader` æ ¡éªŒ leader å±äºæœ¬é˜Ÿã€‚
    - `trg_member_check_person_overlap_*` åˆ©ç”¨ person_id å’Œæ—¶é—´èŒƒå›´é˜²æ­¢åŒä¸€è‡ªç„¶äººåœ¨åŒä¸€æ—¶é—´æ®µåŠ å…¥å¤šä¸ªä¹é˜Ÿã€‚
    - `trg_member_check_join_date_*` ç¡®ä¿æˆå‘˜åŠ å…¥æ—¥æœŸä¸æ—©äºä¹é˜Ÿæˆç«‹æ—¥æœŸã€‚
    - `trg_album_check_release_date_*` ç¡®ä¿ä¸“è¾‘å‘è¡Œæ—¥æœŸä¸æ—©äºä¹é˜Ÿæˆç«‹æ—¥æœŸã€‚
    - `trg_concert_check_event_time_*` ç¡®ä¿æ¼”å”±ä¼šæ—¥æœŸä¸æ—©äºä¹é˜Ÿæˆç«‹æ—¥æœŸã€‚
    - `trg_review_*` + `sp_update_album_ranking` åŒæ­¥ Album.avg_score å’Œ AlbumRankingã€‚
  - æ—¥æœŸå®Œæ•´æ€§çº¦æŸï¼š
    - æˆå‘˜åŠ å…¥æ—¥æœŸï¼ˆjoin_dateï¼‰å¿…é¡» >= ä¹é˜Ÿæˆç«‹æ—¥æœŸï¼ˆfounded_atï¼‰
    - ä¸“è¾‘å‘è¡Œæ—¥æœŸï¼ˆrelease_dateï¼‰å¿…é¡» >= ä¹é˜Ÿæˆç«‹æ—¥æœŸï¼ˆfounded_atï¼‰
    - æ¼”å”±ä¼šæ—¥æœŸï¼ˆevent_timeï¼‰å¿…é¡» >= ä¹é˜Ÿæˆç«‹æ—¥æœŸï¼ˆfounded_atï¼‰
    - é€šè¿‡æ•°æ®åº“è§¦å‘å™¨å’Œåº”ç”¨å±‚åŒé‡éªŒè¯ç¡®ä¿æ—¶é—´é¡ºåºçš„é€»è¾‘æ­£ç¡®æ€§
* è§„èŒƒåŒ–è®¨è®º
  - æ‰€æœ‰å…³ç³»è¾¾åˆ° 3NF/BCNFï¼Œmember_count ä¸ avg_score å±äºæ€§èƒ½å­—æ®µï¼Œé€šè¿‡è§¦å‘å™¨ä¿æŒæ´¾ç”Ÿå€¼ä¸€è‡´æ€§ï¼Œä¸ SQL æ–‡ä»¶ä¿æŒä¸€è‡´ã€‚
* ç´¢å¼•è®¾è®¡ï¼ˆé€»è¾‘å±‚ï¼‰
  - å”¯ä¸€ç´¢å¼•ï¼šBand.nameã€Album(band_id,title)ã€Song(album_id,title)ã€Concert(band_id,title,event_time)ã€AlbumReview(fan_id,album_id)ã€ConcertAttendance(fan_id,concert_id)ã€FanFavoriteBand/FanFavoriteAlbum/FanFavoriteSong çš„ä¸»é”®ä»¥åŠ AlbumRanking.album_idã€‚
  - æ™®é€šç´¢å¼•ï¼šBand.idx_founded_atã€Member.idx_band_id/idx_join_leave/idx_person_datesã€Album.idx_band_id/idx_release_date/idx_avg_scoreã€Song.idx_album_idã€Concert.idx_band_id/idx_event_timeã€Fan.idx_age/idx_occupation/idx_educationã€Performance.idx_band_id/idx_song_idã€ConcertAttendance.idx_fan_id/idx_concert_idã€FanFavoriteBand.idx_band_idã€FanFavoriteAlbum.idx_album_idã€FanFavoriteSong.idx_song_idã€AlbumReview.idx_fan_id/idx_album_id/idx_reviewed_atã€AlbumRanking.idx_avg_scoreã€User.idx_username/idx_role/idx_related_id ç­‰ç´¢å¼•ç”¨äºæ”¯æ’‘é«˜é¢‘æ£€ç´¢ã€‚

#### 4ã€æ•°æ®åº“å®æ–½

`database_implementation.sql`

`user_table_creation.sql`

##### å»ºåº“å»ºè¡¨

åˆ›å»ºäº†å®Œæ•´çš„ `band_management` æ•°æ®åº“ï¼ŒåŒ…å«14å¼ è¡¨ï¼š

**æ ¸å¿ƒå®ä½“è¡¨ï¼ˆ6å¼ ï¼‰**

- `Band` - ä¹é˜Ÿè¡¨ï¼ˆå«é˜Ÿé•¿å¤–é”®ã€æˆå‘˜äººæ•°å­—æ®µï¼‰
- `Member` - æˆå‘˜è¡¨ï¼ˆå«åŠ å…¥/ç¦»å¼€æ—¶é—´çº¦æŸï¼‰
- `Album` - ä¸“è¾‘è¡¨ï¼ˆå«å¹³å‡è¯„åˆ†å­—æ®µï¼‰
- `Song` - æ­Œæ›²è¡¨ï¼ˆå«è¯æ›²ä½œè€…ï¼‰
- `Concert` - æ¼”å”±ä¼šè¡¨ï¼ˆå«æ—¶é—´åœ°ç‚¹ï¼‰
- `Fan` - æ­Œè¿·è¡¨ï¼ˆå«èŒä¸šå­¦å†ï¼‰

**å…³ç³»è¡¨ï¼ˆ6å¼ ï¼‰**

- `Performance` - ä¹é˜Ÿæ¼”å”±æ­Œæ›²å…³ç³»ï¼ˆæ”¯æŒç¿»å”±ï¼‰
- `AlbumReview` - ä¸“è¾‘ä¹è¯„ï¼ˆå«è¯„åˆ†å’Œè¯„è®ºï¼‰
- `ConcertAttendance` - æ¼”å”±ä¼šå‚ä¸è®°å½•
- `FanFavoriteBand` - æ­Œè¿·å–œæ¬¢çš„ä¹é˜Ÿ
- `FanFavoriteAlbum` - æ­Œè¿·å–œæ¬¢çš„ä¸“è¾‘
- `FanFavoriteSong` - æ­Œè¿·å–œæ¬¢çš„æ­Œæ›²

**è¾…åŠ©è¡¨ï¼ˆ1å¼ ï¼‰**

- `AlbumRanking` - ä¸“è¾‘æ’è¡Œæ¦œï¼ˆåœ¨å®Œæ•´æ€§å®æ–½ä¸­åˆ›å»ºï¼‰

**ç”¨æˆ·è¡¨ï¼ˆ1å¼ ï¼‰**

* `User`

##### æ•°æ®åˆå§‹åŒ–

å½•å…¥ä¸€æ‰¹æ•°æ®ï¼Œæ•°æ®é‡å°½é‡ä¿è¯èƒ½å¤Ÿæ”¯æ’‘åç»­åº”ç”¨ç³»ç»Ÿé¡µé¢çš„å±•ç¤ºã€‚

| æ•°æ®ç±»å‹   | æ•°é‡   | è¯´æ˜                                 |
| ---------- | ------ | ------------------------------------ |
| ä¹é˜Ÿ       | 10ä¸ª   | åŒ…å«ä¸­å›½å’Œå›½é™…çŸ¥åä¹é˜Ÿ               |
| æˆå‘˜       | 39äºº   | æ¶µç›–ä¸»å”±ã€å‰ä»–æ‰‹ã€è´æ–¯æ‰‹ã€é¼“æ‰‹ç­‰è§’è‰² |
| ä¸“è¾‘       | 24å¼    | å„ä¹é˜Ÿçš„ä»£è¡¨æ€§ä¸“è¾‘                   |
| æ­Œæ›²       | 75é¦–   | åŒ…å«å„ä¸“è¾‘çš„ç»å…¸æ›²ç›®                 |
| æ¼”å”±ä¼š     | 14åœº   | è¦†ç›–åŒ—äº¬ã€ä¸Šæµ·ã€å¹¿å·ã€æˆéƒ½ç­‰åŸå¸‚     |
| æ­Œè¿·       | 25äºº   | åŒ…å«ä¸åŒå¹´é¾„ã€èŒä¸šã€å­¦å†èƒŒæ™¯         |
| ä¹è¯„       | 32æ¡   | è¯„åˆ†ä»7.0åˆ°10.0ï¼ŒåŒ…å«è¯¦ç»†è¯„è®º        |
| å–œå¥½è®°å½•   | 100+æ¡ | æ­Œè¿·å¯¹ä¹é˜Ÿã€ä¸“è¾‘ã€æ­Œæ›²çš„å–œå¥½         |
| æ¼”å”±ä¼šå‚ä¸ | 30æ¡   | æ­Œè¿·å‚åŠ æ¼”å”±ä¼šçš„è®°å½•                 |
| æ¼”å”±å…³ç³»   | 78æ¡   | åŒ…æ‹¬åŸåˆ›å’Œç¿»å”±å…³ç³»                   |

#### 6ã€æ•°æ®åº“å®Œæ•´æ€§è¦æ±‚ 

* åœ¨ä¹é˜Ÿè¡¨ä¸­æ·»åŠ ä¸€ä¸ªå±æ€§ï¼šæˆå‘˜äººæ•°ï¼Œç„¶åå»ºç«‹ä¸€ä¸ªè§¦å‘å™¨ï¼Œè¦æ±‚å¦‚ä¸‹ï¼šå½“è¯¥ä¹é˜Ÿæ·»åŠ æˆ–åˆ é™¤æˆå‘˜æ—¶ï¼Œæˆå‘˜äººæ•°éšä¹‹æ”¹å˜ï¼›è¿›è¡Œä¹é˜Ÿæˆå‘˜å¢åŠ æˆ–åˆ é™¤æ“ä½œï¼ŒéªŒè¯è§¦å‘å™¨æœ‰æ•ˆæ€§
* åˆ›å»ºä¸€å¼ ä¸“è¾‘æ’è¡Œè¡¨ï¼Œæ”¶å½•ä¹è¯„åˆ†æ•°å‰åçš„ä¸“è¾‘ï¼Œå¹¶ä¸”åˆ›å»ºè§¦å‘å™¨å¦‚ä¸‹ï¼šå½“ä¸“è¾‘åˆ†æ•°æ›´æ–°æ—¶ï¼ŒåŠæ—¶æ›´æ–°æ­¤æ’è¡Œè¡¨ã€‚è¿›è¡Œä¹è¿·æ‰“åˆ†æ“ä½œï¼ŒéªŒè¯è§¦å‘å™¨æœ‰æ•ˆæ€§ã€‚
* **æ—¥æœŸå®Œæ•´æ€§çº¦æŸ**ï¼šç¡®ä¿æˆå‘˜åŠ å…¥æ—¥æœŸã€ä¸“è¾‘å‘è¡Œæ—¥æœŸã€æ¼”å”±ä¼šæ—¥æœŸä¸æ—©äºä¹é˜Ÿæˆç«‹æ—¥æœŸï¼Œé€šè¿‡è§¦å‘å™¨åœ¨æ•°æ®åº“å±‚é¢å¼ºåˆ¶æ‰§è¡Œï¼Œå¹¶åœ¨åº”ç”¨å±‚æä¾›å‹å¥½çš„é”™è¯¯æç¤ºã€‚

è§¦å‘å™¨åŠŸèƒ½è¯´æ˜ï¼š

1. æˆå‘˜äººæ•°è‡ªåŠ¨ç»´æŠ¤
   - æ·»åŠ æˆå‘˜æ—¶ï¼šè‡ªåŠ¨æ›´æ–°ä¹é˜Ÿçš„member_countï¼ˆåªç»Ÿè®¡åœ¨é˜Ÿæˆå‘˜ï¼‰
   - åˆ é™¤æˆå‘˜æ—¶ï¼šè‡ªåŠ¨æ›´æ–°ä¹é˜Ÿçš„member_count
   - æ›´æ–°æˆå‘˜æ—¶ï¼šå¦‚æœæ”¹å˜ä¹é˜Ÿæˆ–ç¦»é˜ŸçŠ¶æ€ï¼Œè‡ªåŠ¨æ›´æ–°ç›¸å…³ä¹é˜Ÿçš„member_count

2. ä¸“è¾‘æ’è¡Œæ¦œè‡ªåŠ¨æ›´æ–°
   - æ·»åŠ ä¹è¯„æ—¶ï¼šè‡ªåŠ¨æ›´æ–°ä¸“è¾‘å¹³å‡åˆ†å’Œæ’è¡Œæ¦œ
   - ä¿®æ”¹ä¹è¯„æ—¶ï¼šè‡ªåŠ¨æ›´æ–°ä¸“è¾‘å¹³å‡åˆ†å’Œæ’è¡Œæ¦œ
   - åˆ é™¤ä¹è¯„æ—¶ï¼šè‡ªåŠ¨æ›´æ–°ä¸“è¾‘å¹³å‡åˆ†å’Œæ’è¡Œæ¦œ

3. é˜Ÿé•¿çº¦æŸ
   - è®¾ç½®é˜Ÿé•¿æ—¶ï¼šè‡ªåŠ¨æ£€æŸ¥é˜Ÿé•¿æ˜¯å¦æ˜¯æœ¬ä¹é˜Ÿæˆå‘˜
   - å¦‚æœä¸æ˜¯ï¼ŒæŠ›å‡ºé”™è¯¯ï¼šé˜Ÿé•¿å¿…é¡»æ˜¯è¯¥ä¹é˜Ÿçš„æˆå‘˜

4. æˆå‘˜æ—¶é—´é‡å çº¦æŸ
   - æ·»åŠ æˆå‘˜æ—¶ï¼šæ£€æŸ¥åŒä¸€äººæ˜¯å¦åœ¨åŒä¸€æ—¶é—´æ®µåŠ å…¥å¤šä¸ªä¹é˜Ÿ
   - æ›´æ–°æˆå‘˜æ—¶ï¼šæ£€æŸ¥ä¿®æ”¹åæ˜¯å¦å¯¼è‡´æ—¶é—´é‡å 
   - å¦‚æœé‡å ï¼ŒæŠ›å‡ºé”™è¯¯ï¼šA person cannot join multiple bands at the same time

5. **æ—¥æœŸå®Œæ•´æ€§çº¦æŸ**ï¼ˆæ–°å¢ï¼‰
   - **æˆå‘˜åŠ å…¥æ—¥æœŸçº¦æŸ**ï¼š
     - æ’å…¥æˆå‘˜æ—¶ï¼šæ£€æŸ¥åŠ å…¥æ—¥æœŸæ˜¯å¦æ—©äºä¹é˜Ÿæˆç«‹æ—¥æœŸ
     - æ›´æ–°æˆå‘˜æ—¶ï¼šæ£€æŸ¥åŠ å…¥æ—¥æœŸæ˜¯å¦æ—©äºä¹é˜Ÿæˆç«‹æ—¥æœŸ
     - å¦‚æœè¿åï¼ŒæŠ›å‡ºé”™è¯¯ï¼šæˆå‘˜åŠ å…¥æ—¥æœŸä¸èƒ½æ—©äºä¹é˜Ÿæˆç«‹æ—¥æœŸ
   - **ä¸“è¾‘å‘è¡Œæ—¥æœŸçº¦æŸ**ï¼š
     - æ’å…¥ä¸“è¾‘æ—¶ï¼šæ£€æŸ¥å‘è¡Œæ—¥æœŸæ˜¯å¦æ—©äºä¹é˜Ÿæˆç«‹æ—¥æœŸ
     - æ›´æ–°ä¸“è¾‘æ—¶ï¼šæ£€æŸ¥å‘è¡Œæ—¥æœŸæ˜¯å¦æ—©äºä¹é˜Ÿæˆç«‹æ—¥æœŸ
     - å¦‚æœè¿åï¼ŒæŠ›å‡ºé”™è¯¯ï¼šä¸“è¾‘å‘è¡Œæ—¥æœŸä¸èƒ½æ—©äºä¹é˜Ÿæˆç«‹æ—¥æœŸ
   - **æ¼”å”±ä¼šæ—¥æœŸçº¦æŸ**ï¼š
     - æ’å…¥æ¼”å”±ä¼šæ—¶ï¼šæ£€æŸ¥æ¼”å‡ºæ—¶é—´æ˜¯å¦æ—©äºä¹é˜Ÿæˆç«‹æ—¥æœŸ
     - æ›´æ–°æ¼”å”±ä¼šæ—¶ï¼šæ£€æŸ¥æ¼”å‡ºæ—¶é—´æ˜¯å¦æ—©äºä¹é˜Ÿæˆç«‹æ—¥æœŸ
     - å¦‚æœè¿åï¼ŒæŠ›å‡ºé”™è¯¯ï¼šæ¼”å”±ä¼šæ—¥æœŸä¸èƒ½æ—©äºä¹é˜Ÿæˆç«‹æ—¥æœŸ

`database_integrity.sql`

```sql
-- ============================================
-- æ•°æ®åº“å®Œæ•´æ€§è¦æ±‚
-- ============================================

USE band_management;

-- ============================================
-- 1. æˆå‘˜äººæ•°ç»´æŠ¤è§¦å‘å™¨
-- ä¿®æ”¹è§¦å‘å™¨é€»è¾‘ï¼Œåªç»Ÿè®¡åœ¨é˜Ÿæˆå‘˜ï¼ˆleave_date IS NULLï¼‰
-- ============================================

-- 1.1 æˆå‘˜æ’å…¥æ—¶æ›´æ–°ä¹é˜Ÿæˆå‘˜äººæ•°
DROP TRIGGER IF EXISTS trg_member_insert_update_count;
DELIMITER $
CREATE TRIGGER trg_member_insert_update_count
AFTER INSERT ON Member
FOR EACH ROW
BEGIN
    -- æ›´æ–°ä¹é˜Ÿæˆå‘˜äººæ•°ï¼ˆåªç»Ÿè®¡åœ¨é˜Ÿæˆå‘˜ï¼‰
    UPDATE Band 
    SET member_count = (
        SELECT COUNT(*) 
        FROM Member 
        WHERE band_id = NEW.band_id AND leave_date IS NULL
    )
    WHERE band_id = NEW.band_id;
END$
DELIMITER ;

-- 1.2 æˆå‘˜åˆ é™¤æ—¶æ›´æ–°ä¹é˜Ÿæˆå‘˜äººæ•°
DROP TRIGGER IF EXISTS trg_member_delete_update_count;
DELIMITER $
CREATE TRIGGER trg_member_delete_update_count
AFTER DELETE ON Member
FOR EACH ROW
BEGIN
    -- æ›´æ–°ä¹é˜Ÿæˆå‘˜äººæ•°ï¼ˆåªç»Ÿè®¡åœ¨é˜Ÿæˆå‘˜ï¼‰
    UPDATE Band 
    SET member_count = (
        SELECT COUNT(*) 
        FROM Member 
        WHERE band_id = OLD.band_id AND leave_date IS NULL
    )
    WHERE band_id = OLD.band_id;
END$
DELIMITER ;

-- 1.3 æˆå‘˜æ›´æ–°æ—¶æ›´æ–°ç›¸å…³ä¹é˜Ÿæˆå‘˜äººæ•°
DROP TRIGGER IF EXISTS trg_member_update_band;
DELIMITER $
CREATE TRIGGER trg_member_update_band
AFTER UPDATE ON Member
FOR EACH ROW
BEGIN
    -- å¦‚æœæˆå‘˜æ›´æ¢äº†ä¹é˜Ÿæˆ–ç¦»é˜ŸçŠ¶æ€æ”¹å˜
    IF OLD.band_id != NEW.band_id OR 
       (OLD.leave_date IS NULL AND NEW.leave_date IS NOT NULL) OR
       (OLD.leave_date IS NOT NULL AND NEW.leave_date IS NULL) THEN
        
        -- æ›´æ–°æ—§ä¹é˜Ÿæˆå‘˜äººæ•°
        UPDATE Band 
        SET member_count = (
            SELECT COUNT(*) 
            FROM Member 
            WHERE band_id = OLD.band_id AND leave_date IS NULL
        )
        WHERE band_id = OLD.band_id;
        
        -- å¦‚æœæ¢äº†ä¹é˜Ÿï¼Œä¹Ÿæ›´æ–°æ–°ä¹é˜Ÿæˆå‘˜äººæ•°
        IF OLD.band_id != NEW.band_id THEN
            UPDATE Band 
            SET member_count = (
                SELECT COUNT(*) 
                FROM Member 
                WHERE band_id = NEW.band_id AND leave_date IS NULL
            )
            WHERE band_id = NEW.band_id;
        END IF;
    END IF;
END$
DELIMITER ;

-- ============================================
-- 2. ä¸“è¾‘æ’è¡Œæ¦œè¡¨å’Œè§¦å‘å™¨
-- ============================================

-- 2.1 åˆ›å»ºä¸“è¾‘æ’è¡Œæ¦œè¡¨
DROP TABLE IF EXISTS AlbumRanking;
CREATE TABLE AlbumRanking (
    ranking_id INT AUTO_INCREMENT PRIMARY KEY,
    album_id BIGINT NOT NULL,
    band_id BIGINT NOT NULL,
    album_title VARCHAR(200) NOT NULL,
    band_name VARCHAR(100) NOT NULL,
    avg_score DECIMAL(3,1) NOT NULL,
    review_count INT NOT NULL DEFAULT 0,
    release_date DATE NOT NULL,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    UNIQUE KEY uk_album (album_id),
    INDEX idx_avg_score (avg_score DESC),
    CONSTRAINT fk_ranking_album FOREIGN KEY (album_id) REFERENCES Album(album_id) 
        ON UPDATE CASCADE ON DELETE CASCADE,
    CONSTRAINT fk_ranking_band FOREIGN KEY (band_id) REFERENCES Band(band_id) 
        ON UPDATE CASCADE ON DELETE CASCADE
) ENGINE=InnoDB COMMENT='ä¸“è¾‘æ’è¡Œæ¦œï¼ˆå‰10åï¼‰';

-- æˆäºˆ fan_user å¯¹ AlbumRanking è¡¨çš„æŸ¥è¯¢æƒé™
GRANT SELECT ON band_management.AlbumRanking TO 'fan_user'@'localhost';

-- 2.2 åˆå§‹åŒ–æ’è¡Œæ¦œæ•°æ®
INSERT INTO AlbumRanking (album_id, band_id, album_title, band_name, avg_score, review_count, release_date)
SELECT 
    a.album_id,
    a.band_id,
    a.title,
    b.name,
    COALESCE(a.avg_score, 0),
    COUNT(ar.review_id),
    a.release_date
FROM Album a
JOIN Band b ON a.band_id = b.band_id
LEFT JOIN AlbumReview ar ON a.album_id = ar.album_id
GROUP BY a.album_id, a.band_id, a.title, b.name, a.avg_score, a.release_date
HAVING COALESCE(a.avg_score, 0) > 0
ORDER BY COALESCE(a.avg_score, 0) DESC, COUNT(ar.review_id) DESC
LIMIT 10;

-- 2.3 åˆ›å»ºæ›´æ–°æ’è¡Œæ¦œçš„å­˜å‚¨è¿‡ç¨‹
DROP PROCEDURE IF EXISTS sp_update_album_ranking;
DELIMITER $
CREATE PROCEDURE sp_update_album_ranking()
BEGIN
    -- æ¸…ç©ºæ’è¡Œæ¦œï¼ˆä½¿ç”¨DELETEè€Œä¸æ˜¯TRUNCATEï¼Œé¿å…è§¦å‘å™¨ä¸­çš„éšå¼æäº¤é—®é¢˜ï¼‰
    DELETE FROM AlbumRanking;
    
    -- é‡æ–°æ’å…¥å‰10å
    INSERT INTO AlbumRanking (album_id, band_id, album_title, band_name, avg_score, review_count, release_date)
    SELECT 
        a.album_id,
        a.band_id,
        a.title,
        b.name,
        COALESCE(a.avg_score, 0),
        COUNT(ar.review_id),
        a.release_date
    FROM Album a
    JOIN Band b ON a.band_id = b.band_id
    LEFT JOIN AlbumReview ar ON a.album_id = ar.album_id
    GROUP BY a.album_id, a.band_id, a.title, b.name, a.avg_score, a.release_date
    HAVING COALESCE(a.avg_score, 0) > 0
    ORDER BY COALESCE(a.avg_score, 0) DESC, COUNT(ar.review_id) DESC
    LIMIT 10;
END$
DELIMITER ;

-- 2.4 ä¹è¯„æ’å…¥æ—¶æ›´æ–°ä¸“è¾‘å¹³å‡åˆ†å’Œæ’è¡Œæ¦œ
DROP TRIGGER IF EXISTS trg_review_insert_update_album;
DELIMITER $
CREATE TRIGGER trg_review_insert_update_album
AFTER INSERT ON AlbumReview
FOR EACH ROW
BEGIN
    -- æ›´æ–°ä¸“è¾‘å¹³å‡åˆ†
    UPDATE Album 
    SET avg_score = (
        SELECT ROUND(AVG(rating), 1)
        FROM AlbumReview
        WHERE album_id = NEW.album_id
    )
    WHERE album_id = NEW.album_id;
    
    -- æ›´æ–°æ’è¡Œæ¦œ
    CALL sp_update_album_ranking();
END$
DELIMITER ;

-- 2.5 ä¹è¯„æ›´æ–°æ—¶æ›´æ–°ä¸“è¾‘å¹³å‡åˆ†å’Œæ’è¡Œæ¦œ
DROP TRIGGER IF EXISTS trg_review_update_album;
DELIMITER $
CREATE TRIGGER trg_review_update_album
AFTER UPDATE ON AlbumReview
FOR EACH ROW
BEGIN
    -- æ›´æ–°ä¸“è¾‘å¹³å‡åˆ†
    UPDATE Album 
    SET avg_score = (
        SELECT ROUND(AVG(rating), 1)
        FROM AlbumReview
        WHERE album_id = NEW.album_id
    )
    WHERE album_id = NEW.album_id;
    
    -- å¦‚æœè¯„è®ºæ¶‰åŠä¸åŒä¸“è¾‘ï¼Œä¹Ÿæ›´æ–°æ—§ä¸“è¾‘
    IF OLD.album_id != NEW.album_id THEN
        UPDATE Album 
        SET avg_score = (
            SELECT ROUND(AVG(rating), 1)
            FROM AlbumReview
            WHERE album_id = OLD.album_id
        )
        WHERE album_id = OLD.album_id;
    END IF;
    
    -- æ›´æ–°æ’è¡Œæ¦œ
    CALL sp_update_album_ranking();
END$
DELIMITER ;

-- 2.6 ä¹è¯„åˆ é™¤æ—¶æ›´æ–°ä¸“è¾‘å¹³å‡åˆ†å’Œæ’è¡Œæ¦œ
DROP TRIGGER IF EXISTS trg_review_delete_update_album;
DELIMITER $
CREATE TRIGGER trg_review_delete_update_album
AFTER DELETE ON AlbumReview
FOR EACH ROW
BEGIN
    -- æ›´æ–°ä¸“è¾‘å¹³å‡åˆ†
    UPDATE Album 
    SET avg_score = (
        SELECT ROUND(AVG(rating), 1)
        FROM AlbumReview
        WHERE album_id = OLD.album_id
    )
    WHERE album_id = OLD.album_id;
    
    -- æ›´æ–°æ’è¡Œæ¦œ
    CALL sp_update_album_ranking();
END$
DELIMITER ;

-- ============================================
-- 3. é¢å¤–çš„å®Œæ•´æ€§çº¦æŸè§¦å‘å™¨
-- ============================================

-- 3.1 ç¡®ä¿é˜Ÿé•¿æ˜¯è¯¥ä¹é˜Ÿçš„æˆå‘˜
DROP TRIGGER IF EXISTS trg_band_check_leader;
DELIMITER $
CREATE TRIGGER trg_band_check_leader
BEFORE UPDATE ON Band
FOR EACH ROW
BEGIN
    DECLARE leader_band_id BIGINT;
    
    -- å¦‚æœè®¾ç½®äº†é˜Ÿé•¿
    IF NEW.leader_member_id IS NOT NULL THEN
        -- æ£€æŸ¥é˜Ÿé•¿æ˜¯å¦å±äºè¯¥ä¹é˜Ÿ
        SELECT band_id INTO leader_band_id
        FROM Member
        WHERE member_id = NEW.leader_member_id;
        
        IF leader_band_id IS NULL OR leader_band_id != NEW.band_id THEN
            SIGNAL SQLSTATE '45000'
            SET MESSAGE_TEXT = 'é˜Ÿé•¿å¿…é¡»æ˜¯è¯¥ä¹é˜Ÿçš„æˆå‘˜';
        END IF;
    END IF;
END$
DELIMITER ;

-- 3.2 é˜²æ­¢æˆå‘˜åœ¨åŒä¸€æ—¶é—´åŠ å…¥å¤šä¸ªä¹é˜Ÿï¼ˆINSERTï¼‰
DROP TRIGGER IF EXISTS trg_member_check_person_overlap_insert;
DELIMITER $
CREATE TRIGGER trg_member_check_person_overlap_insert
BEFORE INSERT ON Member
FOR EACH ROW
BEGIN
    DECLARE overlap_count INT;
    
    SELECT COUNT(*) INTO overlap_count
    FROM Member
    WHERE person_id = NEW.person_id
      AND band_id != NEW.band_id
      AND (
          (NEW.join_date >= join_date AND (leave_date IS NULL OR NEW.join_date <= leave_date))
          OR
          (NEW.leave_date IS NOT NULL AND NEW.leave_date >= join_date AND (leave_date IS NULL OR NEW.leave_date <= leave_date))
          OR
          (join_date >= NEW.join_date AND (NEW.leave_date IS NULL OR join_date <= NEW.leave_date))
          OR
          (leave_date IS NOT NULL AND leave_date >= NEW.join_date AND (NEW.leave_date IS NULL OR leave_date <= NEW.leave_date))
      );
    
    IF overlap_count > 0 THEN
        SIGNAL SQLSTATE '45000'
        SET MESSAGE_TEXT = 'A person cannot join multiple bands at the same time';
    END IF;
END$
DELIMITER ;

-- 3.3 é˜²æ­¢æˆå‘˜åœ¨åŒä¸€æ—¶é—´åŠ å…¥å¤šä¸ªä¹é˜Ÿï¼ˆUPDATEï¼‰
DROP TRIGGER IF EXISTS trg_member_check_person_overlap_update;
DELIMITER $
CREATE TRIGGER trg_member_check_person_overlap_update
BEFORE UPDATE ON Member
FOR EACH ROW
BEGIN
    DECLARE overlap_count INT;
    
    IF NEW.person_id != OLD.person_id
       OR NEW.join_date != OLD.join_date
       OR (NEW.leave_date IS NULL AND OLD.leave_date IS NOT NULL)
       OR (NEW.leave_date IS NOT NULL AND OLD.leave_date IS NULL)
       OR (NEW.leave_date IS NOT NULL AND OLD.leave_date IS NOT NULL AND NEW.leave_date != OLD.leave_date)
       OR NEW.band_id != OLD.band_id THEN
        
        SELECT COUNT(*) INTO overlap_count
        FROM Member
        WHERE person_id = NEW.person_id
          AND band_id != NEW.band_id
          AND member_id != OLD.member_id
          AND (
              (NEW.join_date >= join_date AND (leave_date IS NULL OR NEW.join_date <= leave_date))
              OR
              (NEW.leave_date IS NOT NULL AND NEW.leave_date >= join_date AND (leave_date IS NULL OR NEW.leave_date <= leave_date))
              OR
              (join_date >= NEW.join_date AND (NEW.leave_date IS NULL OR join_date <= NEW.leave_date))
              OR
              (leave_date IS NOT NULL AND leave_date >= NEW.join_date AND (NEW.leave_date IS NULL OR leave_date <= NEW.leave_date))
          );
        
        IF overlap_count > 0 THEN
            SIGNAL SQLSTATE '45000'
            SET MESSAGE_TEXT = 'A person cannot join multiple bands at the same time';
        END IF;
    END IF;
END$
DELIMITER ;

-- ============================================
-- 4. æ—¥æœŸå®Œæ•´æ€§çº¦æŸè§¦å‘å™¨
-- ç¡®ä¿æˆå‘˜åŠ å…¥æ—¥æœŸã€ä¸“è¾‘å‘è¡Œæ—¥æœŸã€æ¼”å”±ä¼šæ—¥æœŸä¸æ—©äºä¹é˜Ÿæˆç«‹æ—¥æœŸ
-- ============================================

-- 4.1 æˆå‘˜åŠ å…¥æ—¥æœŸçº¦æŸï¼ˆINSERTï¼‰
DROP TRIGGER IF EXISTS trg_member_check_join_date_insert;
DELIMITER $
CREATE TRIGGER trg_member_check_join_date_insert
BEFORE INSERT ON Member
FOR EACH ROW
BEGIN
    DECLARE band_founded_date DATE;
    
    -- è·å–ä¹é˜Ÿæˆç«‹æ—¥æœŸ
    SELECT founded_at INTO band_founded_date
    FROM Band
    WHERE band_id = NEW.band_id;
    
    -- æ£€æŸ¥åŠ å…¥æ—¥æœŸæ˜¯å¦æ—©äºä¹é˜Ÿæˆç«‹æ—¥æœŸ
    IF band_founded_date IS NOT NULL AND NEW.join_date < band_founded_date THEN
        SIGNAL SQLSTATE '45000'
        SET MESSAGE_TEXT = 'æˆå‘˜åŠ å…¥æ—¥æœŸä¸èƒ½æ—©äºä¹é˜Ÿæˆç«‹æ—¥æœŸ';
    END IF;
END$
DELIMITER ;

-- 4.2 æˆå‘˜åŠ å…¥æ—¥æœŸçº¦æŸï¼ˆUPDATEï¼‰
DROP TRIGGER IF EXISTS trg_member_check_join_date_update;
DELIMITER $
CREATE TRIGGER trg_member_check_join_date_update
BEFORE UPDATE ON Member
FOR EACH ROW
BEGIN
    DECLARE band_founded_date DATE;
    
    -- è·å–ä¹é˜Ÿæˆç«‹æ—¥æœŸï¼ˆå¦‚æœæ›´æ¢äº†ä¹é˜Ÿï¼Œä½¿ç”¨æ–°ä¹é˜Ÿçš„æˆç«‹æ—¥æœŸï¼‰
    SELECT founded_at INTO band_founded_date
    FROM Band
    WHERE band_id = NEW.band_id;
    
    -- æ£€æŸ¥åŠ å…¥æ—¥æœŸæ˜¯å¦æ—©äºä¹é˜Ÿæˆç«‹æ—¥æœŸ
    IF band_founded_date IS NOT NULL AND NEW.join_date < band_founded_date THEN
        SIGNAL SQLSTATE '45000'
        SET MESSAGE_TEXT = 'æˆå‘˜åŠ å…¥æ—¥æœŸä¸èƒ½æ—©äºä¹é˜Ÿæˆç«‹æ—¥æœŸ';
    END IF;
END$
DELIMITER ;

-- 4.3 ä¸“è¾‘å‘è¡Œæ—¥æœŸçº¦æŸï¼ˆINSERTï¼‰
DROP TRIGGER IF EXISTS trg_album_check_release_date_insert;
DELIMITER $
CREATE TRIGGER trg_album_check_release_date_insert
BEFORE INSERT ON Album
FOR EACH ROW
BEGIN
    DECLARE band_founded_date DATE;
    
    -- è·å–ä¹é˜Ÿæˆç«‹æ—¥æœŸ
    SELECT founded_at INTO band_founded_date
    FROM Band
    WHERE band_id = NEW.band_id;
    
    -- æ£€æŸ¥å‘è¡Œæ—¥æœŸæ˜¯å¦æ—©äºä¹é˜Ÿæˆç«‹æ—¥æœŸ
    IF band_founded_date IS NOT NULL AND NEW.release_date < band_founded_date THEN
        SIGNAL SQLSTATE '45000'
        SET MESSAGE_TEXT = 'ä¸“è¾‘å‘è¡Œæ—¥æœŸä¸èƒ½æ—©äºä¹é˜Ÿæˆç«‹æ—¥æœŸ';
    END IF;
END$
DELIMITER ;

-- 4.4 ä¸“è¾‘å‘è¡Œæ—¥æœŸçº¦æŸï¼ˆUPDATEï¼‰
DROP TRIGGER IF EXISTS trg_album_check_release_date_update;
DELIMITER $
CREATE TRIGGER trg_album_check_release_date_update
BEFORE UPDATE ON Album
FOR EACH ROW
BEGIN
    DECLARE band_founded_date DATE;
    
    -- è·å–ä¹é˜Ÿæˆç«‹æ—¥æœŸï¼ˆå¦‚æœæ›´æ¢äº†ä¹é˜Ÿï¼Œä½¿ç”¨æ–°ä¹é˜Ÿçš„æˆç«‹æ—¥æœŸï¼‰
    SELECT founded_at INTO band_founded_date
    FROM Band
    WHERE band_id = NEW.band_id;
    
    -- æ£€æŸ¥å‘è¡Œæ—¥æœŸæ˜¯å¦æ—©äºä¹é˜Ÿæˆç«‹æ—¥æœŸ
    IF band_founded_date IS NOT NULL AND NEW.release_date < band_founded_date THEN
        SIGNAL SQLSTATE '45000'
        SET MESSAGE_TEXT = 'ä¸“è¾‘å‘è¡Œæ—¥æœŸä¸èƒ½æ—©äºä¹é˜Ÿæˆç«‹æ—¥æœŸ';
    END IF;
END$
DELIMITER ;

-- 4.5 æ¼”å”±ä¼šæ—¥æœŸçº¦æŸï¼ˆINSERTï¼‰
DROP TRIGGER IF EXISTS trg_concert_check_event_time_insert;
DELIMITER $
CREATE TRIGGER trg_concert_check_event_time_insert
BEFORE INSERT ON Concert
FOR EACH ROW
BEGIN
    DECLARE band_founded_date DATE;
    
    -- è·å–ä¹é˜Ÿæˆç«‹æ—¥æœŸ
    SELECT founded_at INTO band_founded_date
    FROM Band
    WHERE band_id = NEW.band_id;
    
    -- æ£€æŸ¥æ¼”å‡ºæ—¶é—´æ˜¯å¦æ—©äºä¹é˜Ÿæˆç«‹æ—¥æœŸ
    IF band_founded_date IS NOT NULL AND DATE(NEW.event_time) < band_founded_date THEN
        SIGNAL SQLSTATE '45000'
        SET MESSAGE_TEXT = 'æ¼”å”±ä¼šæ—¥æœŸä¸èƒ½æ—©äºä¹é˜Ÿæˆç«‹æ—¥æœŸ';
    END IF;
END$
DELIMITER ;

-- 4.6 æ¼”å”±ä¼šæ—¥æœŸçº¦æŸï¼ˆUPDATEï¼‰
DROP TRIGGER IF EXISTS trg_concert_check_event_time_update;
DELIMITER $
CREATE TRIGGER trg_concert_check_event_time_update
BEFORE UPDATE ON Concert
FOR EACH ROW
BEGIN
    DECLARE band_founded_date DATE;
    
    -- è·å–ä¹é˜Ÿæˆç«‹æ—¥æœŸï¼ˆå¦‚æœæ›´æ¢äº†ä¹é˜Ÿï¼Œä½¿ç”¨æ–°ä¹é˜Ÿçš„æˆç«‹æ—¥æœŸï¼‰
    SELECT founded_at INTO band_founded_date
    FROM Band
    WHERE band_id = NEW.band_id;
    
    -- æ£€æŸ¥æ¼”å‡ºæ—¶é—´æ˜¯å¦æ—©äºä¹é˜Ÿæˆç«‹æ—¥æœŸ
    IF band_founded_date IS NOT NULL AND DATE(NEW.event_time) < band_founded_date THEN
        SIGNAL SQLSTATE '45000'
        SET MESSAGE_TEXT = 'æ¼”å”±ä¼šæ—¥æœŸä¸èƒ½æ—©äºä¹é˜Ÿæˆç«‹æ—¥æœŸ';
    END IF;
END$
DELIMITER ;

-- ============================================
-- 5. éªŒè¯è§¦å‘å™¨ï¼ˆå¯é€‰æµ‹è¯•ï¼‰
-- ============================================
-- æ³¨æ„ï¼šä»¥ä¸‹æµ‹è¯•ä»£ç ä»…ç”¨äºéªŒè¯è§¦å‘å™¨åŠŸèƒ½ï¼Œä¸æ˜¯å¿…é¡»æ‰§è¡Œçš„
-- å¦‚æœåªæ˜¯åˆå§‹åŒ–æ•°æ®åº“ï¼Œå¯ä»¥è·³è¿‡æ­¤éƒ¨åˆ†

-- 5.1 éªŒè¯æˆå‘˜äººæ•°è§¦å‘å™¨
-- æµ‹è¯•è¯´æ˜ï¼šæ·»åŠ å’Œåˆ é™¤æˆå‘˜æ—¶ï¼Œä¹é˜Ÿçš„member_countåº”è¯¥è‡ªåŠ¨æ›´æ–°
/*
SELECT '=== æµ‹è¯•1: æˆå‘˜äººæ•°è§¦å‘å™¨ ===' AS test_name;

-- æŸ¥çœ‹é€ƒè·‘è®¡åˆ’å½“å‰æˆå‘˜æ•°
SELECT band_id, name, member_count FROM Band WHERE band_id = 1;

-- æ·»åŠ æµ‹è¯•æˆå‘˜ï¼ˆåœ¨é˜Ÿï¼‰
INSERT INTO Member (person_id, band_id, name, gender, birth_date, role, join_date, leave_date)
VALUES (9998, 1, 'æµ‹è¯•æˆå‘˜A', 'M', '1990-01-01', 'é”®ç›˜æ‰‹', '2024-01-01', NULL);

-- åº”è¯¥çœ‹åˆ°member_countå¢åŠ 1
SELECT 'æ·»åŠ åœ¨é˜Ÿæˆå‘˜å:' AS action, band_id, name, member_count FROM Band WHERE band_id = 1;

-- æ·»åŠ å·²ç¦»é˜Ÿæˆå‘˜
INSERT INTO Member (person_id, band_id, name, gender, birth_date, role, join_date, leave_date)
VALUES (9997, 1, 'æµ‹è¯•æˆå‘˜B', 'F', '1992-01-01', 'å’Œå£°', '2020-01-01', '2023-12-31');

-- member_countä¸åº”è¯¥å˜åŒ–ï¼ˆå› ä¸ºå·²ç¦»é˜Ÿï¼‰
SELECT 'æ·»åŠ ç¦»é˜Ÿæˆå‘˜å:' AS action, band_id, name, member_count FROM Band WHERE band_id = 1;

-- æ¸…ç†æµ‹è¯•æ•°æ®
DELETE FROM Member WHERE person_id IN (9998, 9997);
SELECT 'æ¸…ç†å®Œæˆ' AS status;
*/

-- 5.2 éªŒè¯ä¸“è¾‘æ’è¡Œæ¦œè§¦å‘å™¨
-- æµ‹è¯•è¯´æ˜ï¼šæ·»åŠ ã€ä¿®æ”¹ã€åˆ é™¤ä¹è¯„æ—¶ï¼Œä¸“è¾‘å¹³å‡åˆ†å’Œæ’è¡Œæ¦œåº”è¯¥è‡ªåŠ¨æ›´æ–°
/*
SELECT '=== æµ‹è¯•2: ä¸“è¾‘æ’è¡Œæ¦œè§¦å‘å™¨ ===' AS test_name;

-- æŸ¥çœ‹å½“å‰æ’è¡Œæ¦œå‰5å
SELECT 
    ROW_NUMBER() OVER (ORDER BY avg_score DESC, review_count DESC) AS ranking,
    album_title,
    band_name,
    avg_score,
    review_count
FROM AlbumRanking
ORDER BY avg_score DESC, review_count DESC
LIMIT 5;

-- æŸ¥çœ‹ã€Šä¸–ç•Œã€‹ä¸“è¾‘å½“å‰è¯„åˆ†
SELECT album_id, title, avg_score FROM Album WHERE album_id = 1;

-- æ·»åŠ ä¸€æ¡é«˜åˆ†ä¹è¯„
INSERT INTO AlbumReview (fan_id, album_id, rating, comment, reviewed_at)
VALUES (11, 1, 10.0, '[æµ‹è¯•] éå¸¸æ£’çš„ä¸“è¾‘ï¼', NOW());

-- åº”è¯¥çœ‹åˆ°å¹³å‡åˆ†æé«˜ï¼Œæ’è¡Œæ¦œæ›´æ–°
SELECT 'æ·»åŠ ä¹è¯„å:' AS action, album_id, title, avg_score FROM Album WHERE album_id = 1;

-- åˆ é™¤æµ‹è¯•ä¹è¯„
DELETE FROM AlbumReview WHERE comment = '[æµ‹è¯•] éå¸¸æ£’çš„ä¸“è¾‘ï¼';
SELECT 'æ¸…ç†å®Œæˆ' AS status;
*/

-- 5.3 éªŒè¯é˜Ÿé•¿çº¦æŸè§¦å‘å™¨
-- æµ‹è¯•è¯´æ˜ï¼šé˜Ÿé•¿å¿…é¡»æ˜¯æœ¬ä¹é˜Ÿçš„æˆå‘˜
/*
SELECT '=== æµ‹è¯•3: é˜Ÿé•¿çº¦æŸè§¦å‘å™¨ ===' AS test_name;

-- å°è¯•å°†å…¶ä»–ä¹é˜Ÿçš„æˆå‘˜è®¾ä¸ºé˜Ÿé•¿ï¼ˆåº”è¯¥å¤±è´¥ï¼‰
-- UPDATE Band SET leader_member_id = 10 WHERE band_id = 1;
-- é¢„æœŸé”™è¯¯: ERROR 1644 (45000): é˜Ÿé•¿å¿…é¡»æ˜¯è¯¥ä¹é˜Ÿçš„æˆå‘˜

SELECT 'å¦‚æœæ‰§è¡Œä¸Šé¢æ³¨é‡Šçš„UPDATEï¼Œä¼šæŠ¥é”™ï¼šé˜Ÿé•¿å¿…é¡»æ˜¯è¯¥ä¹é˜Ÿçš„æˆå‘˜' AS expected_error;
*/

-- 5.4 éªŒè¯æˆå‘˜æ—¶é—´é‡å çº¦æŸè§¦å‘å™¨
-- æµ‹è¯•è¯´æ˜ï¼šåŒä¸€ä¸ªäººä¸èƒ½åŒæ—¶åœ¨å¤šä¸ªä¹é˜Ÿ
/*
SELECT '=== æµ‹è¯•4: æˆå‘˜æ—¶é—´é‡å çº¦æŸè§¦å‘å™¨ ===' AS test_name;

-- åˆ›å»ºæµ‹è¯•æˆå‘˜ï¼ˆå·²ç¦»é˜Ÿï¼‰
INSERT INTO Member (person_id, band_id, name, gender, birth_date, role, join_date, leave_date)
VALUES (9999, 1, 'æµ‹è¯•æˆå‘˜C', 'M', '1990-01-01', 'å‰ä»–æ‰‹', '2020-01-01', '2023-12-31');

-- è®©åŒä¸€äººåŠ å…¥å¦ä¸€ä¸ªä¹é˜Ÿï¼ˆæ—¶é—´ä¸é‡å ï¼Œåº”è¯¥æˆåŠŸï¼‰
INSERT INTO Member (person_id, band_id, name, gender, birth_date, role, join_date, leave_date)
VALUES (9999, 2, 'æµ‹è¯•æˆå‘˜C', 'M', '1990-01-01', 'è´æ–¯æ‰‹', '2024-01-01', NULL);

SELECT 'æˆåŠŸï¼šåŒä¸€äººåœ¨ä¸åŒæ—¶é—´æ®µåŠ å…¥ä¸åŒä¹é˜Ÿ' AS result;

-- å°è¯•è®©åŒä¸€äººåœ¨é‡å æ—¶é—´åŠ å…¥ç¬¬ä¸‰ä¸ªä¹é˜Ÿï¼ˆåº”è¯¥å¤±è´¥ï¼‰
-- INSERT INTO Member (person_id, band_id, name, gender, birth_date, role, join_date, leave_date)
-- VALUES (9999, 3, 'æµ‹è¯•æˆå‘˜C', 'M', '1990-01-01', 'é¼“æ‰‹', '2024-06-01', NULL);
-- é¢„æœŸé”™è¯¯: ERROR 1644 (45000): A person cannot join multiple bands at the same time

SELECT 'å¦‚æœæ‰§è¡Œä¸Šé¢æ³¨é‡Šçš„INSERTï¼Œä¼šæŠ¥é”™ï¼šA person cannot join multiple bands at the same time' AS expected_error;

-- æ¸…ç†æµ‹è¯•æ•°æ®
DELETE FROM Member WHERE person_id = 9999;
SELECT 'æ¸…ç†å®Œæˆ' AS status;
*/

-- ============================================
-- 6. ä¿®æ­£ç°æœ‰æ•°æ®çš„æˆå‘˜äººæ•°
-- ============================================
SELECT '=== ä¿®æ­£ç°æœ‰æ•°æ®çš„æˆå‘˜äººæ•° ===' AS title;

-- æ›´æ–°æ‰€æœ‰ä¹é˜Ÿçš„æˆå‘˜äººæ•°ï¼ˆåªç»Ÿè®¡åœ¨é˜Ÿæˆå‘˜ï¼‰
UPDATE Band b
SET member_count = (
    SELECT COUNT(*) 
    FROM Member m 
    WHERE m.band_id = b.band_id AND m.leave_date IS NULL
);

SELECT 'âœ“ æ‰€æœ‰ä¹é˜Ÿçš„æˆå‘˜äººæ•°å·²é‡æ–°è®¡ç®—ï¼ˆåªç»Ÿè®¡åœ¨é˜Ÿæˆå‘˜ï¼‰' AS status;

-- éªŒè¯ç»“æœ
SELECT 
    b.band_id,
    b.name,
    b.member_count AS stored_count,
    (SELECT COUNT(*) FROM Member m WHERE m.band_id = b.band_id AND m.leave_date IS NULL) AS actual_count,
    CASE 
        WHEN b.member_count = (SELECT COUNT(*) FROM Member m WHERE m.band_id = b.band_id AND m.leave_date IS NULL)
        THEN 'âœ“ ä¸€è‡´'
        ELSE 'âœ— ä¸ä¸€è‡´'
    END AS status
FROM Band b
ORDER BY b.band_id;

SELECT '=== æ•°æ®åº“å®Œæ•´æ€§çº¦æŸé…ç½®å®Œæˆ ===' AS final_status;
SELECT 'âœ“ æˆå‘˜äººæ•°è‡ªåŠ¨ç»´æŠ¤è§¦å‘å™¨å·²åˆ›å»º' AS item
UNION ALL SELECT 'âœ“ ä¸“è¾‘æ’è¡Œæ¦œè‡ªåŠ¨æ›´æ–°è§¦å‘å™¨å·²åˆ›å»º'
UNION ALL SELECT 'âœ“ é˜Ÿé•¿çº¦æŸè§¦å‘å™¨å·²åˆ›å»º'
UNION ALL SELECT 'âœ“ æˆå‘˜æ—¶é—´é‡å çº¦æŸè§¦å‘å™¨å·²åˆ›å»º'
UNION ALL SELECT 'âœ“ æ—¥æœŸå®Œæ•´æ€§çº¦æŸè§¦å‘å™¨å·²åˆ›å»º'
UNION ALL SELECT 'âœ“ ç°æœ‰æ•°æ®å·²ä¿®æ­£';

-- ============================================
-- ä½¿ç”¨è¯´æ˜
-- ============================================
/*
è§¦å‘å™¨åŠŸèƒ½è¯´æ˜ï¼š

1. æˆå‘˜äººæ•°è‡ªåŠ¨ç»´æŠ¤
   - æ·»åŠ æˆå‘˜æ—¶ï¼šè‡ªåŠ¨æ›´æ–°ä¹é˜Ÿçš„member_countï¼ˆåªç»Ÿè®¡åœ¨é˜Ÿæˆå‘˜ï¼‰
   - åˆ é™¤æˆå‘˜æ—¶ï¼šè‡ªåŠ¨æ›´æ–°ä¹é˜Ÿçš„member_count
   - æ›´æ–°æˆå‘˜æ—¶ï¼šå¦‚æœæ”¹å˜ä¹é˜Ÿæˆ–ç¦»é˜ŸçŠ¶æ€ï¼Œè‡ªåŠ¨æ›´æ–°ç›¸å…³ä¹é˜Ÿçš„member_count

2. ä¸“è¾‘æ’è¡Œæ¦œè‡ªåŠ¨æ›´æ–°
   - æ·»åŠ ä¹è¯„æ—¶ï¼šè‡ªåŠ¨æ›´æ–°ä¸“è¾‘å¹³å‡åˆ†å’Œæ’è¡Œæ¦œ
   - ä¿®æ”¹ä¹è¯„æ—¶ï¼šè‡ªåŠ¨æ›´æ–°ä¸“è¾‘å¹³å‡åˆ†å’Œæ’è¡Œæ¦œ
   - åˆ é™¤ä¹è¯„æ—¶ï¼šè‡ªåŠ¨æ›´æ–°ä¸“è¾‘å¹³å‡åˆ†å’Œæ’è¡Œæ¦œ

3. é˜Ÿé•¿çº¦æŸ
   - è®¾ç½®é˜Ÿé•¿æ—¶ï¼šè‡ªåŠ¨æ£€æŸ¥é˜Ÿé•¿æ˜¯å¦æ˜¯æœ¬ä¹é˜Ÿæˆå‘˜
   - å¦‚æœä¸æ˜¯ï¼ŒæŠ›å‡ºé”™è¯¯ï¼šé˜Ÿé•¿å¿…é¡»æ˜¯è¯¥ä¹é˜Ÿçš„æˆå‘˜

4. æˆå‘˜æ—¶é—´é‡å çº¦æŸ
   - æ·»åŠ æˆå‘˜æ—¶ï¼šæ£€æŸ¥åŒä¸€äººæ˜¯å¦åœ¨åŒä¸€æ—¶é—´æ®µåŠ å…¥å¤šä¸ªä¹é˜Ÿ
   - æ›´æ–°æˆå‘˜æ—¶ï¼šæ£€æŸ¥ä¿®æ”¹åæ˜¯å¦å¯¼è‡´æ—¶é—´é‡å 
   - å¦‚æœé‡å ï¼ŒæŠ›å‡ºé”™è¯¯ï¼šA person cannot join multiple bands at the same time

5. æ—¥æœŸå®Œæ•´æ€§çº¦æŸ
   - æˆå‘˜åŠ å…¥æ—¥æœŸçº¦æŸï¼šæˆå‘˜çš„åŠ å…¥æ—¥æœŸï¼ˆjoin_dateï¼‰å¿…é¡» >= ä¹é˜Ÿæˆç«‹æ—¥æœŸï¼ˆfounded_atï¼‰
   - ä¸“è¾‘å‘è¡Œæ—¥æœŸçº¦æŸï¼šä¸“è¾‘çš„å‘è¡Œæ—¥æœŸï¼ˆrelease_dateï¼‰å¿…é¡» >= ä¹é˜Ÿæˆç«‹æ—¥æœŸï¼ˆfounded_atï¼‰
   - æ¼”å”±ä¼šæ—¥æœŸçº¦æŸï¼šæ¼”å”±ä¼šçš„æ¼”å‡ºæ—¶é—´ï¼ˆevent_timeçš„æ—¥æœŸéƒ¨åˆ†ï¼‰å¿…é¡» >= ä¹é˜Ÿæˆç«‹æ—¥æœŸï¼ˆfounded_atï¼‰
   - å¦‚æœè¿åçº¦æŸï¼Œåˆ†åˆ«æŠ›å‡ºå¯¹åº”é”™è¯¯ä¿¡æ¯

æµ‹è¯•æ–¹æ³•ï¼š
- å–æ¶ˆæ³¨é‡Šç¬¬5éƒ¨åˆ†çš„æµ‹è¯•ä»£ç ï¼Œé€ä¸ªæ‰§è¡Œæµ‹è¯•åœºæ™¯
- æ¯ä¸ªæµ‹è¯•åœºæ™¯éƒ½æœ‰è¯¦ç»†è¯´æ˜å’Œé¢„æœŸç»“æœ
*/
```

æµ‹è¯•ï¼š

```sql
-- ============================================
-- 4. éªŒè¯è§¦å‘å™¨ï¼ˆå¯é€‰æµ‹è¯•ï¼‰
-- ============================================
-- æ³¨æ„ï¼šä»¥ä¸‹æµ‹è¯•ä»£ç ä»…ç”¨äºéªŒè¯è§¦å‘å™¨åŠŸèƒ½ï¼Œä¸æ˜¯å¿…é¡»æ‰§è¡Œçš„
-- å¦‚æœåªæ˜¯åˆå§‹åŒ–æ•°æ®åº“ï¼Œå¯ä»¥è·³è¿‡æ­¤éƒ¨åˆ†

-- 4.1 éªŒè¯æˆå‘˜äººæ•°è§¦å‘å™¨
-- æµ‹è¯•è¯´æ˜ï¼šæ·»åŠ å’Œåˆ é™¤æˆå‘˜æ—¶ï¼Œä¹é˜Ÿçš„member_countåº”è¯¥è‡ªåŠ¨æ›´æ–°
SELECT '=== æµ‹è¯•1: æˆå‘˜äººæ•°è§¦å‘å™¨ ===' AS test_name;

-- æŸ¥çœ‹é€ƒè·‘è®¡åˆ’å½“å‰æˆå‘˜æ•°
SELECT band_id, name, member_count FROM Band WHERE band_id = 1;

-- æ·»åŠ æµ‹è¯•æˆå‘˜ï¼ˆåœ¨é˜Ÿï¼‰
INSERT INTO Member (person_id, band_id, name, gender, birth_date, role, join_date, leave_date)
VALUES (9998, 1, 'æµ‹è¯•æˆå‘˜A', 'M', '1990-01-01', 'é”®ç›˜æ‰‹', '2024-01-01', NULL);

-- åº”è¯¥çœ‹åˆ°member_countå¢åŠ 1
SELECT 'æ·»åŠ åœ¨é˜Ÿæˆå‘˜å:' AS action, band_id, name, member_count FROM Band WHERE band_id = 1;

-- æ·»åŠ å·²ç¦»é˜Ÿæˆå‘˜
INSERT INTO Member (person_id, band_id, name, gender, birth_date, role, join_date, leave_date)
VALUES (9997, 1, 'æµ‹è¯•æˆå‘˜B', 'F', '1992-01-01', 'å’Œå£°', '2020-01-01', '2023-12-31');

-- member_countä¸åº”è¯¥å˜åŒ–ï¼ˆå› ä¸ºå·²ç¦»é˜Ÿï¼‰
SELECT 'æ·»åŠ ç¦»é˜Ÿæˆå‘˜å:' AS action, band_id, name, member_count FROM Band WHERE band_id = 1;

-- æ¸…ç†æµ‹è¯•æ•°æ®
DELETE FROM Member WHERE person_id IN (9998, 9997);
SELECT 'æ¸…ç†å®Œæˆ' AS status;

-- 4.2 éªŒè¯ä¸“è¾‘æ’è¡Œæ¦œè§¦å‘å™¨
-- æµ‹è¯•è¯´æ˜ï¼šæ·»åŠ ã€ä¿®æ”¹ã€åˆ é™¤ä¹è¯„æ—¶ï¼Œä¸“è¾‘å¹³å‡åˆ†å’Œæ’è¡Œæ¦œåº”è¯¥è‡ªåŠ¨æ›´æ–°
SELECT '=== æµ‹è¯•2: ä¸“è¾‘æ’è¡Œæ¦œè§¦å‘å™¨ ===' AS test_name;

-- æŸ¥çœ‹å½“å‰æ’è¡Œæ¦œå‰5å
SELECT 
    ROW_NUMBER() OVER (ORDER BY avg_score DESC, review_count DESC) AS ranking,
    album_title,
    band_name,
    avg_score,
    review_count
FROM AlbumRanking
ORDER BY avg_score DESC, review_count DESC
LIMIT 5;

-- æŸ¥çœ‹ã€Šä¸–ç•Œã€‹ä¸“è¾‘å½“å‰è¯„åˆ†
SELECT album_id, title, avg_score FROM Album WHERE album_id = 1;

-- æ·»åŠ ä¸€æ¡é«˜åˆ†ä¹è¯„
INSERT INTO AlbumReview (fan_id, album_id, rating, comment, reviewed_at)
VALUES (11, 1, 10.0, '[æµ‹è¯•] éå¸¸æ£’çš„ä¸“è¾‘ï¼', NOW());

-- åº”è¯¥çœ‹åˆ°å¹³å‡åˆ†æé«˜ï¼Œæ’è¡Œæ¦œæ›´æ–°
SELECT 'æ·»åŠ ä¹è¯„å:' AS action, album_id, title, avg_score FROM Album WHERE album_id = 1;

-- åˆ é™¤æµ‹è¯•ä¹è¯„
DELETE FROM AlbumReview WHERE comment = '[æµ‹è¯•] éå¸¸æ£’çš„ä¸“è¾‘ï¼';
SELECT 'æ¸…ç†å®Œæˆ' AS status;

-- 4.3 éªŒè¯é˜Ÿé•¿çº¦æŸè§¦å‘å™¨
-- æµ‹è¯•è¯´æ˜ï¼šé˜Ÿé•¿å¿…é¡»æ˜¯æœ¬ä¹é˜Ÿçš„æˆå‘˜
SELECT '=== æµ‹è¯•3: é˜Ÿé•¿çº¦æŸè§¦å‘å™¨ ===' AS test_name;

-- å°è¯•å°†å…¶ä»–ä¹é˜Ÿçš„æˆå‘˜è®¾ä¸ºé˜Ÿé•¿ï¼ˆåº”è¯¥å¤±è´¥ï¼‰
-- UPDATE Band SET leader_member_id = 10 WHERE band_id = 1;
-- é¢„æœŸé”™è¯¯: ERROR 1644 (45000): é˜Ÿé•¿å¿…é¡»æ˜¯è¯¥ä¹é˜Ÿçš„æˆå‘˜

SELECT 'å¦‚æœæ‰§è¡Œä¸Šé¢æ³¨é‡Šçš„UPDATEï¼Œä¼šæŠ¥é”™ï¼šé˜Ÿé•¿å¿…é¡»æ˜¯è¯¥ä¹é˜Ÿçš„æˆå‘˜' AS expected_error;


-- 4.4 éªŒè¯æˆå‘˜æ—¶é—´é‡å çº¦æŸè§¦å‘å™¨
-- æµ‹è¯•è¯´æ˜ï¼šåŒä¸€ä¸ªäººä¸èƒ½åŒæ—¶åœ¨å¤šä¸ªä¹é˜Ÿ
SELECT '=== æµ‹è¯•4: æˆå‘˜æ—¶é—´é‡å çº¦æŸè§¦å‘å™¨ ===' AS test_name;

-- åˆ›å»ºæµ‹è¯•æˆå‘˜ï¼ˆå·²ç¦»é˜Ÿï¼‰
INSERT INTO Member (person_id, band_id, name, gender, birth_date, role, join_date, leave_date)
VALUES (9999, 1, 'æµ‹è¯•æˆå‘˜C', 'M', '1990-01-01', 'å‰ä»–æ‰‹', '2020-01-01', '2023-12-31');

-- è®©åŒä¸€äººåŠ å…¥å¦ä¸€ä¸ªä¹é˜Ÿï¼ˆæ—¶é—´ä¸é‡å ï¼Œåº”è¯¥æˆåŠŸï¼‰
INSERT INTO Member (person_id, band_id, name, gender, birth_date, role, join_date, leave_date)
VALUES (9999, 2, 'æµ‹è¯•æˆå‘˜C', 'M', '1990-01-01', 'è´æ–¯æ‰‹', '2024-01-01', NULL);

SELECT 'æˆåŠŸï¼šåŒä¸€äººåœ¨ä¸åŒæ—¶é—´æ®µåŠ å…¥ä¸åŒä¹é˜Ÿ' AS result;

-- å°è¯•è®©åŒä¸€äººåœ¨é‡å æ—¶é—´åŠ å…¥ç¬¬ä¸‰ä¸ªä¹é˜Ÿï¼ˆåº”è¯¥å¤±è´¥ï¼‰
-- INSERT INTO Member (person_id, band_id, name, gender, birth_date, role, join_date, leave_date)
-- VALUES (9999, 3, 'æµ‹è¯•æˆå‘˜C', 'M', '1990-01-01', 'é¼“æ‰‹', '2024-06-01', NULL);
-- é¢„æœŸé”™è¯¯: ERROR 1644 (45000): A person cannot join multiple bands at the same time

SELECT 'å¦‚æœæ‰§è¡Œä¸Šé¢æ³¨é‡Šçš„INSERTï¼Œä¼šæŠ¥é”™ï¼šA person cannot join multiple bands at the same time' AS expected_error;

-- æ¸…ç†æµ‹è¯•æ•°æ®
DELETE FROM Member WHERE person_id = 9999;
SELECT 'æ¸…ç†å®Œæˆ' AS status;
```

#### 7ã€æ•°æ®åº“å®‰å…¨æ€§å®æ–½

`database_security.sql`

##### åˆ›å»ºç”¨æˆ·

1ã€ç®¡ç†å‘˜ç”¨æˆ· (admin_user)

* å¯†ç ï¼šAdmin@123456
* æƒé™èŒƒå›´ï¼š
  * âœ… æ‹¥æœ‰æ•°æ®åº“çš„æ‰€æœ‰æƒé™ (ALL PRIVILEGES)
  * âœ… å¯ä»¥åˆ›å»ºã€ä¿®æ”¹ã€åˆ é™¤ä»»ä½•è¡¨å’Œæ•°æ®
  * âœ… å¯ä»¥ç®¡ç†ç”¨æˆ·å’Œæƒé™ (WITH GRANT OPTION)
  * âœ… å¯ä»¥æˆäºˆå…¶ä»–ç”¨æˆ·æƒé™
  * âœ… å®Œå…¨æ§åˆ¶æ•´ä¸ª band_management æ•°æ®åº“

* é€‚ç”¨åœºæ™¯ï¼šç³»ç»Ÿç®¡ç†ã€æ•°æ®åº“ç»´æŠ¤ã€ç”¨æˆ·ç®¡ç†

2ã€ä¹é˜Ÿç”¨æˆ· (band_user)

* å¯†ç ï¼šBand@123456

* å¯ä»¥ç»´æŠ¤ï¼ˆSELECT, INSERT, UPDATE, DELETEï¼‰ï¼š
  * âœ… Band - ä¹é˜Ÿä¿¡æ¯
  * âœ… Member - æˆå‘˜ä¿¡æ¯
  * âœ… Album - ä¸“è¾‘ä¿¡æ¯
  * âœ… Song - æ­Œæ›²ä¿¡æ¯
  * âœ… Concert - æ¼”å”±ä¼šä¿¡æ¯
  * âœ… Performance - æ¼”å”±å…³ç³»ï¼ˆåŸåˆ›/ç¿»å”±ï¼‰

* åªèƒ½æŸ¥çœ‹ï¼ˆSELECTï¼‰ï¼š
  * ğŸ‘ï¸ Fan - æ­Œè¿·ä¿¡æ¯
  * ğŸ‘ï¸ AlbumReview - ä¹è¯„ä¿¡æ¯
  * ğŸ‘ï¸ ConcertAttendance - æ¼”å”±ä¼šå‚åŠ è®°å½•
  * ğŸ‘ï¸ FanFavoriteBand - æ­Œè¿·å–œæ¬¢çš„ä¹é˜Ÿ
  * ğŸ‘ï¸ FanFavoriteAlbum - æ­Œè¿·å–œæ¬¢çš„ä¸“è¾‘
  * ğŸ‘ï¸ FanFavoriteSong - æ­Œè¿·å–œæ¬¢çš„æ­Œæ›²
  * ğŸ‘ï¸ User - ç”¨æˆ·è¡¨ï¼ˆç”¨äºç™»å½•éªŒè¯ï¼‰

* å¯ä»¥é€šè¿‡è§†å›¾æŸ¥çœ‹æœ¬ä¹é˜Ÿçš„ç»Ÿè®¡ä¿¡æ¯ï¼š
  * ğŸ“Š v_band_fans - è¯¥ä¹é˜Ÿçš„æ­Œè¿·åˆ—è¡¨
  * ğŸ“Š v_band_reviews - è¯¥ä¹é˜Ÿçš„ä¹è¯„åˆ—è¡¨
  * ğŸ“Š v_band_fan_count - æ­Œè¿·æ€»æ•°ç»Ÿè®¡
  * ğŸ“Š v_band_fan_age_stats - æ­Œè¿·å¹´é¾„æ®µåˆ†å¸ƒ
  * ğŸ“Š v_band_fan_gender_stats - æ­Œè¿·æ€§åˆ«åˆ†å¸ƒ
  * ğŸ“Š v_band_fan_occupation_stats - æ­Œè¿·èŒä¸šåˆ†å¸ƒ
  * ğŸ“Š v_band_fan_education_stats - æ­Œè¿·å­¦å†åˆ†å¸ƒ
  * ğŸ“Š v_band_popular_songs - æœ€å—æ¬¢è¿çš„æ­Œæ›²ï¼ˆå‰10ï¼‰
  * ğŸ“Š v_band_popular_concerts - æ¼”å”±ä¼šå‚ä¸æƒ…å†µ
  * ğŸ“Š v_band_album_ratings - ä¸“è¾‘è¯„åˆ†ç»Ÿè®¡

* æƒé™é™åˆ¶ï¼š
  * âŒ ä¸èƒ½ä¿®æ”¹æ­Œè¿·æ•°æ®ï¼ˆFanè¡¨åªè¯»ï¼‰
  * âŒ ä¸èƒ½ä¿®æ”¹æˆ–åˆ é™¤ä¹è¯„æ•°æ®ï¼ˆAlbumReviewè¡¨åªè¯»ï¼‰
  * âŒ ä¸èƒ½ä¿®æ”¹æ­Œè¿·å–œå¥½æ•°æ®ï¼ˆFanFavorite*è¡¨åªè¯»ï¼‰
  * âŒ ä¸èƒ½ä¿®æ”¹æ¼”å”±ä¼šå‚åŠ è®°å½•ï¼ˆConcertAttendanceè¡¨åªè¯»ï¼‰

* é€‚ç”¨åœºæ™¯ï¼šä¹é˜Ÿç®¡ç†è‡ªå·±çš„ä¿¡æ¯ã€æŸ¥çœ‹æ­Œè¿·åé¦ˆå’Œç»Ÿè®¡æ•°æ®

3ã€æ­Œè¿·ç”¨æˆ· (fan_user)

* å¯†ç ï¼šFan@123456
* å¯ä»¥ç»´æŠ¤ï¼ˆSELECT, INSERT, UPDATE, DELETEï¼‰ï¼š
  * âœ… Fan - æ­Œè¿·ä¸ªäººä¿¡æ¯
  * âœ… FanFavoriteBand - å–œæ¬¢çš„ä¹é˜Ÿ
  * âœ… FanFavoriteAlbum - å–œæ¬¢çš„ä¸“è¾‘
  * âœ… FanFavoriteSong - å–œæ¬¢çš„æ­Œæ›²
  * âœ… ConcertAttendance - æ¼”å”±ä¼šå‚åŠ è®°å½•
  * âœ… AlbumReview - ä¸“è¾‘ä¹è¯„ï¼ˆå‘è¡¨ã€ä¿®æ”¹ã€åˆ é™¤ï¼‰

* åªèƒ½æŸ¥çœ‹ï¼ˆSELECTï¼‰ï¼š
  * ğŸ‘ï¸ Band - ä¹é˜Ÿä¿¡æ¯
  * ğŸ‘ï¸ Member - æˆå‘˜ä¿¡æ¯
  * ğŸ‘ï¸ Album - ä¸“è¾‘ä¿¡æ¯
  * ğŸ‘ï¸ Song - æ­Œæ›²ä¿¡æ¯
  * ğŸ‘ï¸ Concert - æ¼”å”±ä¼šä¿¡æ¯
  * ğŸ‘ï¸ Performance - æ¼”å”±å…³ç³»
  * ğŸ‘ï¸ AlbumRanking - ä¸“è¾‘æ’è¡Œæ¦œ
  * ğŸ‘ï¸ User - ç”¨æˆ·è¡¨ï¼ˆç”¨äºç™»å½•éªŒè¯ï¼‰

* æƒé™é™åˆ¶ï¼š
  * âŒ ä¸èƒ½ä¿®æ”¹ä¹é˜Ÿç›¸å…³çš„ä»»ä½•æ•°æ®ï¼ˆBandã€Memberã€Albumã€Songã€Concertã€Performanceè¡¨åªè¯»ï¼‰
  * âŒ ä¸èƒ½æŸ¥çœ‹æˆ–ä¿®æ”¹å…¶ä»–æ­Œè¿·çš„ä¸ªäººä¿¡æ¯ï¼ˆåº”ç”¨å±‚éœ€è¦é¢å¤–æ§åˆ¶ï¼‰

* é€‚ç”¨åœºæ™¯ï¼šæ­Œè¿·æµè§ˆä¹é˜Ÿä¿¡æ¯ã€ç®¡ç†ä¸ªäººå–œå¥½ã€å‘è¡¨ä¹è¯„ã€è®°å½•æ¼”å”±ä¼šå‚ä¸

##### è§†å›¾æœºåˆ¶

åˆ©ç”¨è§†å›¾æœºåˆ¶ï¼Œä½¿æŸä¸ªä¹é˜Ÿç”¨æˆ·Band1åªèƒ½æŸ¥çœ‹è‡ªå·±çš„æ­Œè¿·ä¿¡æ¯ã€ä¹è¯„ä¿¡æ¯ï¼Œå¹¶åˆ©ç”¨è§†å›¾å®ç°ç®€å•çš„æ­Œè¿·äººæ•°ç»Ÿè®¡ã€å¹´é¾„ã€æ€§åˆ«ã€èŒä¸šã€å­¦å†èŒƒå›´ç»Ÿè®¡ï¼Œæœ€å–œæ¬¢çš„æ­Œæ›²ã€æ¼”å”±ä¼šç»Ÿè®¡ç­‰ã€‚

è§†å›¾ï¼ˆ10ä¸ªï¼‰

- æ­Œè¿·åˆ—è¡¨ã€ä¹è¯„åˆ—è¡¨
- æ­Œè¿·ç»Ÿè®¡ï¼ˆæ€»æ•°ã€å¹´é¾„ã€æ€§åˆ«ã€èŒä¸šã€å­¦å†ï¼‰
- å†…å®¹æ’è¡Œï¼ˆæ­Œæ›²ã€æ¼”å”±ä¼šã€ä¸“è¾‘è¯„åˆ†ï¼‰

##### éªŒè¯ç”¨æˆ·æƒé™

åˆ†åˆ«ä½¿ç”¨ä»¥ä¸Šä¸åŒç”¨æˆ·ç™»å½•æ•°æ®åº“ï¼Œè¿›è¡Œç›¸åº”çš„æ“ä½œï¼ŒéªŒè¯ä»¥ä¸Šæªæ–½çš„æœ‰æ•ˆæ€§ã€‚

`user_verification_tests.sql`

```sql
-- ============================================
-- ç”¨æˆ·æƒé™éªŒè¯æµ‹è¯•è„šæœ¬
-- æµ‹è¯• admin_userã€band_userã€fan_user çš„æƒé™è®¾ç½®
-- ============================================

-- ä½¿ç”¨è¯´æ˜ï¼š
-- 1. ç¡®ä¿å·²æ‰§è¡Œ database_implementation.sql
-- 2. ç¡®ä¿å·²æ‰§è¡Œ database_security.sql
-- 3. æœ¬è„šæœ¬éœ€è¦ä»¥ root ç”¨æˆ·èº«ä»½æ‰§è¡Œ
-- 4. æµ‹è¯•è¿‡ç¨‹ä¸­ä¼šåˆ›å»ºå’Œåˆ é™¤æµ‹è¯•æ•°æ®

USE band_management;

-- ============================================
-- æµ‹è¯•å‡†å¤‡ï¼šåˆ›å»ºæµ‹è¯•æ•°æ®
-- ============================================

SELECT '========================================' AS '';
SELECT 'å¼€å§‹ç”¨æˆ·æƒé™éªŒè¯æµ‹è¯•' AS '';
SELECT '========================================' AS '';

-- ============================================
-- ç¬¬ä¸€éƒ¨åˆ†ï¼šç®¡ç†å‘˜ç”¨æˆ· (admin_user) æƒé™æµ‹è¯•
-- ============================================

SELECT '' AS '';
SELECT '========================================' AS '';
SELECT 'æµ‹è¯• 1: ç®¡ç†å‘˜ç”¨æˆ· (admin_user) æƒé™' AS '';
SELECT '========================================' AS '';

-- æµ‹è¯• 1.1: ç®¡ç†å‘˜å¯ä»¥æŸ¥è¯¢æ‰€æœ‰è¡¨
SELECT '--- æµ‹è¯• 1.1: ç®¡ç†å‘˜æŸ¥è¯¢æƒé™ ---' AS '';

-- åˆ‡æ¢åˆ° admin_userï¼ˆæ³¨æ„ï¼šéœ€è¦åœ¨æ–°è¿æ¥ä¸­æ‰§è¡Œï¼‰
-- è¿™é‡Œä½¿ç”¨æ³¨é‡Šè¯´æ˜ï¼Œå®é™…æµ‹è¯•éœ€è¦æ–°å»ºè¿æ¥
mysql -u admin_user -pAdmin@123456 band_management -e "
SELECT 'âœ“ ç®¡ç†å‘˜å¯ä»¥æŸ¥è¯¢ Band è¡¨' AS result, COUNT(*) AS count FROM Band;
SELECT 'âœ“ ç®¡ç†å‘˜å¯ä»¥æŸ¥è¯¢ Member è¡¨' AS result, COUNT(*) AS count FROM Member;
SELECT 'âœ“ ç®¡ç†å‘˜å¯ä»¥æŸ¥è¯¢ Fan è¡¨' AS result, COUNT(*) AS count FROM Fan;
SELECT 'âœ“ ç®¡ç†å‘˜å¯ä»¥æŸ¥è¯¢ Album è¡¨' AS result, COUNT(*) AS count FROM Album;"

-- æµ‹è¯• 1.2: ç®¡ç†å‘˜å¯ä»¥æ’å…¥æ•°æ®
SELECT '--- æµ‹è¯• 1.2: ç®¡ç†å‘˜æ’å…¥æƒé™ ---' AS '';
mysql -u admin_user -pAdmin@123456 band_management -e "
INSERT INTO Band (name, founded_at, intro, member_count) 
VALUES ('æµ‹è¯•ä¹é˜Ÿ_admin', '2024-01-01', 'ç®¡ç†å‘˜æµ‹è¯•æ’å…¥', 0);
SELECT 'âœ“ ç®¡ç†å‘˜å¯ä»¥æ’å…¥æ•°æ®' AS result;"

-- æµ‹è¯• 1.3: ç®¡ç†å‘˜å¯ä»¥æ›´æ–°æ•°æ®
SELECT '--- æµ‹è¯• 1.3: ç®¡ç†å‘˜æ›´æ–°æƒé™ ---' AS '';
mysql -u admin_user -pAdmin@123456 band_management -e "
UPDATE Band SET intro = 'ç®¡ç†å‘˜æµ‹è¯•æ›´æ–°' WHERE name = 'æµ‹è¯•ä¹é˜Ÿ_admin';
SELECT 'âœ“ ç®¡ç†å‘˜å¯ä»¥æ›´æ–°æ•°æ®' AS result;"

-- æµ‹è¯• 1.4: ç®¡ç†å‘˜å¯ä»¥åˆ é™¤æ•°æ®
SELECT '--- æµ‹è¯• 1.4: ç®¡ç†å‘˜åˆ é™¤æƒé™ ---' AS '';
mysql -u admin_user -pAdmin@123456 band_management -e "
DELETE FROM Band WHERE name = 'æµ‹è¯•ä¹é˜Ÿ_admin';
SELECT 'âœ“ ç®¡ç†å‘˜å¯ä»¥åˆ é™¤æ•°æ®' AS result;"

-- æµ‹è¯• 1.5: ç®¡ç†å‘˜å¯ä»¥åˆ›å»ºå’Œåˆ é™¤è¡¨
SELECT '--- æµ‹è¯• 1.5: ç®¡ç†å‘˜ DDL æƒé™ ---' AS '';
mysql -u admin_user -pAdmin@123456 band_management -e "
CREATE TABLE test_admin_table (id INT PRIMARY KEY, name VARCHAR(50));
SELECT 'âœ“ ç®¡ç†å‘˜å¯ä»¥åˆ›å»ºè¡¨' AS result;
DROP TABLE test_admin_table;
SELECT 'âœ“ ç®¡ç†å‘˜å¯ä»¥åˆ é™¤è¡¨' AS result;"

SELECT 'âœ“ ç®¡ç†å‘˜ç”¨æˆ·æƒé™æµ‹è¯•å®Œæˆ' AS '';

-- ============================================
-- ç¬¬äºŒéƒ¨åˆ†ï¼šä¹é˜Ÿç”¨æˆ· (band_user) æƒé™æµ‹è¯•
-- ============================================

SELECT '' AS '';
SELECT '========================================' AS '';
SELECT 'æµ‹è¯• 2: ä¹é˜Ÿç”¨æˆ· (band_user) æƒé™' AS '';
SELECT '========================================' AS '';

-- æµ‹è¯• 2.1: ä¹é˜Ÿç”¨æˆ·å¯ä»¥æŸ¥è¯¢å’Œä¿®æ”¹ä¹é˜Ÿç›¸å…³è¡¨
SELECT '--- æµ‹è¯• 2.1: ä¹é˜Ÿç”¨æˆ·å¯¹ä¹é˜Ÿè¡¨çš„å®Œæ•´æƒé™ ---' AS '';
mysql -u band_user -pBand@123456 band_management -e "
-- æŸ¥è¯¢
SELECT 'âœ“ ä¹é˜Ÿç”¨æˆ·å¯ä»¥æŸ¥è¯¢ Band è¡¨' AS result, COUNT(*) AS count FROM Band;

-- æ’å…¥
INSERT INTO Band (name, founded_at, intro, member_count) 
VALUES ('æµ‹è¯•ä¹é˜Ÿ_band', '2024-01-01', 'ä¹é˜Ÿç”¨æˆ·æµ‹è¯•', 0);
SELECT 'âœ“ ä¹é˜Ÿç”¨æˆ·å¯ä»¥æ’å…¥ Band æ•°æ®' AS result;

-- æ›´æ–°
UPDATE Band SET intro = 'ä¹é˜Ÿç”¨æˆ·æµ‹è¯•æ›´æ–°' WHERE name = 'æµ‹è¯•ä¹é˜Ÿ_band';
SELECT 'âœ“ ä¹é˜Ÿç”¨æˆ·å¯ä»¥æ›´æ–° Band æ•°æ®' AS result;

-- åˆ é™¤
DELETE FROM Band WHERE name = 'æµ‹è¯•ä¹é˜Ÿ_band';
SELECT 'âœ“ ä¹é˜Ÿç”¨æˆ·å¯ä»¥åˆ é™¤ Band æ•°æ®' AS result;"

-- æµ‹è¯• 2.2: ä¹é˜Ÿç”¨æˆ·å¯ä»¥ç®¡ç†æˆå‘˜
SELECT '--- æµ‹è¯• 2.2: ä¹é˜Ÿç”¨æˆ·å¯¹æˆå‘˜è¡¨çš„å®Œæ•´æƒé™ ---' AS '';
mysql -u band_user -pBand@123456 band_management -e "
SELECT 'âœ“ ä¹é˜Ÿç”¨æˆ·å¯ä»¥æŸ¥è¯¢ Member è¡¨' AS result, COUNT(*) AS count FROM Member;
SELECT 'âœ“ ä¹é˜Ÿç”¨æˆ·å¯ä»¥æ’å…¥/æ›´æ–°/åˆ é™¤ Member æ•°æ®' AS result;"

-- æµ‹è¯• 2.3: ä¹é˜Ÿç”¨æˆ·å¯ä»¥ç®¡ç†ä¸“è¾‘å’Œæ­Œæ›²
SELECT '--- æµ‹è¯• 2.3: ä¹é˜Ÿç”¨æˆ·å¯¹ä¸“è¾‘å’Œæ­Œæ›²è¡¨çš„å®Œæ•´æƒé™ ---' AS '';
mysql -u band_user -pBand@123456 band_management -e "
SELECT 'âœ“ ä¹é˜Ÿç”¨æˆ·å¯ä»¥æŸ¥è¯¢ Album è¡¨' AS result, COUNT(*) AS count FROM Album;
SELECT 'âœ“ ä¹é˜Ÿç”¨æˆ·å¯ä»¥æŸ¥è¯¢ Song è¡¨' AS result, COUNT(*) AS count FROM Song;
SELECT 'âœ“ ä¹é˜Ÿç”¨æˆ·å¯ä»¥ç®¡ç†ä¸“è¾‘å’Œæ­Œæ›²' AS result;"

-- æµ‹è¯• 2.4: ä¹é˜Ÿç”¨æˆ·å¯ä»¥ç®¡ç†æ¼”å”±ä¼š
SELECT '--- æµ‹è¯• 2.4: ä¹é˜Ÿç”¨æˆ·å¯¹æ¼”å”±ä¼šè¡¨çš„å®Œæ•´æƒé™ ---' AS '';
mysql -u band_user -pBand@123456 band_management -e "
SELECT 'âœ“ ä¹é˜Ÿç”¨æˆ·å¯ä»¥æŸ¥è¯¢ Concert è¡¨' AS result, COUNT(*) AS count FROM Concert;
SELECT 'âœ“ ä¹é˜Ÿç”¨æˆ·å¯ä»¥ç®¡ç†æ¼”å”±ä¼š' AS result;"

-- æµ‹è¯• 2.5: ä¹é˜Ÿç”¨æˆ·åªèƒ½æŸ¥çœ‹æ­Œè¿·æ•°æ®ï¼ˆä¸èƒ½ä¿®æ”¹ï¼‰
SELECT '--- æµ‹è¯• 2.5: ä¹é˜Ÿç”¨æˆ·å¯¹æ­Œè¿·è¡¨åªæœ‰æŸ¥è¯¢æƒé™ ---' AS '';
mysql -u band_user -pBand@123456 band_management -e "
-- æŸ¥è¯¢åº”è¯¥æˆåŠŸ
SELECT 'âœ“ ä¹é˜Ÿç”¨æˆ·å¯ä»¥æŸ¥è¯¢ Fan è¡¨' AS result, COUNT(*) AS count FROM Fan;"

-- æ’å…¥åº”è¯¥å¤±è´¥
mysql -u band_user -pBand@123456 band_management -e "
INSERT INTO Fan (name, gender, age, occupation, education) 
VALUES ('æµ‹è¯•æ­Œè¿·', 'M', 25, 'æµ‹è¯•', 'æœ¬ç§‘');
" 2>&1 | grep -q "INSERT command denied" && echo "âœ“ ä¹é˜Ÿç”¨æˆ·ä¸èƒ½æ’å…¥ Fan æ•°æ®ï¼ˆç¬¦åˆé¢„æœŸï¼‰" || echo "âœ— æƒé™è®¾ç½®æœ‰è¯¯"

-- æµ‹è¯• 2.6: ä¹é˜Ÿç”¨æˆ·åªèƒ½æŸ¥çœ‹ä¹è¯„ï¼ˆä¸èƒ½ä¿®æ”¹ï¼‰
SELECT '--- æµ‹è¯• 2.6: ä¹é˜Ÿç”¨æˆ·å¯¹ä¹è¯„è¡¨åªæœ‰æŸ¥è¯¢æƒé™ ---' AS '';
mysql -u band_user -pBand@123456 band_management -e "
-- æŸ¥è¯¢åº”è¯¥æˆåŠŸ
SELECT 'âœ“ ä¹é˜Ÿç”¨æˆ·å¯ä»¥æŸ¥è¯¢ AlbumReview è¡¨' AS result, COUNT(*) AS count FROM AlbumReview;
"

-- åˆ é™¤åº”è¯¥å¤±è´¥
mysql -u band_user -pBand@123456 band_management -e "
DELETE FROM AlbumReview WHERE review_id = 1;
" 2>&1 | grep -q "DELETE command denied" && echo "âœ“ ä¹é˜Ÿç”¨æˆ·ä¸èƒ½åˆ é™¤ AlbumReview æ•°æ®ï¼ˆç¬¦åˆé¢„æœŸï¼‰" || echo "âœ— æƒé™è®¾ç½®æœ‰è¯¯"

-- æµ‹è¯• 2.7: ä¹é˜Ÿç”¨æˆ·å¯ä»¥æŸ¥çœ‹æ­Œè¿·å–œå¥½ï¼ˆåªè¯»ï¼‰
SELECT '--- æµ‹è¯• 2.7: ä¹é˜Ÿç”¨æˆ·å¯¹æ­Œè¿·å–œå¥½è¡¨åªæœ‰æŸ¥è¯¢æƒé™ ---' AS '';
mysql -u band_user -pBand@123456 band_management -e "
SELECT 'âœ“ ä¹é˜Ÿç”¨æˆ·å¯ä»¥æŸ¥è¯¢ FanFavoriteBand è¡¨' AS result, COUNT(*) AS count FROM FanFavoriteBand;
SELECT 'âœ“ ä¹é˜Ÿç”¨æˆ·å¯ä»¥æŸ¥è¯¢ FanFavoriteAlbum è¡¨' AS result, COUNT(*) AS count FROM FanFavoriteAlbum;
SELECT 'âœ“ ä¹é˜Ÿç”¨æˆ·å¯ä»¥æŸ¥è¯¢ FanFavoriteSong è¡¨' AS result, COUNT(*) AS count FROM FanFavoriteSong;"

-- æµ‹è¯• 2.8: ä¹é˜Ÿç”¨æˆ·å¯ä»¥æŸ¥çœ‹æ¼”å”±ä¼šå‚åŠ è®°å½•ï¼ˆåªè¯»ï¼‰
SELECT '--- æµ‹è¯• 2.8: ä¹é˜Ÿç”¨æˆ·å¯¹æ¼”å”±ä¼šå‚åŠ è®°å½•åªæœ‰æŸ¥è¯¢æƒé™ ---' AS '';
mysql -u band_user -pBand@123456 band_management -e "
SELECT 'âœ“ ä¹é˜Ÿç”¨æˆ·å¯ä»¥æŸ¥è¯¢ ConcertAttendance è¡¨' AS result, COUNT(*) AS count FROM ConcertAttendance;"

-- æµ‹è¯• 2.9: ä¹é˜Ÿç”¨æˆ·å¯ä»¥è®¿é—®ç»Ÿè®¡è§†å›¾
SELECT '--- æµ‹è¯• 2.9: ä¹é˜Ÿç”¨æˆ·å¯ä»¥è®¿é—®ç»Ÿè®¡è§†å›¾ ---' AS '';
mysql -u band_user -pBand@123456 band_management -e "
SELECT 'âœ“ ä¹é˜Ÿç”¨æˆ·å¯ä»¥æŸ¥è¯¢ v_band1_fans è§†å›¾' AS result, COUNT(*) AS count FROM v_band1_fans;
SELECT 'âœ“ ä¹é˜Ÿç”¨æˆ·å¯ä»¥æŸ¥è¯¢ v_band1_reviews è§†å›¾' AS result, COUNT(*) AS count FROM v_band1_reviews;
SELECT 'âœ“ ä¹é˜Ÿç”¨æˆ·å¯ä»¥æŸ¥è¯¢ v_band1_fan_count è§†å›¾' AS result FROM v_band1_fan_count;
SELECT 'âœ“ ä¹é˜Ÿç”¨æˆ·å¯ä»¥æŸ¥è¯¢ v_band1_fan_age_stats è§†å›¾' AS result FROM v_band1_fan_age_stats LIMIT 1;"

-- æµ‹è¯• 2.10: ä¹é˜Ÿç”¨æˆ·ä¸èƒ½åˆ›å»ºè¡¨
SELECT '--- æµ‹è¯• 2.10: ä¹é˜Ÿç”¨æˆ·æ²¡æœ‰ DDL æƒé™ ---' AS '';
mysql -u band_user -pBand@123456 band_management -e "
CREATE TABLE test_band_table (id INT);
" 2>&1 | grep -q "CREATE command denied" && echo "âœ“ ä¹é˜Ÿç”¨æˆ·ä¸èƒ½åˆ›å»ºè¡¨ï¼ˆç¬¦åˆé¢„æœŸï¼‰" || echo "âœ— æƒé™è®¾ç½®æœ‰è¯¯"

SELECT 'âœ“ ä¹é˜Ÿç”¨æˆ·æƒé™æµ‹è¯•å®Œæˆ' AS '';

-- ============================================
-- ç¬¬ä¸‰éƒ¨åˆ†ï¼šæ­Œè¿·ç”¨æˆ· (fan_user) æƒé™æµ‹è¯•
-- ============================================

SELECT '' AS '';
SELECT '========================================' AS '';
SELECT 'æµ‹è¯• 3: æ­Œè¿·ç”¨æˆ· (fan_user) æƒé™' AS '';
SELECT '========================================' AS '';

-- æµ‹è¯• 3.1: æ­Œè¿·ç”¨æˆ·å¯ä»¥æŸ¥è¯¢å’Œä¿®æ”¹æ­Œè¿·ä¿¡æ¯
SELECT '--- æµ‹è¯• 3.1: æ­Œè¿·ç”¨æˆ·å¯¹æ­Œè¿·è¡¨çš„å®Œæ•´æƒé™ ---' AS '';
mysql -u fan_user -pFan@123456 band_management -e "
-- æŸ¥è¯¢
SELECT 'âœ“ æ­Œè¿·ç”¨æˆ·å¯ä»¥æŸ¥è¯¢ Fan è¡¨' AS result, COUNT(*) AS count FROM Fan;

-- æ’å…¥
INSERT INTO Fan (name, gender, age, occupation, education) 
VALUES ('æµ‹è¯•æ­Œè¿·_fan', 'M', 25, 'æµ‹è¯•èŒä¸š', 'æœ¬ç§‘');
SELECT 'âœ“ æ­Œè¿·ç”¨æˆ·å¯ä»¥æ’å…¥ Fan æ•°æ®' AS result;

-- æ›´æ–°
UPDATE Fan SET occupation = 'æµ‹è¯•èŒä¸šæ›´æ–°' WHERE name = 'æµ‹è¯•æ­Œè¿·_fan';
SELECT 'âœ“ æ­Œè¿·ç”¨æˆ·å¯ä»¥æ›´æ–° Fan æ•°æ®' AS result;

-- åˆ é™¤
DELETE FROM Fan WHERE name = 'æµ‹è¯•æ­Œè¿·_fan';
SELECT 'âœ“ æ­Œè¿·ç”¨æˆ·å¯ä»¥åˆ é™¤ Fan æ•°æ®' AS result;"

-- æµ‹è¯• 3.2: æ­Œè¿·ç”¨æˆ·å¯ä»¥ç®¡ç†å–œå¥½ä¿¡æ¯
SELECT '--- æµ‹è¯• 3.2: æ­Œè¿·ç”¨æˆ·å¯¹å–œå¥½è¡¨çš„å®Œæ•´æƒé™ ---' AS '';
mysql -u fan_user -pFan@123456 band_management -e "
SELECT 'âœ“ æ­Œè¿·ç”¨æˆ·å¯ä»¥æŸ¥è¯¢ FanFavoriteBand è¡¨' AS result, COUNT(*) AS count FROM FanFavoriteBand;
SELECT 'âœ“ æ­Œè¿·ç”¨æˆ·å¯ä»¥æŸ¥è¯¢ FanFavoriteAlbum è¡¨' AS result, COUNT(*) AS count FROM FanFavoriteAlbum;
SELECT 'âœ“ æ­Œè¿·ç”¨æˆ·å¯ä»¥æŸ¥è¯¢ FanFavoriteSong è¡¨' AS result, COUNT(*) AS count FROM FanFavoriteSong;
SELECT 'âœ“ æ­Œè¿·ç”¨æˆ·å¯ä»¥ç®¡ç†å–œå¥½æ•°æ®' AS result;"

-- æµ‹è¯• 3.3: æ­Œè¿·ç”¨æˆ·å¯ä»¥ç®¡ç†æ¼”å”±ä¼šå‚åŠ è®°å½•
SELECT '--- æµ‹è¯• 3.3: æ­Œè¿·ç”¨æˆ·å¯¹æ¼”å”±ä¼šå‚åŠ è®°å½•çš„å®Œæ•´æƒé™ ---' AS '';
mysql -u fan_user -pFan@123456 band_management -e "
SELECT 'âœ“ æ­Œè¿·ç”¨æˆ·å¯ä»¥æŸ¥è¯¢ ConcertAttendance è¡¨' AS result, COUNT(*) AS count FROM ConcertAttendance;
SELECT 'âœ“ æ­Œè¿·ç”¨æˆ·å¯ä»¥ç®¡ç†æ¼”å”±ä¼šå‚åŠ è®°å½•' AS result;"

-- æµ‹è¯• 3.4: æ­Œè¿·ç”¨æˆ·å¯ä»¥ç®¡ç†ä¹è¯„
SELECT '--- æµ‹è¯• 3.4: æ­Œè¿·ç”¨æˆ·å¯¹ä¹è¯„è¡¨çš„å®Œæ•´æƒé™ ---' AS '';
mysql -u fan_user -pFan@123456 band_management -e "
SELECT 'âœ“ æ­Œè¿·ç”¨æˆ·å¯ä»¥æŸ¥è¯¢ AlbumReview è¡¨' AS result, COUNT(*) AS count FROM AlbumReview;
SELECT 'âœ“ æ­Œè¿·ç”¨æˆ·å¯ä»¥ç®¡ç†ä¹è¯„æ•°æ®' AS result;"

-- æµ‹è¯• 3.5: æ­Œè¿·ç”¨æˆ·åªèƒ½æŸ¥çœ‹ä¹é˜Ÿä¿¡æ¯ï¼ˆä¸èƒ½ä¿®æ”¹ï¼‰
SELECT '--- æµ‹è¯• 3.5: æ­Œè¿·ç”¨æˆ·å¯¹ä¹é˜Ÿè¡¨åªæœ‰æŸ¥è¯¢æƒé™ ---' AS '';
mysql -u fan_user -pFan@123456 band_management -e "
-- æŸ¥è¯¢åº”è¯¥æˆåŠŸ
SELECT 'âœ“ æ­Œè¿·ç”¨æˆ·å¯ä»¥æŸ¥è¯¢ Band è¡¨' AS result, COUNT(*) AS count FROM Band;
"

-- æ›´æ–°åº”è¯¥å¤±è´¥
mysql -u fan_user -pFan@123456 band_management -e "
UPDATE Band SET intro = 'æµ‹è¯•' WHERE band_id = 1;
" 2>&1 | grep -q "UPDATE command denied" && echo "âœ“ æ­Œè¿·ç”¨æˆ·ä¸èƒ½æ›´æ–° Band æ•°æ®ï¼ˆç¬¦åˆé¢„æœŸï¼‰" || echo "âœ— æƒé™è®¾ç½®æœ‰è¯¯"

-- æµ‹è¯• 3.6: æ­Œè¿·ç”¨æˆ·åªèƒ½æŸ¥çœ‹æˆå‘˜ä¿¡æ¯ï¼ˆä¸èƒ½ä¿®æ”¹ï¼‰
SELECT '--- æµ‹è¯• 3.6: æ­Œè¿·ç”¨æˆ·å¯¹æˆå‘˜è¡¨åªæœ‰æŸ¥è¯¢æƒé™ ---' AS '';
mysql -u fan_user -pFan@123456 band_management -e "
SELECT 'âœ“ æ­Œè¿·ç”¨æˆ·å¯ä»¥æŸ¥è¯¢ Member è¡¨' AS result, COUNT(*) AS count FROM Member;"

-- æµ‹è¯• 3.7: æ­Œè¿·ç”¨æˆ·åªèƒ½æŸ¥çœ‹ä¸“è¾‘å’Œæ­Œæ›²ï¼ˆä¸èƒ½ä¿®æ”¹ï¼‰
SELECT '--- æµ‹è¯• 3.7: æ­Œè¿·ç”¨æˆ·å¯¹ä¸“è¾‘å’Œæ­Œæ›²è¡¨åªæœ‰æŸ¥è¯¢æƒé™ ---' AS '';
mysql -u fan_user -pFan@123456 band_management -e "
SELECT 'âœ“ æ­Œè¿·ç”¨æˆ·å¯ä»¥æŸ¥è¯¢ Album è¡¨' AS result, COUNT(*) AS count FROM Album;
SELECT 'âœ“ æ­Œè¿·ç”¨æˆ·å¯ä»¥æŸ¥è¯¢ Song è¡¨' AS result, COUNT(*) AS count FROM Song;"

-- æµ‹è¯• 3.8: æ­Œè¿·ç”¨æˆ·åªèƒ½æŸ¥çœ‹æ¼”å”±ä¼šï¼ˆä¸èƒ½ä¿®æ”¹ï¼‰
SELECT '--- æµ‹è¯• 3.8: æ­Œè¿·ç”¨æˆ·å¯¹æ¼”å”±ä¼šè¡¨åªæœ‰æŸ¥è¯¢æƒé™ ---' AS '';
mysql -u fan_user -pFan@123456 band_management -e "
SELECT 'âœ“ æ­Œè¿·ç”¨æˆ·å¯ä»¥æŸ¥è¯¢ Concert è¡¨' AS result, COUNT(*) AS count FROM Concert;"

-- æµ‹è¯• 3.9: æ­Œè¿·ç”¨æˆ·å¯ä»¥æŸ¥çœ‹ä¸“è¾‘æ’è¡Œæ¦œ
SELECT '--- æµ‹è¯• 3.9: æ­Œè¿·ç”¨æˆ·å¯ä»¥æŸ¥è¯¢ä¸“è¾‘æ’è¡Œæ¦œ ---' AS '';
mysql -u fan_user -pFan@123456 band_management -e "
SELECT 'âœ“ æ­Œè¿·ç”¨æˆ·å¯ä»¥æŸ¥è¯¢ AlbumRanking è¡¨' AS result, COUNT(*) AS count FROM AlbumRanking;"

-- æµ‹è¯• 3.10: æ­Œè¿·ç”¨æˆ·ä¸èƒ½åˆ›å»ºè¡¨
SELECT '--- æµ‹è¯• 3.10: æ­Œè¿·ç”¨æˆ·æ²¡æœ‰ DDL æƒé™ ---' AS '';
mysql -u fan_user -pFan@123456 band_management -e "
CREATE TABLE test_fan_table (id INT);
" 2>&1 | grep -q "CREATE command denied" && echo "âœ“ æ­Œè¿·ç”¨æˆ·ä¸èƒ½åˆ›å»ºè¡¨ï¼ˆç¬¦åˆé¢„æœŸï¼‰" || echo "âœ— æƒé™è®¾ç½®æœ‰è¯¯"

SELECT 'âœ“ æ­Œè¿·ç”¨æˆ·æƒé™æµ‹è¯•å®Œæˆ' AS '';

-- ============================================
-- ç¬¬å››éƒ¨åˆ†ï¼šæƒé™éš”ç¦»æµ‹è¯•
-- ============================================

SELECT '' AS '';
SELECT '========================================' AS '';
SELECT 'æµ‹è¯• 4: æƒé™éš”ç¦»éªŒè¯' AS '';
SELECT '========================================' AS '';

-- æµ‹è¯• 4.1: ä¹é˜Ÿç”¨æˆ·ä¸èƒ½ä¿®æ”¹æ­Œè¿·æ•°æ®
SELECT '--- æµ‹è¯• 4.1: ä¹é˜Ÿç”¨æˆ·ä¸èƒ½ä¿®æ”¹æ­Œè¿·æ•°æ® ---' AS '';
SELECT 'é¢„æœŸç»“æœ: INSERT/UPDATE/DELETE æ“ä½œåº”è¯¥è¢«æ‹’ç»' AS '';

-- æµ‹è¯• 4.2: æ­Œè¿·ç”¨æˆ·ä¸èƒ½ä¿®æ”¹ä¹é˜Ÿæ•°æ®
SELECT '--- æµ‹è¯• 4.2: æ­Œè¿·ç”¨æˆ·ä¸èƒ½ä¿®æ”¹ä¹é˜Ÿæ•°æ® ---' AS '';
SELECT 'é¢„æœŸç»“æœ: INSERT/UPDATE/DELETE æ“ä½œåº”è¯¥è¢«æ‹’ç»' AS '';

-- æµ‹è¯• 4.3: ä¹é˜Ÿç”¨æˆ·ä¸èƒ½ä¿®æ”¹ä¹è¯„
SELECT '--- æµ‹è¯• 4.3: ä¹é˜Ÿç”¨æˆ·ä¸èƒ½ä¿®æ”¹ä¹è¯„ ---' AS '';
SELECT 'é¢„æœŸç»“æœ: UPDATE/DELETE æ“ä½œåº”è¯¥è¢«æ‹’ç»' AS '';

-- æµ‹è¯• 4.4: æ­Œè¿·ç”¨æˆ·ä¸èƒ½ä¿®æ”¹æ¼”å”±ä¼š
SELECT '--- æµ‹è¯• 4.4: æ­Œè¿·ç”¨æˆ·ä¸èƒ½ä¿®æ”¹æ¼”å”±ä¼š ---' AS '';
SELECT 'é¢„æœŸç»“æœ: INSERT/UPDATE/DELETE æ“ä½œåº”è¯¥è¢«æ‹’ç»' AS '';

SELECT 'âœ“ æƒé™éš”ç¦»æµ‹è¯•å®Œæˆ' AS '';

-- ============================================
-- ç¬¬äº”éƒ¨åˆ†ï¼šUser è¡¨è®¿é—®æƒé™æµ‹è¯•
-- ============================================

SELECT '' AS '';
SELECT '========================================' AS '';
SELECT 'æµ‹è¯• 5: User è¡¨è®¿é—®æƒé™' AS '';
SELECT '========================================' AS '';

-- æµ‹è¯• 5.1: ä¹é˜Ÿç”¨æˆ·å¯ä»¥æŸ¥è¯¢ User è¡¨ï¼ˆç”¨äºç™»å½•éªŒè¯ï¼‰
SELECT '--- æµ‹è¯• 5.1: ä¹é˜Ÿç”¨æˆ·å¯ä»¥æŸ¥è¯¢ User è¡¨ ---' AS '';
mysql -u band_user -pBand@123456 band_management -e "
SELECT 'âœ“ ä¹é˜Ÿç”¨æˆ·å¯ä»¥æŸ¥è¯¢ User è¡¨' AS result, COUNT(*) AS count FROM User;"

-- æµ‹è¯• 5.2: æ­Œè¿·ç”¨æˆ·å¯ä»¥æŸ¥è¯¢ User è¡¨ï¼ˆç”¨äºç™»å½•éªŒè¯ï¼‰
SELECT '--- æµ‹è¯• 5.2: æ­Œè¿·ç”¨æˆ·å¯ä»¥æŸ¥è¯¢ User è¡¨ ---' AS '';
mysql -u fan_user -pFan@123456 band_management -e "
SELECT 'âœ“ æ­Œè¿·ç”¨æˆ·å¯ä»¥æŸ¥è¯¢ User è¡¨' AS result, COUNT(*) AS count FROM User;"
```

#### æ•°æ®åº“åˆ›å»ºç»“æœ

<img src="img/band_management.png" alt="band_management" style="zoom:60%;" />

## åŸºäºæ•°æ®åº“çš„webåº”ç”¨

### åŠŸèƒ½åŸºæœ¬è¦æ±‚

åŸºäºå·²å®Œæˆçš„MySQLæ•°æ®åº“è®¾è®¡ï¼ˆåŒ…å«æ•°æ®åº“å®æ–½ã€å®‰å…¨æ€§é…ç½®å’Œå®Œæ•´æ€§çº¦æŸï¼‰ï¼Œå¼€å‘ä¸€ä¸ªå®Œæ•´çš„ä¹é˜Ÿç®¡ç†ç³»ç»ŸJava Webåº”ç”¨ã€‚

* å®ç°ç”¨æˆ·ç™»å½•åŠŸèƒ½ï¼Œå¯é€‰æ‹©ä¸ºç®¡ç†å‘˜ç”¨æˆ·ã€ä¹é˜Ÿç”¨æˆ·æˆ–æ­Œè¿·ç”¨æˆ·ã€‚ 
* ç®¡ç†å‘˜ç”¨æˆ·å¯ä»¥å¯¹ä»»ä½•åå°æ•°æ®è¿›è¡Œæ‰€æœ‰æƒé™æ“ä½œï¼› 
* ä½¿ç”¨ä¹é˜Ÿç”¨æˆ·ç™»å½•ï¼Œè¦æ±‚å®ç°ä»¥ä¸‹åŠŸèƒ½ï¼š
  * æ˜¾ç¤ºã€å‘å¸ƒã€ä¿®æ”¹ã€åˆ é™¤æœ¬ä¹é˜Ÿç›¸å…³ä¿¡æ¯ï¼ŒåŒ…æ‹¬ä¹é˜Ÿä¿¡æ¯ã€æˆå‘˜
    ä¿¡æ¯ã€ä¸“è¾‘ä¿¡æ¯ã€æ­Œæ›²ä¿¡æ¯ã€æ¼”å”±ä¼šä¿¡æ¯ï¼› 
  * æŸ¥çœ‹æ­Œè¿·ç›¸å…³ä¿¡æ¯ï¼ŒåŒ…æ‹¬ä¹é˜Ÿæ­Œè¿·ä¿¡æ¯ã€å–œæ¬¢æœ¬ä¹é˜Ÿä¸“è¾‘ã€æ­Œæ›²
    çš„æ­Œè¿·ä¿¡æ¯ï¼Œå‚åŠ æœ¬ä¹é˜Ÿæ¼”å”±ä¼šçš„æ­Œè¿·ä¿¡æ¯ç­‰ï¼› 
  * æŸ¥çœ‹ä¹é˜Ÿå‘å¸ƒä¸“è¾‘çš„ä¹è¯„æƒ…å†µï¼ŒåŒ…æ‹¬åˆ†æ•°ã€è¯„è®ºã€‚ 
* ä½¿ç”¨ä¹è¿·ç”¨æˆ·ç™»å½•ï¼Œè¦æ±‚å®ç°ä»¥ä¸‹åŠŸèƒ½ï¼š 
  * è¯¥ä¹è¿·ç”¨æˆ·èº«ä»½ä¿¡æ¯ç»´æŠ¤ï¼› 
  * æ˜¾ç¤ºè¯¥ä¹è¿·æ‰€å–œæ¬¢çš„ä¹é˜Ÿã€ä¸“è¾‘ã€æ­Œæ›²ï¼Œå‚åŠ çš„æ¼”å”±ä¼šä¿¡æ¯ç­‰ï¼Œ
    å¯ä»¥ç‚¹å¼€æ¯ä¸€è¡ŒæŸ¥çœ‹è¯¦ç»†ä¿¡æ¯ï¼› 
  * è¯¥ä¹è¿·å¯ä»¥æ·»åŠ ã€åˆ é™¤ã€ä¿®æ”¹å–œæ¬¢çš„ä¹é˜Ÿã€ä¸“è¾‘ã€æ­Œæ›²ï¼Œå‚åŠ çš„
    æ¼”å”±ä¼šç­‰ï¼› 
  * è¯¥ä¹è¿·å¯ä»¥æŸ¥çœ‹æ‰€æœ‰æœªå…³æ³¨çš„ä¹é˜Ÿã€ä¸“è¾‘ã€æ­Œæ›²ã€æ¼”å”±ä¼šä¿¡æ¯ï¼ˆå¯å¢åŠ æŸ¥è¯¢åŠŸèƒ½ï¼‰ï¼Œå¯æŸ¥çœ‹ä¸“è¾‘æ’åï¼› 
  * è¯¥ä¹è¿·å¯ä»¥ç»™ä»»ä½•ä¸“è¾‘è¯„è®ºã€è¯„åˆ†ã€‚ 
* å¯è‡ªè¡Œæ·»åŠ ç›¸åº”åŠŸèƒ½

### å¼‚å¸¸å¤„ç†ä¸æ•°æ®å®Œæ•´æ€§

#### 1. å¼‚å¸¸å¤„ç†æœºåˆ¶

ç³»ç»Ÿå®ç°äº†å®Œå–„çš„å¼‚å¸¸å¤„ç†æœºåˆ¶ï¼Œç¡®ä¿ç”¨æˆ·èƒ½å¤Ÿè·å¾—æ¸…æ™°ã€å…·ä½“çš„é”™è¯¯æç¤ºä¿¡æ¯ã€‚

##### 1.1 SQLå¼‚å¸¸å¤„ç†

ç³»ç»Ÿå¯¹SQLå¼‚å¸¸è¿›è¡Œäº†åˆ†å±‚å¤„ç†ï¼š

**SQLExceptionå¤„ç†**ï¼š
- æ•è·ç›´æ¥çš„JDBCå¼‚å¸¸
- æå–MySQLè§¦å‘å™¨é”™è¯¯ä¿¡æ¯ï¼ˆSQLState = 45000ï¼‰
- è¿”å›å…·ä½“çš„é”™è¯¯æ¶ˆæ¯

**UncategorizedSQLExceptionå¤„ç†**ï¼š
- æ•è·Spring JDBCåŒ…è£…çš„SQLå¼‚å¸¸
- ä¼˜å…ˆè·å–åŸå§‹SQLExceptionè¿›è¡Œå¤„ç†
- ä»å¼‚å¸¸æ¶ˆæ¯ä¸­æå–å®é™…é”™è¯¯ä¿¡æ¯
- ç¡®ä¿ä¹é˜Ÿç®¡ç†å’Œç®¡ç†å‘˜åå°çš„é”™è¯¯æç¤ºä¸€è‡´

**é”™è¯¯ä¿¡æ¯æå–é€»è¾‘**ï¼š
- ä»è§¦å‘å™¨æ¶ˆæ¯ä¸­æå–MESSAGE_TEXT
- ä»å¤šè¡Œå¼‚å¸¸æ¶ˆæ¯ä¸­æå–æœ€åçš„å®é™…é”™è¯¯
- è¿”å›PARAM_ERRORè€ŒéSYSTEM_ERROR

##### 1.2 æ—¥æœŸéªŒè¯é”™è¯¯æç¤ºä¼˜åŒ–

ç³»ç»Ÿå¯¹æ—¥æœŸéªŒè¯é”™è¯¯æç¤ºè¿›è¡Œäº†ä¼˜åŒ–ï¼Œæä¾›è¯¦ç»†çš„æ—¥æœŸä¿¡æ¯ï¼š

**é”™è¯¯æç¤ºæ ¼å¼**ï¼š
```
"xxxæ—¥æœŸï¼ˆå…·ä½“æ—¥æœŸï¼‰éœ€è¦åœ¨ä¹é˜Ÿåˆ›å»ºæ—¥æœŸï¼ˆå…·ä½“æ—¥æœŸï¼‰ä¹‹å"
```

**æ¶‰åŠçš„Serviceå®ç°ç±»**ï¼š
- BandMemberServiceImpl
- BandAlbumServiceImpl
- BandConcertServiceImpl
- AdminMemberServiceImpl
- AdminAlbumServiceImpl
- AdminConcertServiceImpl

**ç¤ºä¾‹**ï¼š
```
"æˆå‘˜åŠ å…¥æ—¥æœŸï¼ˆ2020-01-01ï¼‰éœ€è¦åœ¨ä¹é˜Ÿåˆ›å»ºæ—¥æœŸï¼ˆ2021-01-01ï¼‰ä¹‹å"
"ä¸“è¾‘å‘è¡Œæ—¥æœŸï¼ˆ2019-05-10ï¼‰éœ€è¦åœ¨ä¹é˜Ÿåˆ›å»ºæ—¥æœŸï¼ˆ2020-03-15ï¼‰ä¹‹å"
```

#### 2. æ•°æ®å®Œæ•´æ€§åŒé‡éªŒè¯æœºåˆ¶

ç³»ç»Ÿé‡‡ç”¨åº”ç”¨å±‚å’Œæ•°æ®åº“å±‚çš„åŒé‡éªŒè¯æœºåˆ¶ï¼Œç¡®ä¿æ•°æ®å®Œæ•´æ€§ï¼š

##### 2.1 åº”ç”¨å±‚éªŒè¯ï¼ˆServiceå±‚ï¼‰

**ç‰¹ç‚¹**ï¼š
- åœ¨æ•°æ®åº“æ“ä½œå‰æ‰§è¡Œ
- æä¾›è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯ï¼ˆåŒ…å«å…·ä½“æ—¥æœŸï¼‰
- æŠ›å‡ºBusinessException
- ç”¨æˆ·ä½“éªŒæ›´å¥½

**éªŒè¯å†…å®¹**ï¼š
- æˆå‘˜åŠ å…¥æ—¥æœŸå¿…é¡» >= ä¹é˜Ÿæˆç«‹æ—¥æœŸ
- ä¸“è¾‘å‘è¡Œæ—¥æœŸå¿…é¡» >= ä¹é˜Ÿæˆç«‹æ—¥æœŸ
- æ¼”å”±ä¼šæ—¥æœŸå¿…é¡» >= ä¹é˜Ÿæˆç«‹æ—¥æœŸ

##### 2.2 æ•°æ®åº“å±‚éªŒè¯ï¼ˆè§¦å‘å™¨ï¼‰

**ç‰¹ç‚¹**ï¼š
- BEFORE INSERT/UPDATEè§¦å‘
- æä¾›ç®€å•çš„é”™è¯¯ä¿¡æ¯
- æŠ›å‡ºSQLExceptionï¼ˆè¢«SpringåŒ…è£…ä¸ºUncategorizedSQLExceptionï¼‰
- ç¡®ä¿æ•°æ®å®Œæ•´æ€§ï¼Œé˜²æ­¢ç»•è¿‡åº”ç”¨å±‚çš„ç›´æ¥æ•°æ®åº“æ“ä½œ

**è§¦å‘å™¨åˆ—è¡¨**ï¼š
- `trg_member_check_join_date_insert`
- `trg_member_check_join_date_update`
- `trg_album_check_release_date_insert`
- `trg_album_check_release_date_update`
- `trg_concert_check_event_time_insert`
- `trg_concert_check_event_time_update`

##### 2.3 ä¸ºä»€ä¹ˆéœ€è¦ä¸¤å±‚éªŒè¯ï¼Ÿ

**åº”ç”¨å±‚éªŒè¯çš„ä¼˜åŠ¿**ï¼š
- æä¾›æ›´å¥½çš„ç”¨æˆ·ä½“éªŒ
- è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯
- æ›´å¿«çš„å“åº”é€Ÿåº¦ï¼ˆæ— éœ€è®¿é—®æ•°æ®åº“ï¼‰

**æ•°æ®åº“å±‚éªŒè¯çš„ä¼˜åŠ¿**ï¼š
- ç¡®ä¿æ•°æ®å®Œæ•´æ€§
- é˜²æ­¢ç»•è¿‡åº”ç”¨å±‚çš„ç›´æ¥æ•°æ®åº“æ“ä½œ
- ä½œä¸ºæœ€åä¸€é“é˜²çº¿

#### 3. å…¨å±€å¼‚å¸¸å¤„ç†å™¨

ç³»ç»Ÿå®ç°äº†å…¨å±€å¼‚å¸¸å¤„ç†å™¨ï¼ˆGlobalExceptionHandlerï¼‰ï¼Œç»Ÿä¸€å¤„ç†æ‰€æœ‰å¼‚å¸¸ï¼š

**å¤„ç†çš„å¼‚å¸¸ç±»å‹**ï¼š
- BusinessExceptionï¼šåº”ç”¨å±‚ä¸šåŠ¡å¼‚å¸¸
- SQLExceptionï¼šæ•°æ®åº“ç›´æ¥å¼‚å¸¸
- UncategorizedSQLExceptionï¼šSpring JDBCåŒ…è£…å¼‚å¸¸
- IllegalArgumentExceptionï¼šå‚æ•°å¼‚å¸¸
- Exceptionï¼šå…¶ä»–æœªçŸ¥å¼‚å¸¸

**å¼‚å¸¸å¤„ç†æµç¨‹**ï¼š
1. æ•è·å¼‚å¸¸
2. æå–é”™è¯¯ä¿¡æ¯
3. è®°å½•æ—¥å¿—
4. è¿”å›ç»Ÿä¸€æ ¼å¼çš„é”™è¯¯å“åº”

**ç›¸å…³æ–‡æ¡£**ï¼š
- [UncategorizedSQLExceptionå¼‚å¸¸å¤„ç†ä¿®å¤](./bug/UNCATEGORIZED_SQL_EXCEPTION_FIX.md)
- [æ—¥æœŸå®Œæ•´æ€§çº¦æŸä¿®å¤](./bug/DATE_INTEGRITY_CONSTRAINT_FIX.md)

### åº”ç”¨ç³»ç»Ÿè®¾è®¡

#### 1. æŠ€æœ¯æ ˆ
- **åç«¯è¯­è¨€**: Java
- **æ•°æ®åº“**: MySQL 5.7+
- **æ¨èæ¡†æ¶**: Spring Boot + MyBatis
- **å‰ç«¯**: Vue.js + Element Plus UI
- **æ„å»ºå·¥å…·**: Maven

#### 2. åŠŸèƒ½è®¾è®¡

##### 2.1 ç”¨æˆ·è®¤è¯ä¸æˆæƒ

###### 2.1.1 ç”¨æˆ·ç™»å½•

**åŠŸèƒ½æè¿°**: ç”¨æˆ·å¯ä»¥é€‰æ‹©è§’è‰²ç±»å‹ç™»å½•ç³»ç»Ÿ

**ç”¨æˆ·è§’è‰²**:
- ç®¡ç†å‘˜ç”¨æˆ·ï¼ˆADMINï¼‰
- ä¹é˜Ÿç”¨æˆ·ï¼ˆBANDï¼‰
- æ­Œè¿·ç”¨æˆ·ï¼ˆFANï¼‰

**ç™»å½•æµç¨‹**:
1. ç”¨æˆ·é€‰æ‹©è§’è‰²ç±»å‹ï¼ˆä¸‹æ‹‰é€‰æ‹©ï¼‰
2. è¾“å…¥ç”¨æˆ·åå’Œå¯†ç 
3. ç³»ç»ŸéªŒè¯èº«ä»½ï¼ˆBCryptå¯†ç éªŒè¯ï¼‰
4. ç™»å½•æˆåŠŸååˆ›å»ºSessionï¼Œè¿”å›ç”¨æˆ·ä¿¡æ¯
5. è·³è½¬åˆ°å¯¹åº”è§’è‰²çš„ä¸»é¡µ

**æ•°æ®åº“ç”¨æˆ·æ˜ å°„**:
- ç®¡ç†å‘˜ â†’ `admin_user@localhost`ï¼ˆå¯†ç ï¼šAdmin@123456ï¼‰
- ä¹é˜Ÿç”¨æˆ· â†’ `band_user@localhost`ï¼ˆå¯†ç ï¼šBand@123456ï¼‰
- æ­Œè¿·ç”¨æˆ· â†’ `fan_user@localhost`ï¼ˆå¯†ç ï¼šFan@123456ï¼‰

**å®‰å…¨è¦æ±‚**:
- å¯†ç BCryptåŠ å¯†å­˜å‚¨
- Session + Cookieè®¤è¯æœºåˆ¶
- é˜²æ­¢SQLæ³¨å…¥ï¼ˆä½¿ç”¨MyBatiså‚æ•°åŒ–æŸ¥è¯¢ï¼‰
- ç»Ÿä¸€å¼‚å¸¸å¤„ç†
- è·¨åŸŸé…ç½®ï¼ˆCORSï¼‰

###### 2.1.2 ç”¨æˆ·æ³¨å†Œ

**åŠŸèƒ½æè¿°**: æ–°ç”¨æˆ·å¯ä»¥æ³¨å†Œä¹é˜Ÿè´¦å·æˆ–æ­Œè¿·è´¦å·

**ä¹é˜Ÿæ³¨å†Œ**:
- è¾“å…¥ä¹é˜Ÿåç§°ã€æˆç«‹æ—¥æœŸã€ä¹é˜Ÿç®€ä»‹ã€å¯†ç 
- ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆç”¨æˆ·åï¼ˆband_æ‹¼éŸ³ï¼‰
- åˆ›å»ºBandè®°å½•å’ŒUserè®°å½•
- è¿”å›ç”Ÿæˆçš„ç”¨æˆ·åä¾›ç™»å½•ä½¿ç”¨

**æ­Œè¿·æ³¨å†Œ**:
- è¾“å…¥å§“åã€æ€§åˆ«ã€å¹´é¾„ã€èŒä¸šã€å­¦å†ã€å¯†ç 
- ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆç”¨æˆ·åï¼ˆfan_æ‹¼éŸ³ï¼‰
- åˆ›å»ºFanè®°å½•å’ŒUserè®°å½•
- è¿”å›ç”Ÿæˆçš„ç”¨æˆ·åä¾›ç™»å½•ä½¿ç”¨

###### 2.1.3 æƒé™æ§åˆ¶

- åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼ˆRBACï¼‰
- ä¸åŒè§’è‰²è®¿é—®ä¸åŒçš„åŠŸèƒ½æ¨¡å—
- æ•°æ®åº“å±‚é¢çš„æƒé™éš”ç¦»ï¼ˆå·²åœ¨database_security.sqlä¸­å®ç°ï¼‰
- åº”ç”¨å±‚SessionéªŒè¯
- å‰ç«¯è·¯ç”±å®ˆå«


##### 2.2 ç®¡ç†å‘˜åŠŸèƒ½æ¨¡å—

###### 2.2.1 ç®¡ç†å‘˜ä¸»é¡µï¼ˆDashboardï¼‰

**åŠŸèƒ½æè¿°**: æ˜¾ç¤ºç³»ç»Ÿæ•´ä½“ç»Ÿè®¡æ•°æ®

**æ ¸å¿ƒåŠŸèƒ½**:
- ç³»ç»Ÿæ€»ä½“ç»Ÿè®¡ï¼ˆä¹é˜Ÿæ•°ã€æˆå‘˜æ•°ã€ä¸“è¾‘æ•°ã€æ­Œæ›²æ•°ã€æ¼”å”±ä¼šæ•°ã€æ­Œè¿·æ•°ã€ä¹è¯„æ•°ï¼‰
- æ•°æ®å¯è§†åŒ–å›¾è¡¨
- å¿«é€Ÿè®¿é—®å„ç®¡ç†æ¨¡å—

###### 2.2.2 ä¹é˜Ÿç®¡ç†ï¼ˆBandsï¼‰

**åŠŸèƒ½æè¿°**: ç®¡ç†æ‰€æœ‰ä¹é˜Ÿä¿¡æ¯

**æ ¸å¿ƒåŠŸèƒ½**:
- æŸ¥çœ‹æ‰€æœ‰ä¹é˜Ÿåˆ—è¡¨ï¼ˆåˆ†é¡µæ˜¾ç¤ºï¼‰
- æœç´¢ä¹é˜Ÿï¼ˆæŒ‰åç§°æ¨¡ç³Šæœç´¢ï¼‰
- æŸ¥çœ‹ä¹é˜Ÿè¯¦æƒ…ï¼ˆåŒ…å«æˆå‘˜åˆ—è¡¨ï¼‰
- æ·»åŠ æ–°ä¹é˜Ÿï¼ˆåç§°ã€æˆç«‹æ—¥æœŸã€ç®€ä»‹ï¼‰
- ç¼–è¾‘ä¹é˜Ÿä¿¡æ¯
- åˆ é™¤ä¹é˜Ÿï¼ˆçº§è”åˆ é™¤ç›¸å…³æ•°æ®ï¼‰
- è®¾ç½®ä¹é˜Ÿé˜Ÿé•¿

**æ•°æ®å±•ç¤º**:
- ä¹é˜ŸIDã€åç§°ã€æˆç«‹æ—¥æœŸã€ç®€ä»‹ã€é˜Ÿé•¿ã€æˆå‘˜äººæ•°
- æ”¯æŒæ’åºå’Œç­›é€‰

###### 2.2.3 æˆå‘˜ç®¡ç†ï¼ˆMembersï¼‰
**åŠŸèƒ½æè¿°**: ç®¡ç†æ‰€æœ‰ä¹é˜Ÿæˆå‘˜ä¿¡æ¯

**æ ¸å¿ƒåŠŸèƒ½**:
- æŸ¥çœ‹æ‰€æœ‰æˆå‘˜åˆ—è¡¨ï¼ˆåˆ†é¡µæ˜¾ç¤ºï¼‰
- æŒ‰ä¹é˜Ÿç­›é€‰æˆå‘˜
- æŸ¥çœ‹æˆå‘˜è¯¦æƒ…
- æ·»åŠ æ–°æˆå‘˜ï¼ˆpersonIdã€ä¹é˜Ÿã€å§“åã€æ€§åˆ«ã€å‡ºç”Ÿæ—¥æœŸã€åˆ†å·¥ã€åŠ å…¥æ—¥æœŸï¼‰
- ç¼–è¾‘æˆå‘˜ä¿¡æ¯ï¼ˆå¯è®¾ç½®ç¦»é˜Ÿæ—¥æœŸï¼‰
- åˆ é™¤æˆå‘˜è®°å½•

**æ•°æ®å±•ç¤º**:
- æˆå‘˜IDã€å§“åã€æ€§åˆ«ã€å‡ºç”Ÿæ—¥æœŸã€æ‰€å±ä¹é˜Ÿã€åˆ†å·¥ã€åŠ å…¥æ—¥æœŸã€ç¦»é˜Ÿæ—¥æœŸ
- è‡ªåŠ¨è®¡ç®—å¹´é¾„
- æ ‡è¯†åœ¨é˜Ÿ/ç¦»é˜ŸçŠ¶æ€

###### 2.2.4 ä¸“è¾‘ç®¡ç†ï¼ˆAlbumsï¼‰
**åŠŸèƒ½æè¿°**: ç®¡ç†æ‰€æœ‰ä¸“è¾‘ä¿¡æ¯

**æ ¸å¿ƒåŠŸèƒ½**:
- æŸ¥çœ‹æ‰€æœ‰ä¸“è¾‘åˆ—è¡¨ï¼ˆåˆ†é¡µæ˜¾ç¤ºï¼‰
- æŒ‰ä¹é˜Ÿç­›é€‰ä¸“è¾‘
- æœç´¢ä¸“è¾‘ï¼ˆæŒ‰åç§°ï¼‰
- æŸ¥çœ‹ä¸“è¾‘è¯¦æƒ…ï¼ˆåŒ…å«æ­Œæ›²åˆ—è¡¨ã€è¯„åˆ†ç»Ÿè®¡ï¼‰
- æ·»åŠ æ–°ä¸“è¾‘ï¼ˆä¹é˜Ÿã€åç§°ã€å‘è¡Œæ—¥æœŸã€æ–‡æ¡ˆï¼‰
- ç¼–è¾‘ä¸“è¾‘ä¿¡æ¯
- åˆ é™¤ä¸“è¾‘ï¼ˆçº§è”åˆ é™¤æ­Œæ›²å’Œä¹è¯„ï¼‰

**æ•°æ®å±•ç¤º**:
- ä¸“è¾‘IDã€åç§°ã€æ‰€å±ä¹é˜Ÿã€å‘è¡Œæ—¥æœŸã€æ–‡æ¡ˆã€å¹³å‡è¯„åˆ†
- è¯„åˆ†è‡ªåŠ¨è®¡ç®—ï¼ˆè§¦å‘å™¨ï¼‰

###### 2.2.5 æ­Œæ›²ç®¡ç†ï¼ˆSongsï¼‰
**åŠŸèƒ½æè¿°**: ç®¡ç†æ‰€æœ‰æ­Œæ›²ä¿¡æ¯

**æ ¸å¿ƒåŠŸèƒ½**:
- æŸ¥çœ‹æ‰€æœ‰æ­Œæ›²åˆ—è¡¨ï¼ˆåˆ†é¡µæ˜¾ç¤ºï¼‰
- æŒ‰ä¸“è¾‘ç­›é€‰æ­Œæ›²
- æœç´¢æ­Œæ›²ï¼ˆæŒ‰åç§°ï¼‰
- æŸ¥çœ‹æ­Œæ›²è¯¦æƒ…
- æ·»åŠ æ–°æ­Œæ›²ï¼ˆä¸“è¾‘ã€åç§°ã€è¯ä½œè€…ã€æ›²ä½œè€…ï¼‰
- ç¼–è¾‘æ­Œæ›²ä¿¡æ¯
- åˆ é™¤æ­Œæ›²

**æ•°æ®å±•ç¤º**:
- æ­Œæ›²IDã€åç§°ã€æ‰€å±ä¸“è¾‘ã€æ‰€å±ä¹é˜Ÿã€è¯ä½œè€…ã€æ›²ä½œè€…

###### 2.2.6 æ¼”å”±ä¼šç®¡ç†ï¼ˆConcertsï¼‰
**åŠŸèƒ½æè¿°**: ç®¡ç†æ‰€æœ‰æ¼”å”±ä¼šä¿¡æ¯

**æ ¸å¿ƒåŠŸèƒ½**:
- æŸ¥çœ‹æ‰€æœ‰æ¼”å”±ä¼šåˆ—è¡¨ï¼ˆåˆ†é¡µæ˜¾ç¤ºï¼‰
- æŒ‰ä¹é˜Ÿç­›é€‰æ¼”å”±ä¼š
- æŸ¥çœ‹æ¼”å”±ä¼šè¯¦æƒ…ï¼ˆåŒ…å«å‚ä¸æ­Œè¿·ï¼‰
- æ·»åŠ æ–°æ¼”å”±ä¼šï¼ˆä¹é˜Ÿã€åç§°ã€æ—¶é—´ã€åœ°ç‚¹ï¼‰
- ç¼–è¾‘æ¼”å”±ä¼šä¿¡æ¯
- åˆ é™¤æ¼”å”±ä¼š

**æ•°æ®å±•ç¤º**:
- æ¼”å”±ä¼šIDã€åç§°ã€ä¸»åŠä¹é˜Ÿã€æ—¶é—´ã€åœ°ç‚¹ã€å‚ä¸äººæ•°

###### 2.2.7 æ­Œè¿·ç®¡ç†ï¼ˆFansï¼‰
**åŠŸèƒ½æè¿°**: ç®¡ç†æ‰€æœ‰æ­Œè¿·ä¿¡æ¯

**æ ¸å¿ƒåŠŸèƒ½**:
- æŸ¥çœ‹æ‰€æœ‰æ­Œè¿·åˆ—è¡¨ï¼ˆåˆ†é¡µæ˜¾ç¤ºï¼‰
- æœç´¢æ­Œè¿·ï¼ˆæŒ‰å§“åï¼‰
- æŸ¥çœ‹æ­Œè¿·è¯¦æƒ…ï¼ˆåŒ…å«å–œå¥½ç»Ÿè®¡ï¼‰
- æ·»åŠ æ–°æ­Œè¿·
- ç¼–è¾‘æ­Œè¿·ä¿¡æ¯
- åˆ é™¤æ­Œè¿·ï¼ˆçº§è”åˆ é™¤ç›¸å…³æ•°æ®ï¼‰

**æ•°æ®å±•ç¤º**:
- æ­Œè¿·IDã€å§“åã€æ€§åˆ«ã€å¹´é¾„ã€èŒä¸šã€å­¦å†
- å…³æ³¨ä¹é˜Ÿæ•°ã€æ”¶è—ä¸“è¾‘æ•°ã€æ”¶è—æ­Œæ›²æ•°ã€ä¹è¯„æ•°

###### 2.2.8 ä¹è¯„ç®¡ç†ï¼ˆReviewsï¼‰
**åŠŸèƒ½æè¿°**: ç®¡ç†æ‰€æœ‰ä¹è¯„ä¿¡æ¯

**æ ¸å¿ƒåŠŸèƒ½**:
- æŸ¥çœ‹æ‰€æœ‰ä¹è¯„åˆ—è¡¨ï¼ˆåˆ†é¡µæ˜¾ç¤ºï¼‰
- æŒ‰ä¸“è¾‘ç­›é€‰ä¹è¯„
- æŒ‰æ­Œè¿·ç­›é€‰ä¹è¯„
- æŸ¥çœ‹ä¹è¯„è¯¦æƒ…
- åˆ é™¤ä¸å½“ä¹è¯„

**æ•°æ®å±•ç¤º**:
- ä¹è¯„IDã€æ­Œè¿·å§“åã€ä¸“è¾‘åç§°ã€ä¹é˜Ÿåç§°ã€è¯„åˆ†ã€è¯„è®ºå†…å®¹ã€è¯„è®ºæ—¶é—´
- æ”¯æŒæŒ‰è¯„åˆ†ã€æ—¶é—´æ’åº


##### 2.3 ä¹é˜Ÿç”¨æˆ·åŠŸèƒ½æ¨¡å—

###### 2.3.1 ä¹é˜Ÿä¸»é¡µï¼ˆHomeï¼‰
**åŠŸèƒ½æè¿°**: æ˜¾ç¤ºæœ¬ä¹é˜Ÿçš„æ¦‚è§ˆä¿¡æ¯å’Œå¿«é€Ÿæ“ä½œ

**æ ¸å¿ƒåŠŸèƒ½**:
- æ˜¾ç¤ºä¹é˜ŸåŸºæœ¬ä¿¡æ¯ï¼ˆåç§°ã€æˆç«‹æ—¶é—´ã€ç®€ä»‹ã€æˆå‘˜äººæ•°ï¼‰
- æ˜¾ç¤ºç»Ÿè®¡æ•°æ®ï¼ˆä¸“è¾‘æ•°ã€æ­Œæ›²æ•°ã€æ­Œè¿·æ•°ï¼‰
- æœ€æ–°ä¸“è¾‘åˆ—è¡¨
- æœ€æ–°æ¼”å”±ä¼šåˆ—è¡¨
- å¿«é€Ÿè®¿é—®å„ç®¡ç†æ¨¡å—

###### 2.3.2 æˆå‘˜ç®¡ç†ï¼ˆMembersï¼‰
**åŠŸèƒ½æè¿°**: ç®¡ç†æœ¬ä¹é˜Ÿçš„æˆå‘˜ä¿¡æ¯

**æ ¸å¿ƒåŠŸèƒ½**:
- æŸ¥çœ‹æœ¬ä¹é˜Ÿæ‰€æœ‰æˆå‘˜åˆ—è¡¨
- æ·»åŠ æ–°æˆå‘˜ï¼ˆå§“åã€æ€§åˆ«ã€å‡ºç”Ÿæ—¥æœŸã€åˆ†å·¥ã€åŠ å…¥æ—¥æœŸï¼‰
- ç¼–è¾‘æˆå‘˜ä¿¡æ¯ï¼ˆåˆ†å·¥ã€ç¦»é˜Ÿæ—¥æœŸï¼‰
- åˆ é™¤æˆå‘˜è®°å½•
- æŸ¥çœ‹æˆå‘˜è¯¦ç»†ä¿¡æ¯
- **çº¦æŸ**: æˆå‘˜äººæ•°è‡ªåŠ¨æ›´æ–°ï¼ˆè§¦å‘å™¨ï¼‰

**æ•°æ®å±•ç¤º**:
- æˆå‘˜å§“åã€æ€§åˆ«ã€å¹´é¾„ã€åˆ†å·¥ã€åŠ å…¥æ—¥æœŸã€åœ¨é˜ŸçŠ¶æ€
- æ ‡è¯†é˜Ÿé•¿
- æŒ‰åŠ å…¥æ—¶é—´æ’åº

###### 2.3.3 ä¸“è¾‘ç®¡ç†ï¼ˆAlbumsï¼‰
**åŠŸèƒ½æè¿°**: ç®¡ç†æœ¬ä¹é˜Ÿçš„ä¸“è¾‘ä¿¡æ¯

**æ ¸å¿ƒåŠŸèƒ½**:
- æŸ¥çœ‹æœ¬ä¹é˜Ÿæ‰€æœ‰ä¸“è¾‘åˆ—è¡¨
- å‘å¸ƒæ–°ä¸“è¾‘ï¼ˆåç§°ã€å‘è¡Œæ—¥æœŸã€ä¸“è¾‘æ–‡æ¡ˆï¼‰
- ç¼–è¾‘ä¸“è¾‘ä¿¡æ¯
- åˆ é™¤ä¸“è¾‘
- æŸ¥çœ‹ä¸“è¾‘è¯¦æƒ…ï¼ˆåŒ…å«æ­Œæ›²åˆ—è¡¨ï¼‰
- æŸ¥çœ‹ä¸“è¾‘è¯„åˆ†å’Œè¯„è®ºæ•°
- æŸ¥çœ‹ä¸“è¾‘ä¹è¯„åˆ—è¡¨

**æ•°æ®å±•ç¤º**:
- ä¸“è¾‘åç§°ã€å‘è¡Œæ—¥æœŸã€æ–‡æ¡ˆã€å¹³å‡è¯„åˆ†ã€æ­Œæ›²æ•°
- è¯„åˆ†è‡ªåŠ¨è®¡ç®—ï¼ˆè§¦å‘å™¨ï¼‰
- æŒ‰å‘è¡Œæ—¥æœŸæ’åº

###### 2.3.4 æ­Œæ›²ç®¡ç†ï¼ˆSongsï¼‰
**åŠŸèƒ½æè¿°**: ç®¡ç†æœ¬ä¹é˜Ÿçš„æ­Œæ›²ä¿¡æ¯

**æ ¸å¿ƒåŠŸèƒ½**:
- æŸ¥çœ‹æœ¬ä¹é˜Ÿæ‰€æœ‰æ­Œæ›²åˆ—è¡¨ï¼ˆæŒ‰ä¸“è¾‘åˆ†ç»„ï¼‰
- æ·»åŠ æ–°æ­Œæ›²ï¼ˆé€‰æ‹©ä¸“è¾‘ã€åç§°ã€è¯ä½œè€…ã€æ›²ä½œè€…ï¼‰
- ç¼–è¾‘æ­Œæ›²ä¿¡æ¯
- åˆ é™¤æ­Œæ›²
- æŸ¥çœ‹æ­Œæ›²è¯¦ç»†ä¿¡æ¯

**æ•°æ®å±•ç¤º**:
- æ­Œæ›²åç§°ã€æ‰€å±ä¸“è¾‘ã€è¯ä½œè€…ã€æ›²ä½œè€…
- æŒ‰ä¸“è¾‘å’Œæ·»åŠ æ—¶é—´æ’åº

###### 2.3.5 æ¼”å”±ä¼šç®¡ç†ï¼ˆConcertsï¼‰
**åŠŸèƒ½æè¿°**: ç®¡ç†æœ¬ä¹é˜Ÿçš„æ¼”å”±ä¼šä¿¡æ¯

**æ ¸å¿ƒåŠŸèƒ½**:
- æŸ¥çœ‹æœ¬ä¹é˜Ÿæ‰€æœ‰æ¼”å”±ä¼šåˆ—è¡¨
- å‘å¸ƒæ–°æ¼”å”±ä¼šï¼ˆåç§°ã€æ—¶é—´ã€åœ°ç‚¹ï¼‰
- ç¼–è¾‘æ¼”å”±ä¼šä¿¡æ¯
- åˆ é™¤æ¼”å”±ä¼š
- æŸ¥çœ‹æ¼”å”±ä¼šè¯¦æƒ…
- æŸ¥çœ‹æ¼”å”±ä¼šå‚ä¸äººæ•°

**æ•°æ®å±•ç¤º**:
- æ¼”å”±ä¼šåç§°ã€æ—¶é—´ã€åœ°ç‚¹ã€å‚ä¸äººæ•°
- æŒ‰æ—¶é—´æ’åºï¼ˆæœ€æ–°çš„åœ¨å‰ï¼‰

###### 2.3.6 æ­Œè¿·æ•°æ®æŸ¥çœ‹ï¼ˆFansï¼‰
**åŠŸèƒ½æè¿°**: æŸ¥çœ‹ä¸æœ¬ä¹é˜Ÿç›¸å…³çš„æ­Œè¿·ä¿¡æ¯ï¼ˆåªè¯»ï¼‰

**æ ¸å¿ƒåŠŸèƒ½**:

1. **æ­Œè¿·åˆ—è¡¨**
   - æ˜¾ç¤ºå…³æ³¨æœ¬ä¹é˜Ÿçš„æ‰€æœ‰æ­Œè¿·
   - æŸ¥çœ‹æ­Œè¿·åŸºæœ¬ä¿¡æ¯ï¼ˆå§“åã€æ€§åˆ«ã€å¹´é¾„ã€èŒä¸šã€å­¦å†ï¼‰

2. **æ­Œè¿·ç»Ÿè®¡åˆ†æ**
   - æ­Œè¿·æ€»æ•°ç»Ÿè®¡
   - å¹´é¾„æ®µåˆ†å¸ƒï¼ˆå›¾è¡¨å±•ç¤ºï¼‰
   - æ€§åˆ«åˆ†å¸ƒï¼ˆé¥¼å›¾ï¼‰
   - èŒä¸šåˆ†å¸ƒ
   - å­¦å†åˆ†å¸ƒ

3. **ä¸“è¾‘æ­Œè¿·åˆ†æ**
   - æŸ¥çœ‹å–œæ¬¢æœ¬ä¹é˜Ÿå„ä¸“è¾‘çš„æ­Œè¿·æ•°é‡
   - æœ€å—æ¬¢è¿çš„ä¸“è¾‘æ’è¡Œ

4. **æ­Œæ›²æ­Œè¿·åˆ†æ**
   - æŸ¥çœ‹å–œæ¬¢æœ¬ä¹é˜Ÿå„æ­Œæ›²çš„æ­Œè¿·æ•°é‡
   - æœ€å—æ¬¢è¿çš„æ­Œæ›²æ’è¡Œ

**æ•°æ®æ¥æº**:
- ä½¿ç”¨æ•°æ®åº“è§†å›¾ï¼š`v_band_fans`, `v_band_fan_age_stats`, `v_band_fan_gender_stats` ç­‰
- é€šè¿‡ `band_id` è¿‡æ»¤æ•°æ®


##### 2.4 æ­Œè¿·ç”¨æˆ·åŠŸèƒ½æ¨¡å—

###### 2.4.1 æ­Œè¿·ä¸»é¡µï¼ˆHomeï¼‰
**åŠŸèƒ½æè¿°**: æ˜¾ç¤ºæ­Œè¿·çš„ä¸ªäººæ¦‚è§ˆå’Œæ¨èå†…å®¹

**æ ¸å¿ƒåŠŸèƒ½**:
- æ˜¾ç¤ºä¸ªäººç»Ÿè®¡æ•°æ®ï¼ˆå…³æ³¨ä¹é˜Ÿæ•°ã€æ”¶è—ä¸“è¾‘æ•°ã€æ”¶è—æ­Œæ›²æ•°ã€ä¹è¯„æ•°ï¼‰
- æ¨èä¹é˜Ÿåˆ—è¡¨
- ä¸“è¾‘æ’è¡Œæ¦œï¼ˆTop 10ï¼‰
- æœ€æ–°æ¼”å”±ä¼šä¿¡æ¯
- å¿«é€Ÿè®¿é—®å„åŠŸèƒ½æ¨¡å—

###### 2.4.2 ä¸ªäººä¿¡æ¯ç®¡ç†ï¼ˆProfileï¼‰
**åŠŸèƒ½æè¿°**: ç®¡ç†æ­Œè¿·çš„ä¸ªäººä¿¡æ¯

**æ ¸å¿ƒåŠŸèƒ½**:
- æŸ¥çœ‹ä¸ªäººä¿¡æ¯ï¼ˆå§“åã€æ€§åˆ«ã€å¹´é¾„ã€èŒä¸šã€å­¦å†ï¼‰
- ç¼–è¾‘ä¸ªäººä¿¡æ¯
- ä¿®æ”¹å¯†ç ï¼ˆéœ€éªŒè¯æ—§å¯†ç ï¼‰
- æŸ¥çœ‹è´¦å·ç»Ÿè®¡æ•°æ®

**æ•°æ®å±•ç¤º**:
- ä¸ªäººåŸºæœ¬ä¿¡æ¯å¡ç‰‡
- å–œå¥½ç»Ÿè®¡ï¼ˆå…³æ³¨ã€æ”¶è—ã€å‚ä¸æ•°é‡ï¼‰
- è´¦å·åˆ›å»ºæ—¶é—´

###### 2.4.3 æˆ‘çš„å–œå¥½ç®¡ç†ï¼ˆFavoritesï¼‰
**åŠŸèƒ½æè¿°**: ç®¡ç†å–œæ¬¢çš„ä¹é˜Ÿã€ä¸“è¾‘ã€æ­Œæ›²å’Œæ¼”å”±ä¼š

**æ ¸å¿ƒåŠŸèƒ½**:

1. **æˆ‘å–œæ¬¢çš„ä¹é˜Ÿï¼ˆTab 1ï¼‰**
   - æ˜¾ç¤ºå·²å…³æ³¨çš„ä¹é˜Ÿåˆ—è¡¨ï¼ˆåˆ†é¡µï¼‰
   - æŸ¥çœ‹ä¹é˜Ÿè¯¦ç»†ä¿¡æ¯ï¼ˆç‚¹å‡»å±•å¼€ï¼‰
   - å–æ¶ˆå…³æ³¨ä¹é˜Ÿ
   - å¿«é€Ÿè·³è½¬åˆ°ä¹é˜Ÿçš„ä¸“è¾‘/æ­Œæ›²

2. **æˆ‘å–œæ¬¢çš„ä¸“è¾‘ï¼ˆTab 2ï¼‰**
   - æ˜¾ç¤ºå·²æ”¶è—çš„ä¸“è¾‘åˆ—è¡¨ï¼ˆåˆ†é¡µï¼‰
   - æŸ¥çœ‹ä¸“è¾‘è¯¦ç»†ä¿¡æ¯ï¼ˆæ­Œæ›²åˆ—è¡¨ã€è¯„åˆ†ï¼‰
   - å–æ¶ˆæ”¶è—ä¸“è¾‘
   - å¿«é€Ÿè·³è½¬åˆ°è¯„è®º/è¯„åˆ†

3. **æˆ‘å–œæ¬¢çš„æ­Œæ›²ï¼ˆTab 3ï¼‰**
   - æ˜¾ç¤ºå·²æ”¶è—çš„æ­Œæ›²åˆ—è¡¨ï¼ˆåˆ†é¡µï¼‰
   - æŸ¥çœ‹æ­Œæ›²è¯¦ç»†ä¿¡æ¯ï¼ˆè¯æ›²ä½œè€…ã€æ‰€å±ä¸“è¾‘ï¼‰
   - å–æ¶ˆæ”¶è—æ­Œæ›²
   - æŒ‰ä¸“è¾‘åˆ†ç»„æ˜¾ç¤º

4. **æˆ‘å‚åŠ çš„æ¼”å”±ä¼šï¼ˆTab 4ï¼‰**
   - æ˜¾ç¤ºå·²å‚åŠ çš„æ¼”å”±ä¼šåˆ—è¡¨ï¼ˆåˆ†é¡µï¼‰
   - æŸ¥çœ‹æ¼”å”±ä¼šè¯¦ç»†ä¿¡æ¯ï¼ˆæ—¶é—´ã€åœ°ç‚¹ã€ä¹é˜Ÿï¼‰
   - åˆ é™¤å‚åŠ è®°å½•
   - æŒ‰æ—¶é—´æ’åº

**äº¤äº’ç‰¹æ€§**:
- Tabåˆ‡æ¢æµè§ˆä¸åŒç±»å‹çš„å–œå¥½
- æ”¯æŒæœç´¢å’Œç­›é€‰
- æ‰¹é‡æ“ä½œï¼ˆå¯é€‰ï¼‰

###### 2.4.4 å‘ç°ä¸æµè§ˆï¼ˆDiscoveryï¼‰
**åŠŸèƒ½æè¿°**: æµè§ˆå’Œæœç´¢æ‰€æœ‰å†…å®¹ï¼Œæ·»åŠ å–œå¥½

**æ ¸å¿ƒåŠŸèƒ½**:

1. **å‘ç°ä¹é˜Ÿï¼ˆTab 1ï¼‰**
   - æ˜¾ç¤ºæ‰€æœ‰ä¹é˜Ÿåˆ—è¡¨ï¼ˆæ¨èæœªå…³æ³¨çš„ï¼‰
   - æœç´¢ä¹é˜Ÿï¼ˆæŒ‰åç§°ï¼‰
   - æŸ¥çœ‹ä¹é˜Ÿè¯¦ç»†ä¿¡æ¯
   - ä¸€é”®å…³æ³¨ä¹é˜Ÿ

2. **å‘ç°ä¸“è¾‘ï¼ˆTab 2ï¼‰**
   - æ˜¾ç¤ºæ‰€æœ‰ä¸“è¾‘åˆ—è¡¨
   - æœç´¢ä¸“è¾‘ï¼ˆæŒ‰åç§°ï¼‰
   - æŸ¥çœ‹ä¸“è¾‘è¯¦ç»†ä¿¡æ¯å’Œè¯„åˆ†
   - ä¸€é”®æ”¶è—ä¸“è¾‘
   - å¿«é€Ÿè¯„è®º/è¯„åˆ†

3. **å‘ç°æ­Œæ›²ï¼ˆTab 3ï¼‰**
   - æ˜¾ç¤ºæ‰€æœ‰æ­Œæ›²åˆ—è¡¨
   - æœç´¢æ­Œæ›²ï¼ˆæŒ‰åç§°ï¼‰
   - æŸ¥çœ‹æ­Œæ›²è¯¦ç»†ä¿¡æ¯
   - ä¸€é”®æ”¶è—æ­Œæ›²

4. **å‘ç°æ¼”å”±ä¼šï¼ˆTab 4ï¼‰**
   - æ˜¾ç¤ºæ‰€æœ‰æ¼”å”±ä¼šåˆ—è¡¨
   - æœç´¢æ¼”å”±ä¼šï¼ˆæŒ‰åç§°ã€åœ°ç‚¹ï¼‰
   - æŸ¥çœ‹æ¼”å”±ä¼šè¯¦ç»†ä¿¡æ¯
   - æ ‡è®°å‚åŠ 

5. **ä¸“è¾‘æ’è¡Œæ¦œï¼ˆTab 5ï¼‰**
   - æ˜¾ç¤ºè¯„åˆ†å‰10çš„ä¸“è¾‘ï¼ˆ`AlbumRanking`è¡¨ï¼‰
   - æŸ¥çœ‹æ’è¡Œæ¦œè¯¦æƒ…ï¼ˆè¯„åˆ†ã€è¯„è®ºæ•°ï¼‰
   - ç‚¹å‡»æŸ¥çœ‹ä¸“è¾‘è¯¦æƒ…
   - å¿«é€Ÿæ”¶è—æˆ–è¯„è®º
   - å®æ—¶æ›´æ–°ï¼ˆè§¦å‘å™¨è‡ªåŠ¨ç»´æŠ¤ï¼‰

**äº¤äº’ç‰¹æ€§**:
- Tabåˆ‡æ¢æµè§ˆä¸åŒç±»å‹çš„å†…å®¹
- å®æ—¶æœç´¢
- æ ‡è¯†å·²å…³æ³¨/æ”¶è—çŠ¶æ€
- å¿«é€Ÿæ“ä½œæŒ‰é’®

###### 2.4.5 ä¹è¯„ç®¡ç†ï¼ˆReviewsï¼‰
**åŠŸèƒ½æè¿°**: ç®¡ç†æˆ‘çš„ä¹è¯„å’Œæµè§ˆä»–äººä¹è¯„

**æ ¸å¿ƒåŠŸèƒ½**:

1. **æˆ‘çš„ä¹è¯„ï¼ˆTab 1ï¼‰**
   - æ˜¾ç¤ºæˆ‘å‘è¡¨çš„æ‰€æœ‰ä¹è¯„åˆ—è¡¨ï¼ˆåˆ†é¡µï¼‰
   - æŸ¥çœ‹ä¹è¯„è¯¦æƒ…ï¼ˆä¸“è¾‘ã€è¯„åˆ†ã€è¯„è®ºã€æ—¶é—´ï¼‰
   - ä¿®æ”¹ä¹è¯„ï¼ˆè¯„åˆ†å’Œè¯„è®ºï¼‰
   - åˆ é™¤ä¹è¯„
   - æŒ‰æ—¶é—´æ’åº

2. **å‘è¡¨ä¹è¯„ï¼ˆTab 2ï¼‰**
   - é€‰æ‹©ä¸“è¾‘ï¼ˆä¸‹æ‹‰é€‰æ‹©æˆ–æœç´¢ï¼‰
   - è¾“å…¥è¯„åˆ†ï¼ˆ1-10ï¼Œæ­¥é•¿0.5ï¼Œæ»‘å—æˆ–è¾“å…¥ï¼‰
   - è¾“å…¥è¯„è®ºå†…å®¹ï¼ˆæ–‡æœ¬æ¡†ï¼‰
   - æäº¤ä¹è¯„
   - **çº¦æŸ**: æ¯ä¸ªä¸“è¾‘åªèƒ½è¯„è®ºä¸€æ¬¡

3. **æµè§ˆä¹è¯„ï¼ˆå¯é€‰ï¼‰**
   - æŸ¥çœ‹æŸä¸“è¾‘çš„æ‰€æœ‰ä¹è¯„
   - æŒ‰è¯„åˆ†/æ—¶é—´æ’åº
   - æŸ¥çœ‹å¹³å‡åˆ†

**è§¦å‘å™¨æ•ˆæœ**:
- å‘è¡¨/ä¿®æ”¹/åˆ é™¤ä¹è¯„åï¼Œä¸“è¾‘å¹³å‡åˆ†è‡ªåŠ¨æ›´æ–°
- æ’è¡Œæ¦œè‡ªåŠ¨æ›´æ–°ï¼ˆå‰10åï¼‰

**æ•°æ®å±•ç¤º**:
- ä¸“è¾‘åç§°ã€ä¹é˜Ÿåç§°ã€æˆ‘çš„è¯„åˆ†ã€æˆ‘çš„è¯„è®ºã€è¯„è®ºæ—¶é—´
- ä¸“è¾‘å¹³å‡åˆ†ã€è¯„è®ºæ€»æ•°


##### 2.5 æ‰©å±•åŠŸèƒ½ï¼ˆå¯é€‰ï¼‰

###### 2.5.1 é«˜çº§æœç´¢
- å¤šæ¡ä»¶ç»„åˆæœç´¢
- æ¨¡ç³Šæœç´¢
- æœç´¢å†å²è®°å½•

###### 2.5.2 æ•°æ®å¯è§†åŒ–
- æ­Œè¿·å¹´é¾„åˆ†å¸ƒå›¾è¡¨
- ä¸“è¾‘è¯„åˆ†è¶‹åŠ¿å›¾
- æ¼”å”±ä¼šå‚ä¸ç»Ÿè®¡å›¾
- ä¹é˜Ÿæˆå‘˜å˜åŒ–æ—¶é—´çº¿

###### 2.5.3 é€šçŸ¥åŠŸèƒ½
- ä¹é˜Ÿå‘å¸ƒæ–°ä¸“è¾‘é€šçŸ¥å…³æ³¨çš„æ­Œè¿·
- æ¼”å”±ä¼šæé†’
- ä¹è¯„å›å¤é€šçŸ¥

###### 2.5.4 ç¤¾äº¤åŠŸèƒ½
- æ­Œè¿·ä¹‹é—´äº’ç›¸å…³æ³¨
- è¯„è®ºç‚¹èµ
- åˆ†äº«åŠŸèƒ½

###### 2.5.5 å¯¼å‡ºåŠŸèƒ½
- å¯¼å‡ºä¹é˜Ÿä¿¡æ¯æŠ¥è¡¨
- å¯¼å‡ºæ­Œè¿·ç»Ÿè®¡æ•°æ®
- å¯¼å‡ºä¹è¯„æ•°æ®

###### 2.5.6 æ‰¹é‡æ“ä½œ
- æ‰¹é‡æ·»åŠ æ­Œæ›²
- æ‰¹é‡å¯¼å…¥æˆå‘˜
- æ‰¹é‡åˆ é™¤


#### 3. æ•°æ®åº“é›†æˆ

##### 3.1 æ•°æ®åº“è¿æ¥
- ä½¿ç”¨è¿æ¥æ± ï¼ˆHikariCP/Druidï¼‰
- é…ç½®å¤šæ•°æ®æºï¼ˆå¯é€‰ï¼‰
- äº‹åŠ¡ç®¡ç†

##### 3.2 æ•°æ®åº“ç”¨æˆ·ä½¿ç”¨
æ ¹æ®ç™»å½•è§’è‰²è¿æ¥ä¸åŒçš„æ•°æ®åº“ç”¨æˆ·ï¼š

| åº”ç”¨è§’è‰² | æ•°æ®åº“ç”¨æˆ· | å¯†ç  | æƒé™ |
|---------|-----------|------|------|
| ç®¡ç†å‘˜ | admin_user | Admin@123456 | æ‰€æœ‰æƒé™ |
| ä¹é˜Ÿç”¨æˆ· | band_user | Band@123456 | ç®¡ç†ä¹é˜Ÿæ•°æ®ï¼ŒæŸ¥çœ‹æ­Œè¿·æ•°æ® |
| æ­Œè¿·ç”¨æˆ· | fan_user | Fan@123456 | ç®¡ç†ä¸ªäººæ•°æ®ï¼ŒæŸ¥çœ‹ä¹é˜Ÿæ•°æ® |

##### 3.3 è§†å›¾ä½¿ç”¨

å®é™…åº”ç”¨å±‚å¹¶æ²¡æœ‰ä½¿ç”¨è§†å›¾ï¼Œè€Œæ˜¯ç›´æ¥æŸ¥è¯¢ï¼Œè¿™æ˜¯å¯ä»¥æ”¹è¿›çš„åœ°æ–¹ã€‚


##### 3.4 è§¦å‘å™¨ä¾èµ–
åº”ç”¨éœ€è¦ä¾èµ–ä»¥ä¸‹è§¦å‘å™¨çš„è‡ªåŠ¨åŠŸèƒ½ï¼š
- æˆå‘˜äººæ•°è‡ªåŠ¨æ›´æ–°
- ä¸“è¾‘å¹³å‡åˆ†è‡ªåŠ¨è®¡ç®—
- æ’è¡Œæ¦œè‡ªåŠ¨æ›´æ–°
- æˆå‘˜æ—¶é—´é‡å æ£€æŸ¥

##### 3.5 æ•°æ®å®Œæ•´æ€§
- éµå®ˆå¤–é”®çº¦æŸ
- éµå®ˆCHECKçº¦æŸï¼ˆè¯„åˆ†èŒƒå›´ã€æ—¥æœŸé€»è¾‘ï¼‰
- éµå®ˆUNIQUEçº¦æŸï¼ˆé˜²æ­¢é‡å¤è¯„è®ºï¼‰

#### 4. æ¥å£è®¾è®¡

##### 4.1 RESTful APIè®¾è®¡åŸåˆ™

**åŸºç¡€URL**: `http://localhost:8080/api`

**è®¤è¯æ–¹å¼**: Session + Cookie

**å“åº”æ ¼å¼**: ç»Ÿä¸€JSONæ ¼å¼
```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {}
}
```

##### 4.2 æ ¸å¿ƒæ¥å£åˆ—è¡¨

###### 4.2.1 è®¤è¯æ¥å£
```
POST   /api/auth/login              # ç”¨æˆ·ç™»å½•
POST   /api/auth/logout             # ç”¨æˆ·ç™»å‡º
GET    /api/auth/current            # è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯
POST   /api/auth/register/band      # ä¹é˜Ÿç”¨æˆ·æ³¨å†Œ
POST   /api/auth/register/fan       # æ­Œè¿·ç”¨æˆ·æ³¨å†Œ
```

###### 4.2.2 ç®¡ç†å‘˜æ¥å£

**ä¹é˜Ÿç®¡ç†**
```
GET    /api/admin/bands                    # è·å–ä¹é˜Ÿåˆ—è¡¨ï¼ˆåˆ†é¡µï¼‰
GET    /api/admin/bands/list               # è·å–ä¹é˜Ÿåˆ—è¡¨ï¼ˆä¸åˆ†é¡µï¼‰
GET    /api/admin/bands/{id}               # è·å–ä¹é˜Ÿè¯¦æƒ…
GET    /api/admin/bands/{id}/detail        # è·å–ä¹é˜Ÿè¯¦ç»†ä¿¡æ¯ï¼ˆå«æˆå‘˜ï¼‰
POST   /api/admin/bands                    # åˆ›å»ºä¹é˜Ÿ
PUT    /api/admin/bands/{id}               # æ›´æ–°ä¹é˜Ÿä¿¡æ¯
DELETE /api/admin/bands/{id}               # åˆ é™¤ä¹é˜Ÿ
PUT    /api/admin/bands/{bandId}/leader/{memberId}  # è®¾ç½®é˜Ÿé•¿
```

**æˆå‘˜ç®¡ç†**
```
GET    /api/admin/members                  # è·å–æˆå‘˜åˆ—è¡¨ï¼ˆåˆ†é¡µï¼‰
GET    /api/admin/members/list             # è·å–æˆå‘˜åˆ—è¡¨ï¼ˆä¸åˆ†é¡µï¼‰
GET    /api/admin/members/{id}             # è·å–æˆå‘˜è¯¦æƒ…
GET    /api/admin/members/band/{bandId}    # æŒ‰ä¹é˜Ÿè·å–æˆå‘˜
POST   /api/admin/members                  # åˆ›å»ºæˆå‘˜
PUT    /api/admin/members/{id}             # æ›´æ–°æˆå‘˜ä¿¡æ¯
DELETE /api/admin/members/{id}             # åˆ é™¤æˆå‘˜
```

**ä¸“è¾‘ç®¡ç†**
```
GET    /api/admin/albums                   # è·å–ä¸“è¾‘åˆ—è¡¨ï¼ˆåˆ†é¡µï¼‰
GET    /api/admin/albums/list              # è·å–ä¸“è¾‘åˆ—è¡¨ï¼ˆä¸åˆ†é¡µï¼‰
GET    /api/admin/albums/{id}              # è·å–ä¸“è¾‘è¯¦æƒ…
GET    /api/admin/albums/{id}/detail       # è·å–ä¸“è¾‘è¯¦ç»†ä¿¡æ¯ï¼ˆå«æ­Œæ›²ï¼‰
GET    /api/admin/albums/band/{bandId}     # æŒ‰ä¹é˜Ÿè·å–ä¸“è¾‘
POST   /api/admin/albums                   # åˆ›å»ºä¸“è¾‘
PUT    /api/admin/albums/{id}              # æ›´æ–°ä¸“è¾‘ä¿¡æ¯
DELETE /api/admin/albums/{id}              # åˆ é™¤ä¸“è¾‘
```

**æ­Œæ›²ç®¡ç†**
```
GET    /api/admin/songs                    # è·å–æ­Œæ›²åˆ—è¡¨ï¼ˆåˆ†é¡µï¼‰
GET    /api/admin/songs/list               # è·å–æ­Œæ›²åˆ—è¡¨ï¼ˆä¸åˆ†é¡µï¼‰
GET    /api/admin/songs/{id}               # è·å–æ­Œæ›²è¯¦æƒ…
GET    /api/admin/songs/album/{albumId}    # æŒ‰ä¸“è¾‘è·å–æ­Œæ›²
POST   /api/admin/songs                    # åˆ›å»ºæ­Œæ›²
PUT    /api/admin/songs/{id}               # æ›´æ–°æ­Œæ›²ä¿¡æ¯
DELETE /api/admin/songs/{id}               # åˆ é™¤æ­Œæ›²
```

**æ¼”å”±ä¼šç®¡ç†**
```
GET    /api/admin/concerts                 # è·å–æ¼”å”±ä¼šåˆ—è¡¨ï¼ˆåˆ†é¡µï¼‰
GET    /api/admin/concerts/list            # è·å–æ¼”å”±ä¼šåˆ—è¡¨ï¼ˆä¸åˆ†é¡µï¼‰
GET    /api/admin/concerts/{id}            # è·å–æ¼”å”±ä¼šè¯¦æƒ…
GET    /api/admin/concerts/band/{bandId}   # æŒ‰ä¹é˜Ÿè·å–æ¼”å”±ä¼š
POST   /api/admin/concerts                 # åˆ›å»ºæ¼”å”±ä¼š
PUT    /api/admin/concerts/{id}            # æ›´æ–°æ¼”å”±ä¼šä¿¡æ¯
DELETE /api/admin/concerts/{id}            # åˆ é™¤æ¼”å”±ä¼š
```

**æ­Œè¿·ç®¡ç†**
```
GET    /api/admin/fans                     # è·å–æ­Œè¿·åˆ—è¡¨ï¼ˆåˆ†é¡µï¼‰
GET    /api/admin/fans/list                # è·å–æ­Œè¿·åˆ—è¡¨ï¼ˆä¸åˆ†é¡µï¼‰
GET    /api/admin/fans/{id}                # è·å–æ­Œè¿·è¯¦æƒ…
POST   /api/admin/fans                     # åˆ›å»ºæ­Œè¿·
PUT    /api/admin/fans/{id}                # æ›´æ–°æ­Œè¿·ä¿¡æ¯
DELETE /api/admin/fans/{id}                # åˆ é™¤æ­Œè¿·
```

**ä¹è¯„ç®¡ç†**
```
GET    /api/admin/reviews                  # è·å–ä¹è¯„åˆ—è¡¨ï¼ˆåˆ†é¡µï¼‰
GET    /api/admin/reviews/list             # è·å–ä¹è¯„åˆ—è¡¨ï¼ˆä¸åˆ†é¡µï¼‰
GET    /api/admin/reviews/{id}             # è·å–ä¹è¯„è¯¦æƒ…
GET    /api/admin/reviews/album/{albumId}  # æŒ‰ä¸“è¾‘è·å–ä¹è¯„
GET    /api/admin/reviews/fan/{fanId}      # æŒ‰æ­Œè¿·è·å–ä¹è¯„
DELETE /api/admin/reviews/{id}             # åˆ é™¤ä¹è¯„
```

**ç»Ÿè®¡æ¥å£**
```
GET    /api/admin/statistics/overall       # è·å–ç³»ç»Ÿæ€»ä½“ç»Ÿè®¡
GET    /api/admin/statistics/albums/top10  # è·å–ä¸“è¾‘æ’è¡Œæ¦œå‰10
GET    /api/admin/statistics/albums/rankings  # è·å–å®Œæ•´ä¸“è¾‘æ’è¡Œæ¦œ
GET    /api/admin/statistics/bands/{bandId}   # è·å–ä¹é˜Ÿç»Ÿè®¡æ•°æ®
```

###### 4.2.3 ä¹é˜Ÿç”¨æˆ·æ¥å£

**ä¹é˜Ÿä¿¡æ¯**
```
GET    /api/band/info                      # è·å–å½“å‰ä¹é˜Ÿä¿¡æ¯
PUT    /api/band/info                      # æ›´æ–°ä¹é˜Ÿä¿¡æ¯
GET    /api/band/statistics                # è·å–ç»Ÿè®¡æ•°æ®
PUT    /api/band/password                  # ä¿®æ”¹å¯†ç 
DELETE /api/band/delete                    # åˆ é™¤ä¹é˜Ÿè´¦å·
```

**æˆå‘˜ç®¡ç†**
```
GET    /api/band/members                   # è·å–æˆå‘˜åˆ—è¡¨
POST   /api/band/members                   # æ·»åŠ æˆå‘˜
PUT    /api/band/members/{id}              # æ›´æ–°æˆå‘˜ä¿¡æ¯
DELETE /api/band/members/{id}              # åˆ é™¤æˆå‘˜
```

**ä¸“è¾‘ç®¡ç†**
```
GET    /api/band/albums                    # è·å–ä¸“è¾‘åˆ—è¡¨
GET    /api/band/albums/recent             # è·å–æœ€æ–°ä¸“è¾‘
GET    /api/band/albums/{id}/songs         # è·å–ä¸“è¾‘æ­Œæ›²
GET    /api/band/albums/{id}/reviews       # è·å–ä¸“è¾‘ä¹è¯„
POST   /api/band/albums                    # å‘å¸ƒä¸“è¾‘
PUT    /api/band/albums/{id}               # æ›´æ–°ä¸“è¾‘ä¿¡æ¯
DELETE /api/band/albums/{id}               # åˆ é™¤ä¸“è¾‘
```

**æ­Œæ›²ç®¡ç†**
```
GET    /api/band/songs                     # è·å–æ­Œæ›²åˆ—è¡¨
POST   /api/band/songs                     # æ·»åŠ æ­Œæ›²
PUT    /api/band/songs/{id}                # æ›´æ–°æ­Œæ›²ä¿¡æ¯
DELETE /api/band/songs/{id}                # åˆ é™¤æ­Œæ›²
```

**æ¼”å”±ä¼šç®¡ç†**
```
GET    /api/band/concerts                  # è·å–æ¼”å”±ä¼šåˆ—è¡¨
GET    /api/band/concerts/recent           # è·å–æœ€æ–°æ¼”å”±ä¼š
POST   /api/band/concerts                  # å‘å¸ƒæ¼”å”±ä¼š
PUT    /api/band/concerts/{id}             # æ›´æ–°æ¼”å”±ä¼šä¿¡æ¯
DELETE /api/band/concerts/{id}             # åˆ é™¤æ¼”å”±ä¼š
```

**æ­Œè¿·æ•°æ®æŸ¥çœ‹**
```
GET    /api/band/fans                      # è·å–æ­Œè¿·åˆ—è¡¨
GET    /api/band/fans/statistics           # è·å–æ­Œè¿·ç»Ÿè®¡æ•°æ®
GET    /api/band/fans/age-distribution     # è·å–æ­Œè¿·å¹´é¾„åˆ†å¸ƒ
GET    /api/band/fans/education-distribution  # è·å–æ­Œè¿·å­¦å†åˆ†å¸ƒ
GET    /api/band/fans/albums               # è·å–å–œæ¬¢ä¸“è¾‘çš„æ­Œè¿·ç»Ÿè®¡
GET    /api/band/fans/songs                # è·å–å–œæ¬¢æ­Œæ›²çš„æ­Œè¿·ç»Ÿè®¡
```

###### 4.2.4 æ­Œè¿·ç”¨æˆ·æ¥å£

**ä¸ªäººä¿¡æ¯**
```
GET    /api/fan/info                       # è·å–å½“å‰æ­Œè¿·ä¿¡æ¯
PUT    /api/fan/info                       # æ›´æ–°ä¸ªäººä¿¡æ¯
GET    /api/fan/statistics                 # è·å–ç»Ÿè®¡æ•°æ®
PUT    /api/fan/password                   # ä¿®æ”¹å¯†ç 
DELETE /api/fan/delete                     # åˆ é™¤æ­Œè¿·è´¦å·
```

**å–œå¥½ç®¡ç†**
```
GET    /api/fan/favorites/bands            # è·å–å–œæ¬¢çš„ä¹é˜Ÿï¼ˆåˆ†é¡µï¼‰
POST   /api/fan/favorites/bands            # å…³æ³¨ä¹é˜Ÿ
DELETE /api/fan/favorites/bands/{bandId}   # å–æ¶ˆå…³æ³¨ä¹é˜Ÿ

GET    /api/fan/favorites/albums           # è·å–å–œæ¬¢çš„ä¸“è¾‘ï¼ˆåˆ†é¡µï¼‰
POST   /api/fan/favorites/albums           # æ”¶è—ä¸“è¾‘
DELETE /api/fan/favorites/albums/{albumId} # å–æ¶ˆæ”¶è—ä¸“è¾‘

GET    /api/fan/favorites/songs            # è·å–å–œæ¬¢çš„æ­Œæ›²ï¼ˆåˆ†é¡µï¼‰
POST   /api/fan/favorites/songs            # æ”¶è—æ­Œæ›²
DELETE /api/fan/favorites/songs/{songId}   # å–æ¶ˆæ”¶è—æ­Œæ›²

GET    /api/fan/favorites/concerts         # è·å–å‚åŠ çš„æ¼”å”±ä¼šï¼ˆåˆ†é¡µï¼‰
POST   /api/fan/favorites/concerts         # æ·»åŠ æ¼”å”±ä¼šå‚ä¸è®°å½•
DELETE /api/fan/favorites/concerts/{concertId}  # åˆ é™¤å‚ä¸è®°å½•
```

**å‘ç°ä¸æµè§ˆ**
```
GET    /api/fan/discovery/bands            # å‘ç°ä¹é˜Ÿï¼ˆåˆ†é¡µï¼Œæ”¯æŒæœç´¢ï¼‰
GET    /api/fan/discovery/albums           # å‘ç°ä¸“è¾‘ï¼ˆåˆ†é¡µï¼Œæ”¯æŒæœç´¢ï¼‰
GET    /api/fan/discovery/songs            # å‘ç°æ­Œæ›²ï¼ˆåˆ†é¡µï¼Œæ”¯æŒæœç´¢ï¼‰
GET    /api/fan/concerts/all               # æµè§ˆæ‰€æœ‰æ¼”å”±ä¼š
GET    /api/fan/discovery/albums/ranking   # æŸ¥çœ‹ä¸“è¾‘æ’è¡Œæ¦œ
```

**ä¹è¯„ç®¡ç†**
```
GET    /api/fan/reviews/my                 # è·å–æˆ‘çš„ä¹è¯„ï¼ˆåˆ†é¡µï¼‰
POST   /api/fan/reviews                    # å‘è¡¨ä¹è¯„
PUT    /api/fan/reviews/{id}               # ä¿®æ”¹ä¹è¯„
DELETE /api/fan/reviews/{id}               # åˆ é™¤ä¹è¯„
```

###### 4.2.5 å…¬å…±æ¥å£ï¼ˆæ— éœ€ç™»å½•ï¼‰

**ä¹é˜Ÿä¿¡æ¯**
```
GET    /api/bands                          # è·å–ä¹é˜Ÿåˆ—è¡¨ï¼ˆåˆ†é¡µï¼‰
GET    /api/bands/list                     # è·å–ä¹é˜Ÿåˆ—è¡¨ï¼ˆä¸åˆ†é¡µï¼‰
GET    /api/bands/{id}                     # è·å–ä¹é˜Ÿè¯¦æƒ…
GET    /api/bands/{id}/detail              # è·å–ä¹é˜Ÿè¯¦ç»†ä¿¡æ¯
GET    /api/bands/name/{name}              # æ ¹æ®åç§°æŸ¥è¯¢ä¹é˜Ÿ
```

**ä¸“è¾‘ä¿¡æ¯**
```
GET    /api/albums                         # è·å–ä¸“è¾‘åˆ—è¡¨ï¼ˆåˆ†é¡µï¼‰
GET    /api/albums/list                    # è·å–ä¸“è¾‘åˆ—è¡¨ï¼ˆä¸åˆ†é¡µï¼‰
GET    /api/albums/{id}                    # è·å–ä¸“è¾‘è¯¦æƒ…
GET    /api/albums/{id}/detail             # è·å–ä¸“è¾‘è¯¦ç»†ä¿¡æ¯
GET    /api/albums/band/{bandId}           # æŒ‰ä¹é˜Ÿè·å–ä¸“è¾‘
```

**æ­Œæ›²ä¿¡æ¯**
```
GET    /api/songs                          # è·å–æ­Œæ›²åˆ—è¡¨ï¼ˆåˆ†é¡µï¼‰
GET    /api/songs/list                     # è·å–æ­Œæ›²åˆ—è¡¨ï¼ˆä¸åˆ†é¡µï¼‰
GET    /api/songs/{id}                     # è·å–æ­Œæ›²è¯¦æƒ…
GET    /api/songs/album/{albumId}          # æŒ‰ä¸“è¾‘è·å–æ­Œæ›²
```

**æ¼”å”±ä¼šä¿¡æ¯**
```
GET    /api/concerts                       # è·å–æ¼”å”±ä¼šåˆ—è¡¨ï¼ˆåˆ†é¡µï¼‰
GET    /api/concerts/list                  # è·å–æ¼”å”±ä¼šåˆ—è¡¨ï¼ˆä¸åˆ†é¡µï¼‰
GET    /api/concerts/{id}                  # è·å–æ¼”å”±ä¼šè¯¦æƒ…
GET    /api/concerts/band/{bandId}         # æŒ‰ä¹é˜Ÿè·å–æ¼”å”±ä¼š
```

**ä¹è¯„ä¿¡æ¯**
```
GET    /api/reviews                        # è·å–ä¹è¯„åˆ—è¡¨ï¼ˆåˆ†é¡µï¼‰
GET    /api/reviews/{id}                   # è·å–ä¹è¯„è¯¦æƒ…
GET    /api/reviews/album/{albumId}        # æŒ‰ä¸“è¾‘è·å–ä¹è¯„
GET    /api/reviews/fan/{fanId}            # æŒ‰æ­Œè¿·è·å–ä¹è¯„
```

##### 4.3 è¯·æ±‚å‚æ•°è¯´æ˜

**åˆ†é¡µå‚æ•°**ï¼ˆé€‚ç”¨äºæ‰€æœ‰åˆ—è¡¨æ¥å£ï¼‰:
- `pageNum`: é¡µç ï¼Œé»˜è®¤1
- `pageSize`: æ¯é¡µæ•°é‡ï¼Œé»˜è®¤10æˆ–20

**æœç´¢å‚æ•°**ï¼ˆé€‚ç”¨äºæ”¯æŒæœç´¢çš„æ¥å£ï¼‰:
- `name`: åç§°æ¨¡ç³Šæœç´¢
- `title`: æ ‡é¢˜æ¨¡ç³Šæœç´¢

**ç­›é€‰å‚æ•°**:
- `bandId`: æŒ‰ä¹é˜Ÿç­›é€‰
- `albumId`: æŒ‰ä¸“è¾‘ç­›é€‰
- `fanId`: æŒ‰æ­Œè¿·ç­›é€‰

##### 4.4 å“åº”çŠ¶æ€ç 

| çŠ¶æ€ç  | è¯´æ˜ |
|--------|------|
| 200 | æˆåŠŸ |
| 400 | è¯·æ±‚å‚æ•°é”™è¯¯ |
| 401 | æœªç™»å½•æˆ–ç™»å½•å·²è¿‡æœŸ |
| 403 | æ— æƒé™è®¿é—® |
| 404 | èµ„æºä¸å­˜åœ¨ |
| 500 | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ |

##### 4.5 ä¸šåŠ¡é”™è¯¯ç 

| é”™è¯¯ç  | è¯´æ˜ |
|--------|------|
| 1001 | ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ |
| 2001 | ä¹é˜Ÿä¸å­˜åœ¨ |
| 3001 | æˆå‘˜ä¸å­˜åœ¨ |
| 4001 | ä¸“è¾‘ä¸å­˜åœ¨ |
| 5001 | æ­Œæ›²ä¸å­˜åœ¨ |
| 6001 | æ¼”å”±ä¼šä¸å­˜åœ¨ |
| 7001 | æ­Œè¿·ä¸å­˜åœ¨ |
| 8001 | ä¹è¯„ä¸å­˜åœ¨ |
| 8002 | å·²è¯„è®ºè¿‡è¯¥ä¸“è¾‘ |
| 9001 | æ•°æ®å·²å­˜åœ¨ |


#### 5. é¡µé¢è®¾è®¡

##### 5.1 å…¬å…±é¡µé¢

###### 5.1.1 ç™»å½•é¡µé¢ï¼ˆLogin.vueï¼‰
**è·¯ç”±**: `/login`

**åŠŸèƒ½**:
- è§’è‰²é€‰æ‹©ï¼ˆä¸‹æ‹‰æ¡†ï¼šç®¡ç†å‘˜/ä¹é˜Ÿç”¨æˆ·/æ­Œè¿·ç”¨æˆ·ï¼‰
- ç”¨æˆ·åè¾“å…¥
- å¯†ç è¾“å…¥ï¼ˆå¯†ç æ¡†ï¼‰
- ç™»å½•æŒ‰é’®
- æ³¨å†Œé“¾æ¥ï¼ˆè·³è½¬åˆ°ä¹é˜Ÿæ³¨å†Œæˆ–æ­Œè¿·æ³¨å†Œï¼‰

**UIè®¾è®¡**:
- å±…ä¸­å¡ç‰‡å¼å¸ƒå±€
- å“ç‰ŒLogoå’Œæ ‡é¢˜
- è¡¨å•éªŒè¯æç¤º
- ç™»å½•æˆåŠŸåæ ¹æ®è§’è‰²è·³è½¬åˆ°å¯¹åº”ä¸»é¡µ

###### 5.1.2 ä¹é˜Ÿæ³¨å†Œé¡µé¢ï¼ˆRegisterBand.vueï¼‰
**è·¯ç”±**: `/register/band`

**åŠŸèƒ½**:
- ä¹é˜Ÿåç§°è¾“å…¥
- æˆç«‹æ—¥æœŸé€‰æ‹©ï¼ˆæ—¥æœŸé€‰æ‹©å™¨ï¼‰
- ä¹é˜Ÿç®€ä»‹è¾“å…¥ï¼ˆæ–‡æœ¬åŸŸï¼‰
- å¯†ç è¾“å…¥å’Œç¡®è®¤
- æ³¨å†ŒæŒ‰é’®
- è¿”å›ç™»å½•é“¾æ¥

**æç¤º**:
- æ˜¾ç¤ºè‡ªåŠ¨ç”Ÿæˆçš„ç”¨æˆ·åè§„åˆ™è¯´æ˜
- æ³¨å†ŒæˆåŠŸåæ˜¾ç¤ºç”Ÿæˆçš„ç”¨æˆ·å

###### 5.1.3 æ­Œè¿·æ³¨å†Œé¡µé¢ï¼ˆRegisterFan.vueï¼‰
**è·¯ç”±**: `/register/fan`

**åŠŸèƒ½**:
- å§“åè¾“å…¥
- æ€§åˆ«é€‰æ‹©ï¼ˆå•é€‰ï¼šç”·/å¥³/å…¶ä»–ï¼‰
- å¹´é¾„è¾“å…¥ï¼ˆæ•°å­—è¾“å…¥ï¼‰
- èŒä¸šè¾“å…¥
- å­¦å†é€‰æ‹©ï¼ˆä¸‹æ‹‰æ¡†ï¼‰
- å¯†ç è¾“å…¥å’Œç¡®è®¤
- æ³¨å†ŒæŒ‰é’®
- è¿”å›ç™»å½•é“¾æ¥

##### 5.2 ç®¡ç†å‘˜é¡µé¢

**å¸ƒå±€**: å·¦ä¾§å¯¼èˆªèœå• + é¡¶éƒ¨æ ‡é¢˜æ  + ä¸»å†…å®¹åŒº

###### 5.2.1 ç®¡ç†å‘˜ä¸»é¡µï¼ˆDashboard.vueï¼‰
**è·¯ç”±**: `/admin/dashboard`

**åŠŸèƒ½**:
- ç³»ç»Ÿæ€»ä½“ç»Ÿè®¡å¡ç‰‡ï¼ˆä¹é˜Ÿæ•°ã€æˆå‘˜æ•°ã€ä¸“è¾‘æ•°ã€æ­Œæ›²æ•°ã€æ¼”å”±ä¼šæ•°ã€æ­Œè¿·æ•°ã€ä¹è¯„æ•°ï¼‰
- æ•°æ®å¯è§†åŒ–å›¾è¡¨ï¼ˆå¯é€‰ï¼‰
- å¿«é€Ÿæ“ä½œå…¥å£

**UIç»„ä»¶**:
- ç»Ÿè®¡å¡ç‰‡ï¼ˆel-cardï¼‰
- å›¾è¡¨ï¼ˆEChartsï¼Œå¯é€‰ï¼‰
- å¿«æ·æŒ‰é’®

###### 5.2.2 ä¹é˜Ÿç®¡ç†é¡µé¢ï¼ˆBands.vueï¼‰
**è·¯ç”±**: `/admin/bands`

**åŠŸèƒ½**:
- ä¹é˜Ÿåˆ—è¡¨è¡¨æ ¼ï¼ˆåˆ†é¡µï¼‰
- æœç´¢æ¡†ï¼ˆæŒ‰åç§°æœç´¢ï¼‰
- æ·»åŠ ä¹é˜ŸæŒ‰é’®
- æ“ä½œåˆ—ï¼šæŸ¥çœ‹è¯¦æƒ…ã€ç¼–è¾‘ã€åˆ é™¤ã€è®¾ç½®é˜Ÿé•¿

**è¡¨æ ¼åˆ—**:
- ä¹é˜ŸIDã€åç§°ã€æˆç«‹æ—¥æœŸã€ç®€ä»‹ã€é˜Ÿé•¿ã€æˆå‘˜äººæ•°ã€æ“ä½œ

**å¯¹è¯æ¡†**:
- æ·»åŠ /ç¼–è¾‘ä¹é˜Ÿå¯¹è¯æ¡†ï¼ˆè¡¨å•ï¼‰
- æŸ¥çœ‹è¯¦æƒ…å¯¹è¯æ¡†ï¼ˆå±•ç¤ºæˆå‘˜åˆ—è¡¨ï¼‰
- è®¾ç½®é˜Ÿé•¿å¯¹è¯æ¡†ï¼ˆé€‰æ‹©æˆå‘˜ï¼‰

###### 5.2.3 æˆå‘˜ç®¡ç†é¡µé¢ï¼ˆMembers.vueï¼‰
**è·¯ç”±**: `/admin/members`

**åŠŸèƒ½**:
- æˆå‘˜åˆ—è¡¨è¡¨æ ¼ï¼ˆåˆ†é¡µï¼‰
- æŒ‰ä¹é˜Ÿç­›é€‰ï¼ˆä¸‹æ‹‰æ¡†ï¼‰
- æ·»åŠ æˆå‘˜æŒ‰é’®
- æ“ä½œåˆ—ï¼šæŸ¥çœ‹è¯¦æƒ…ã€ç¼–è¾‘ã€åˆ é™¤

**è¡¨æ ¼åˆ—**:
- æˆå‘˜IDã€å§“åã€æ€§åˆ«ã€å¹´é¾„ã€æ‰€å±ä¹é˜Ÿã€åˆ†å·¥ã€åŠ å…¥æ—¥æœŸã€çŠ¶æ€ã€æ“ä½œ

**å¯¹è¯æ¡†**:
- æ·»åŠ /ç¼–è¾‘æˆå‘˜å¯¹è¯æ¡†ï¼ˆè¡¨å•ï¼ŒåŒ…å«ä¹é˜Ÿé€‰æ‹©ï¼‰

###### 5.2.4 ä¸“è¾‘ç®¡ç†é¡µé¢ï¼ˆAlbums.vueï¼‰
**è·¯ç”±**: `/admin/albums`

**åŠŸèƒ½**:
- ä¸“è¾‘åˆ—è¡¨è¡¨æ ¼ï¼ˆåˆ†é¡µï¼‰
- æŒ‰ä¹é˜Ÿç­›é€‰ï¼ˆä¸‹æ‹‰æ¡†ï¼‰
- æœç´¢æ¡†ï¼ˆæŒ‰åç§°æœç´¢ï¼‰
- æ·»åŠ ä¸“è¾‘æŒ‰é’®
- æ“ä½œåˆ—ï¼šæŸ¥çœ‹è¯¦æƒ…ã€ç¼–è¾‘ã€åˆ é™¤

**è¡¨æ ¼åˆ—**:
- ä¸“è¾‘IDã€åç§°ã€æ‰€å±ä¹é˜Ÿã€å‘è¡Œæ—¥æœŸã€æ–‡æ¡ˆã€å¹³å‡è¯„åˆ†ã€æ“ä½œ

**å¯¹è¯æ¡†**:
- æ·»åŠ /ç¼–è¾‘ä¸“è¾‘å¯¹è¯æ¡†ï¼ˆè¡¨å•ï¼ŒåŒ…å«ä¹é˜Ÿé€‰æ‹©ï¼‰
- æŸ¥çœ‹è¯¦æƒ…å¯¹è¯æ¡†ï¼ˆå±•ç¤ºæ­Œæ›²åˆ—è¡¨å’Œè¯„åˆ†ç»Ÿè®¡ï¼‰

###### 5.2.5 æ­Œæ›²ç®¡ç†é¡µé¢ï¼ˆSongs.vueï¼‰
**è·¯ç”±**: `/admin/songs`

**åŠŸèƒ½**:
- æ­Œæ›²åˆ—è¡¨è¡¨æ ¼ï¼ˆåˆ†é¡µï¼‰
- æŒ‰ä¸“è¾‘ç­›é€‰ï¼ˆä¸‹æ‹‰æ¡†ï¼‰
- æœç´¢æ¡†ï¼ˆæŒ‰åç§°æœç´¢ï¼‰
- æ·»åŠ æ­Œæ›²æŒ‰é’®
- æ“ä½œåˆ—ï¼šæŸ¥çœ‹è¯¦æƒ…ã€ç¼–è¾‘ã€åˆ é™¤

**è¡¨æ ¼åˆ—**:
- æ­Œæ›²IDã€åç§°ã€æ‰€å±ä¸“è¾‘ã€æ‰€å±ä¹é˜Ÿã€è¯ä½œè€…ã€æ›²ä½œè€…ã€æ“ä½œ

**å¯¹è¯æ¡†**:
- æ·»åŠ /ç¼–è¾‘æ­Œæ›²å¯¹è¯æ¡†ï¼ˆè¡¨å•ï¼ŒåŒ…å«ä¸“è¾‘é€‰æ‹©ï¼‰

###### 5.2.6 æ¼”å”±ä¼šç®¡ç†é¡µé¢ï¼ˆConcerts.vueï¼‰
**è·¯ç”±**: `/admin/concerts`

**åŠŸèƒ½**:
- æ¼”å”±ä¼šåˆ—è¡¨è¡¨æ ¼ï¼ˆåˆ†é¡µï¼‰
- æŒ‰ä¹é˜Ÿç­›é€‰ï¼ˆä¸‹æ‹‰æ¡†ï¼‰
- æ·»åŠ æ¼”å”±ä¼šæŒ‰é’®
- æ“ä½œåˆ—ï¼šæŸ¥çœ‹è¯¦æƒ…ã€ç¼–è¾‘ã€åˆ é™¤

**è¡¨æ ¼åˆ—**:
- æ¼”å”±ä¼šIDã€åç§°ã€ä¸»åŠä¹é˜Ÿã€æ—¶é—´ã€åœ°ç‚¹ã€å‚ä¸äººæ•°ã€æ“ä½œ

**å¯¹è¯æ¡†**:
- æ·»åŠ /ç¼–è¾‘æ¼”å”±ä¼šå¯¹è¯æ¡†ï¼ˆè¡¨å•ï¼ŒåŒ…å«ä¹é˜Ÿé€‰æ‹©ã€æ—¥æœŸæ—¶é—´é€‰æ‹©å™¨ï¼‰

###### 5.2.7 æ­Œè¿·ç®¡ç†é¡µé¢ï¼ˆFans.vueï¼‰
**è·¯ç”±**: `/admin/fans`

**åŠŸèƒ½**:
- æ­Œè¿·åˆ—è¡¨è¡¨æ ¼ï¼ˆåˆ†é¡µï¼‰
- æœç´¢æ¡†ï¼ˆæŒ‰å§“åæœç´¢ï¼‰
- æ·»åŠ æ­Œè¿·æŒ‰é’®
- æ“ä½œåˆ—ï¼šæŸ¥çœ‹è¯¦æƒ…ã€ç¼–è¾‘ã€åˆ é™¤

**è¡¨æ ¼åˆ—**:
- æ­Œè¿·IDã€å§“åã€æ€§åˆ«ã€å¹´é¾„ã€èŒä¸šã€å­¦å†ã€æ“ä½œ

**å¯¹è¯æ¡†**:
- æ·»åŠ /ç¼–è¾‘æ­Œè¿·å¯¹è¯æ¡†ï¼ˆè¡¨å•ï¼‰
- æŸ¥çœ‹è¯¦æƒ…å¯¹è¯æ¡†ï¼ˆå±•ç¤ºå–œå¥½ç»Ÿè®¡ï¼‰

###### 5.2.8 ä¹è¯„ç®¡ç†é¡µé¢ï¼ˆReviews.vueï¼‰
**è·¯ç”±**: `/admin/reviews`

**åŠŸèƒ½**:
- ä¹è¯„åˆ—è¡¨è¡¨æ ¼ï¼ˆåˆ†é¡µï¼‰
- æŒ‰ä¸“è¾‘ç­›é€‰ï¼ˆä¸‹æ‹‰æ¡†ï¼‰
- æŒ‰æ­Œè¿·ç­›é€‰ï¼ˆä¸‹æ‹‰æ¡†ï¼‰
- æ“ä½œåˆ—ï¼šæŸ¥çœ‹è¯¦æƒ…ã€åˆ é™¤

**è¡¨æ ¼åˆ—**:
- ä¹è¯„IDã€æ­Œè¿·å§“åã€ä¸“è¾‘åç§°ã€ä¹é˜Ÿåç§°ã€è¯„åˆ†ã€è¯„è®ºå†…å®¹ã€è¯„è®ºæ—¶é—´ã€æ“ä½œ

**æ’åº**:
- æ”¯æŒæŒ‰è¯„åˆ†ã€æ—¶é—´æ’åº

##### 5.3 ä¹é˜Ÿç”¨æˆ·é¡µé¢

**å¸ƒå±€**: å·¦ä¾§å¯¼èˆªèœå• + é¡¶éƒ¨æ ‡é¢˜æ  + ä¸»å†…å®¹åŒº

###### 5.3.1 ä¹é˜Ÿä¸»é¡µï¼ˆHome.vueï¼‰
**è·¯ç”±**: `/band/home`

**åŠŸèƒ½**:
- ä¹é˜Ÿä¿¡æ¯å¡ç‰‡ï¼ˆåç§°ã€æˆç«‹æ—¶é—´ã€ç®€ä»‹ã€æˆå‘˜äººæ•°ï¼‰
- ç»Ÿè®¡æ•°æ®å¡ç‰‡ï¼ˆä¸“è¾‘æ•°ã€æ­Œæ›²æ•°ã€æ­Œè¿·æ•°ï¼‰
- æœ€æ–°ä¸“è¾‘åˆ—è¡¨ï¼ˆæœ€è¿‘3å¼ ï¼‰
- æœ€æ–°æ¼”å”±ä¼šåˆ—è¡¨ï¼ˆæœ€è¿‘3åœºï¼‰
- å¿«é€Ÿæ“ä½œæŒ‰é’®

**UIç»„ä»¶**:
- ä¿¡æ¯å¡ç‰‡ï¼ˆel-cardï¼‰
- ç»Ÿè®¡å¡ç‰‡
- åˆ—è¡¨ï¼ˆel-listï¼‰
- å¿«æ·æŒ‰é’®

###### 5.3.2 æˆå‘˜ç®¡ç†é¡µé¢ï¼ˆMembers.vueï¼‰
**è·¯ç”±**: `/band/members`

**åŠŸèƒ½**:
- æˆå‘˜åˆ—è¡¨è¡¨æ ¼
- æ·»åŠ æˆå‘˜æŒ‰é’®
- æ“ä½œåˆ—ï¼šç¼–è¾‘ã€åˆ é™¤
- æ ‡è¯†é˜Ÿé•¿

**è¡¨æ ¼åˆ—**:
- å§“åã€æ€§åˆ«ã€å¹´é¾„ã€åˆ†å·¥ã€åŠ å…¥æ—¥æœŸã€çŠ¶æ€ã€æ“ä½œ

**å¯¹è¯æ¡†**:
- æ·»åŠ /ç¼–è¾‘æˆå‘˜å¯¹è¯æ¡†ï¼ˆè¡¨å•ï¼‰

###### 5.3.3 ä¸“è¾‘ç®¡ç†é¡µé¢ï¼ˆAlbums.vueï¼‰
**è·¯ç”±**: `/band/albums`

**åŠŸèƒ½**:
- ä¸“è¾‘åˆ—è¡¨è¡¨æ ¼
- å‘å¸ƒä¸“è¾‘æŒ‰é’®
- æ“ä½œåˆ—ï¼šæŸ¥çœ‹è¯¦æƒ…ã€ç¼–è¾‘ã€åˆ é™¤ã€æŸ¥çœ‹ä¹è¯„

**è¡¨æ ¼åˆ—**:
- åç§°ã€å‘è¡Œæ—¥æœŸã€æ–‡æ¡ˆã€å¹³å‡è¯„åˆ†ã€æ­Œæ›²æ•°ã€æ“ä½œ

**å¯¹è¯æ¡†**:
- å‘å¸ƒ/ç¼–è¾‘ä¸“è¾‘å¯¹è¯æ¡†ï¼ˆè¡¨å•ï¼‰
- æŸ¥çœ‹è¯¦æƒ…å¯¹è¯æ¡†ï¼ˆå±•ç¤ºæ­Œæ›²åˆ—è¡¨ï¼‰
- æŸ¥çœ‹ä¹è¯„å¯¹è¯æ¡†ï¼ˆå±•ç¤ºä¹è¯„åˆ—è¡¨ï¼‰

###### 5.3.4 æ­Œæ›²ç®¡ç†é¡µé¢ï¼ˆSongs.vueï¼‰
**è·¯ç”±**: `/band/songs`

**åŠŸèƒ½**:
- æ­Œæ›²åˆ—è¡¨è¡¨æ ¼ï¼ˆæŒ‰ä¸“è¾‘åˆ†ç»„ï¼‰
- æ·»åŠ æ­Œæ›²æŒ‰é’®
- æ“ä½œåˆ—ï¼šç¼–è¾‘ã€åˆ é™¤

**è¡¨æ ¼åˆ—**:
- åç§°ã€æ‰€å±ä¸“è¾‘ã€è¯ä½œè€…ã€æ›²ä½œè€…ã€æ“ä½œ

**å¯¹è¯æ¡†**:
- æ·»åŠ /ç¼–è¾‘æ­Œæ›²å¯¹è¯æ¡†ï¼ˆè¡¨å•ï¼ŒåŒ…å«ä¸“è¾‘é€‰æ‹©ï¼‰

###### 5.3.5 æ¼”å”±ä¼šç®¡ç†é¡µé¢ï¼ˆConcerts.vueï¼‰
**è·¯ç”±**: `/band/concerts`

**åŠŸèƒ½**:
- æ¼”å”±ä¼šåˆ—è¡¨è¡¨æ ¼
- å‘å¸ƒæ¼”å”±ä¼šæŒ‰é’®
- æ“ä½œåˆ—ï¼šç¼–è¾‘ã€åˆ é™¤

**è¡¨æ ¼åˆ—**:
- åç§°ã€æ—¶é—´ã€åœ°ç‚¹ã€å‚ä¸äººæ•°ã€æ“ä½œ

**å¯¹è¯æ¡†**:
- å‘å¸ƒ/ç¼–è¾‘æ¼”å”±ä¼šå¯¹è¯æ¡†ï¼ˆè¡¨å•ï¼Œæ—¥æœŸæ—¶é—´é€‰æ‹©å™¨ï¼‰

###### 5.3.6 æ­Œè¿·æ•°æ®é¡µé¢ï¼ˆFans.vueï¼‰
**è·¯ç”±**: `/band/fans`

**åŠŸèƒ½**:
- Tabåˆ‡æ¢ï¼šæ­Œè¿·åˆ—è¡¨ã€ç»Ÿè®¡åˆ†æ
- **æ­Œè¿·åˆ—è¡¨Tab**: æ˜¾ç¤ºå…³æ³¨æœ¬ä¹é˜Ÿçš„æ­Œè¿·è¡¨æ ¼
- **ç»Ÿè®¡åˆ†æTab**: 
  - æ­Œè¿·æ€»æ•°ã€æ€§åˆ«åˆ†å¸ƒï¼ˆé¥¼å›¾ï¼‰
  - å¹´é¾„åˆ†å¸ƒï¼ˆæŸ±çŠ¶å›¾ï¼‰
  - èŒä¸šåˆ†å¸ƒï¼ˆè¡¨æ ¼ï¼‰
  - å­¦å†åˆ†å¸ƒï¼ˆè¡¨æ ¼ï¼‰
  - æœ€å—æ¬¢è¿çš„ä¸“è¾‘/æ­Œæ›²

**UIç»„ä»¶**:
- Tabåˆ‡æ¢ï¼ˆel-tabsï¼‰
- è¡¨æ ¼ï¼ˆel-tableï¼‰
- å›¾è¡¨ï¼ˆEChartsï¼‰
- ç»Ÿè®¡å¡ç‰‡

##### 5.4 æ­Œè¿·ç”¨æˆ·é¡µé¢

**å¸ƒå±€**: å·¦ä¾§å¯¼èˆªèœå• + é¡¶éƒ¨æ ‡é¢˜æ  + ä¸»å†…å®¹åŒº

###### 5.4.1 æ­Œè¿·ä¸»é¡µï¼ˆHome.vueï¼‰
**è·¯ç”±**: `/fan/home`

**åŠŸèƒ½**:
- ä¸ªäººç»Ÿè®¡å¡ç‰‡ï¼ˆå…³æ³¨ä¹é˜Ÿæ•°ã€æ”¶è—ä¸“è¾‘æ•°ã€æ”¶è—æ­Œæ›²æ•°ã€ä¹è¯„æ•°ï¼‰
- æ¨èä¹é˜Ÿåˆ—è¡¨ï¼ˆæœ€å¤š5ä¸ªï¼‰
- ä¸“è¾‘æ’è¡Œæ¦œï¼ˆTop 10ï¼‰
- æœ€æ–°æ¼”å”±ä¼šä¿¡æ¯ï¼ˆæœ€å¤š5åœºï¼‰
- å¿«é€Ÿæ“ä½œæŒ‰é’®

**UIç»„ä»¶**:
- ç»Ÿè®¡å¡ç‰‡ï¼ˆel-cardï¼‰
- æ¨èåˆ—è¡¨ï¼ˆel-listï¼‰
- æ’è¡Œæ¦œè¡¨æ ¼ï¼ˆel-tableï¼‰
- å¿«æ·æŒ‰é’®

###### 5.4.2 ä¸ªäººä¿¡æ¯é¡µé¢ï¼ˆProfile.vueï¼‰
**è·¯ç”±**: `/fan/profile`

**åŠŸèƒ½**:
- ä¸ªäººä¿¡æ¯å¡ç‰‡ï¼ˆå§“åã€æ€§åˆ«ã€å¹´é¾„ã€èŒä¸šã€å­¦å†ï¼‰
- ç¼–è¾‘ä¿¡æ¯æŒ‰é’®
- ä¿®æ”¹å¯†ç æŒ‰é’®
- è´¦å·ç»Ÿè®¡ï¼ˆå…³æ³¨ã€æ”¶è—ã€å‚ä¸æ•°é‡ï¼‰

**å¯¹è¯æ¡†**:
- ç¼–è¾‘ä¿¡æ¯å¯¹è¯æ¡†ï¼ˆè¡¨å•ï¼‰
- ä¿®æ”¹å¯†ç å¯¹è¯æ¡†ï¼ˆè¡¨å•ï¼Œéœ€éªŒè¯æ—§å¯†ç ï¼‰

###### 5.4.3 æˆ‘çš„å–œå¥½é¡µé¢ï¼ˆFavorites.vueï¼‰
**è·¯ç”±**: `/fan/favorites`

**åŠŸèƒ½**:
- Tabåˆ‡æ¢ï¼šæˆ‘å–œæ¬¢çš„ä¹é˜Ÿã€æˆ‘å–œæ¬¢çš„ä¸“è¾‘ã€æˆ‘å–œæ¬¢çš„æ­Œæ›²ã€æˆ‘å‚åŠ çš„æ¼”å”±ä¼š

**Tab 1 - æˆ‘å–œæ¬¢çš„ä¹é˜Ÿ**:
- ä¹é˜Ÿåˆ—è¡¨è¡¨æ ¼ï¼ˆåˆ†é¡µï¼‰
- æ“ä½œåˆ—ï¼šæŸ¥çœ‹è¯¦æƒ…ã€å–æ¶ˆå…³æ³¨

**Tab 2 - æˆ‘å–œæ¬¢çš„ä¸“è¾‘**:
- ä¸“è¾‘åˆ—è¡¨è¡¨æ ¼ï¼ˆåˆ†é¡µï¼‰
- æ“ä½œåˆ—ï¼šæŸ¥çœ‹è¯¦æƒ…ã€å–æ¶ˆæ”¶è—ã€è¯„è®º

**Tab 3 - æˆ‘å–œæ¬¢çš„æ­Œæ›²**:
- æ­Œæ›²åˆ—è¡¨è¡¨æ ¼ï¼ˆåˆ†é¡µï¼ŒæŒ‰ä¸“è¾‘åˆ†ç»„ï¼‰
- æ“ä½œåˆ—ï¼šæŸ¥çœ‹è¯¦æƒ…ã€å–æ¶ˆæ”¶è—

**Tab 4 - æˆ‘å‚åŠ çš„æ¼”å”±ä¼š**:
- æ¼”å”±ä¼šåˆ—è¡¨è¡¨æ ¼ï¼ˆåˆ†é¡µï¼‰
- æ“ä½œåˆ—ï¼šæŸ¥çœ‹è¯¦æƒ…ã€åˆ é™¤è®°å½•

**UIç»„ä»¶**:
- Tabåˆ‡æ¢ï¼ˆel-tabsï¼‰
- è¡¨æ ¼ï¼ˆel-tableï¼‰
- åˆ†é¡µï¼ˆel-paginationï¼‰
- æ“ä½œæŒ‰é’®

###### 5.4.4 å‘ç°é¡µé¢ï¼ˆDiscovery.vueï¼‰
**è·¯ç”±**: `/fan/discovery`

**åŠŸèƒ½**:
- Tabåˆ‡æ¢ï¼šå‘ç°ä¹é˜Ÿã€å‘ç°ä¸“è¾‘ã€å‘ç°æ­Œæ›²ã€å‘ç°æ¼”å”±ä¼šã€ä¸“è¾‘æ’è¡Œæ¦œ

**Tab 1 - å‘ç°ä¹é˜Ÿ**:
- ä¹é˜Ÿåˆ—è¡¨è¡¨æ ¼ï¼ˆåˆ†é¡µï¼‰
- æœç´¢æ¡†ï¼ˆæŒ‰åç§°æœç´¢ï¼‰
- æ“ä½œåˆ—ï¼šæŸ¥çœ‹è¯¦æƒ…ã€å…³æ³¨
- æ ‡è¯†å·²å…³æ³¨çŠ¶æ€

**Tab 2 - å‘ç°ä¸“è¾‘**:
- ä¸“è¾‘åˆ—è¡¨è¡¨æ ¼ï¼ˆåˆ†é¡µï¼‰
- æœç´¢æ¡†ï¼ˆæŒ‰åç§°æœç´¢ï¼‰
- æ“ä½œåˆ—ï¼šæŸ¥çœ‹è¯¦æƒ…ã€æ”¶è—ã€è¯„è®º
- æ˜¾ç¤ºè¯„åˆ†

**Tab 3 - å‘ç°æ­Œæ›²**:
- æ­Œæ›²åˆ—è¡¨è¡¨æ ¼ï¼ˆåˆ†é¡µï¼‰
- æœç´¢æ¡†ï¼ˆæŒ‰åç§°æœç´¢ï¼‰
- æ“ä½œåˆ—ï¼šæŸ¥çœ‹è¯¦æƒ…ã€æ”¶è—

**Tab 4 - å‘ç°æ¼”å”±ä¼š**:
- æ¼”å”±ä¼šåˆ—è¡¨è¡¨æ ¼ï¼ˆåˆ†é¡µï¼‰
- æœç´¢æ¡†ï¼ˆæŒ‰åç§°ã€åœ°ç‚¹æœç´¢ï¼‰
- æ“ä½œåˆ—ï¼šæŸ¥çœ‹è¯¦æƒ…ã€æ ‡è®°å‚åŠ 

**Tab 5 - ä¸“è¾‘æ’è¡Œæ¦œ**:
- æ’è¡Œæ¦œè¡¨æ ¼ï¼ˆTop 10ï¼‰
- æ˜¾ç¤ºæ’åã€ä¸“è¾‘åç§°ã€ä¹é˜Ÿã€è¯„åˆ†ã€è¯„è®ºæ•°
- æ“ä½œåˆ—ï¼šæŸ¥çœ‹è¯¦æƒ…ã€æ”¶è—ã€è¯„è®º

**UIç»„ä»¶**:
- Tabåˆ‡æ¢ï¼ˆel-tabsï¼‰
- æœç´¢æ¡†ï¼ˆel-inputï¼‰
- è¡¨æ ¼ï¼ˆel-tableï¼‰
- åˆ†é¡µï¼ˆel-paginationï¼‰
- æ“ä½œæŒ‰é’®
- çŠ¶æ€æ ‡ç­¾ï¼ˆel-tagï¼‰

###### 5.4.5 ä¹è¯„ç®¡ç†é¡µé¢ï¼ˆReviews.vueï¼‰
**è·¯ç”±**: `/fan/reviews`

**åŠŸèƒ½**:
- Tabåˆ‡æ¢ï¼šæˆ‘çš„ä¹è¯„ã€å‘è¡¨ä¹è¯„

**Tab 1 - æˆ‘çš„ä¹è¯„**:
- ä¹è¯„åˆ—è¡¨è¡¨æ ¼ï¼ˆåˆ†é¡µï¼‰
- æ˜¾ç¤ºï¼šä¸“è¾‘åç§°ã€ä¹é˜Ÿåç§°ã€æˆ‘çš„è¯„åˆ†ã€æˆ‘çš„è¯„è®ºã€è¯„è®ºæ—¶é—´
- æ“ä½œåˆ—ï¼šç¼–è¾‘ã€åˆ é™¤

**Tab 2 - å‘è¡¨ä¹è¯„**:
- ä¸“è¾‘é€‰æ‹©ï¼ˆä¸‹æ‹‰æ¡†æˆ–æœç´¢é€‰æ‹©å™¨ï¼‰
- è¯„åˆ†è¾“å…¥ï¼ˆæ»‘å—ï¼Œ1-10ï¼Œæ­¥é•¿0.5ï¼‰
- è¯„è®ºå†…å®¹è¾“å…¥ï¼ˆæ–‡æœ¬åŸŸï¼‰
- æäº¤æŒ‰é’®
- æç¤ºï¼šæ¯ä¸ªä¸“è¾‘åªèƒ½è¯„è®ºä¸€æ¬¡

**å¯¹è¯æ¡†**:
- ç¼–è¾‘ä¹è¯„å¯¹è¯æ¡†ï¼ˆè¡¨å•ï¼ŒåŒ…å«è¯„åˆ†æ»‘å—å’Œè¯„è®ºæ–‡æœ¬åŸŸï¼‰

**UIç»„ä»¶**:
- Tabåˆ‡æ¢ï¼ˆel-tabsï¼‰
- è¡¨æ ¼ï¼ˆel-tableï¼‰
- è¯„åˆ†æ»‘å—ï¼ˆel-sliderï¼‰
- æ–‡æœ¬åŸŸï¼ˆel-input type="textarea"ï¼‰
- é€‰æ‹©å™¨ï¼ˆel-selectï¼‰

##### 5.5 UIè®¾è®¡è§„èŒƒ

###### 5.5.1 å¸ƒå±€è§„èŒƒ
- ä½¿ç”¨Element Plusçš„Layoutç»„ä»¶
- å·¦ä¾§å¯¼èˆªå®½åº¦ï¼š200px
- é¡¶éƒ¨æ ‡é¢˜æ é«˜åº¦ï¼š60px
- ä¸»å†…å®¹åŒºpaddingï¼š20px

###### 5.5.2 é¢œè‰²è§„èŒƒ
- ä¸»è‰²è°ƒï¼šElement Plusé»˜è®¤è“è‰²ï¼ˆ#409EFFï¼‰
- æˆåŠŸï¼šç»¿è‰²ï¼ˆ#67C23Aï¼‰
- è­¦å‘Šï¼šæ©™è‰²ï¼ˆ#E6A23Cï¼‰
- å±é™©ï¼šçº¢è‰²ï¼ˆ#F56C6Cï¼‰
- ä¿¡æ¯ï¼šç°è‰²ï¼ˆ#909399ï¼‰

###### 5.5.3 ç»„ä»¶è§„èŒƒ
- è¡¨æ ¼ï¼šä½¿ç”¨el-tableï¼Œå¸¦è¾¹æ¡†å’Œæ–‘é©¬çº¹
- æŒ‰é’®ï¼šä½¿ç”¨el-buttonï¼Œä¸»è¦æ“ä½œç”¨type="primary"
- å¯¹è¯æ¡†ï¼šä½¿ç”¨el-dialogï¼Œå®½åº¦50%æˆ–60%
- è¡¨å•ï¼šä½¿ç”¨el-formï¼Œlabelå®½åº¦100px
- åˆ†é¡µï¼šä½¿ç”¨el-paginationï¼Œæ¯é¡µ10æˆ–20æ¡

###### 5.5.4 äº¤äº’è§„èŒƒ
- åˆ é™¤æ“ä½œéœ€äºŒæ¬¡ç¡®è®¤ï¼ˆel-message-boxï¼‰
- æ“ä½œæˆåŠŸæ˜¾ç¤ºæˆåŠŸæç¤ºï¼ˆel-messageï¼‰
- æ“ä½œå¤±è´¥æ˜¾ç¤ºé”™è¯¯æç¤ºï¼ˆel-messageï¼‰
- è¡¨å•éªŒè¯å¤±è´¥æ˜¾ç¤ºéªŒè¯æç¤º
- åŠ è½½æ•°æ®æ—¶æ˜¾ç¤ºloadingçŠ¶æ€

##### 5.6 å“åº”å¼è®¾è®¡
- æ”¯æŒæ¡Œé¢ç«¯ï¼ˆ1920x1080ã€1366x768ï¼‰
- è¡¨æ ¼åœ¨å°å±å¹•ä¸‹å¯æ¨ªå‘æ»šåŠ¨
- å¯¹è¯æ¡†åœ¨å°å±å¹•ä¸‹å®½åº¦è‡ªé€‚åº”